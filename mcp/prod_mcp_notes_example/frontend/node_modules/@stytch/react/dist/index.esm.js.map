{"version":3,"file":"index.esm.js","sources":["../../../internal/react-shared/src/StytchContext.tsx","../../../internal/react-shared/src/Stytch.tsx","../src/StytchContext.tsx"],"sourcesContent":["import React, {\n  ComponentType,\n  createContext,\n  ReactNode,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n} from 'react';\n\nimport { mergeWithStableProps } from '@stytch/js-utils';\nimport type { Session, StytchProjectConfigurationInput, StytchUIClient, User } from '@stytch/vanilla-js';\nimport type { PermissionsMap, StytchHeadlessClient } from '@stytch/vanilla-js/headless';\nimport { useAsyncState } from './utils/async';\nimport { noProviderError, providerMustBeUniqueError } from './utils/errors';\nimport { invariant } from './utils/invariant';\nimport { isStytchSSRProxy } from './StytchSSRProxy';\n\n/**\n * The Stytch Client object passed in to <StytchProvider /> in your application root.\n * Either a StytchUIClient or StytchHeadlessClient.\n */\ntype StytchClient<TProjectConfiguration extends StytchProjectConfigurationInput> =\n  | StytchUIClient<TProjectConfiguration>\n  | StytchHeadlessClient<TProjectConfiguration>;\n\ntype StytchContext<TProjectConfiguration extends StytchProjectConfigurationInput> =\n  | {\n      isMounted: false;\n    }\n  | {\n      isMounted: true;\n      client: StytchClient<TProjectConfiguration>;\n    };\n\ntype SWRUserUninitialized = {\n  /**\n   * Either the active {@link User} object, or null if the user is not logged in.\n   */\n  user: null;\n  /**\n   * If true, indicates that the value returned is from the application cache and a state refresh is in progress.\n   */\n  fromCache: false;\n  /**\n   * If true, indicates that the SDK has completed initialization.\n   */\n  isInitialized: false;\n};\n\ntype SWRUserInitialized = {\n  /**\n   * Either the active {@link User} object, or null if the user is not logged in.\n   */\n  user: User | null;\n  /**\n   * If true, indicates that the value returned is from the application cache and a state refresh is in progress.\n   */\n  fromCache: boolean;\n  /**\n   * If true, indicates that the SDK has completed initialization.\n   */\n  isInitialized: true;\n};\n\ntype SWRUser<TAlwaysInitialized extends boolean = boolean> = TAlwaysInitialized extends true\n  ? SWRUserInitialized\n  : SWRUserInitialized | SWRUserUninitialized;\n\nconst initialUser: SWRUserUninitialized = {\n  user: null,\n  fromCache: false,\n  isInitialized: false,\n};\n\ntype SWRSessionUninitialized = {\n  /**\n   * Either the active {@link Session} object, or null if the user is not logged in.\n   */\n  session: null;\n  /**\n   * If true, indicates that the value returned is from the application cache and a state refresh is in progress.\n   */\n  fromCache: false;\n  /**\n   * If true, indicates that the SDK has completed initialization.\n   */\n  isInitialized: false;\n};\n\ntype SWRSessionInitialized = {\n  /**\n   * Either the active {@link Session} object, or null if the user is not logged in.\n   */\n  session: Session | null;\n  /**\n   * If true, indicates that the value returned is from the application cache and a state refresh is in progress.\n   */\n  fromCache: boolean;\n  /**\n   * If true, indicates that the SDK has completed initialization.\n   */\n  isInitialized: true;\n};\n\ntype SWRSession<TAlwaysInitialized extends boolean = boolean> = TAlwaysInitialized extends true\n  ? SWRSessionInitialized\n  : SWRSessionInitialized | SWRSessionUninitialized;\n\nconst initialSession: SWRSessionUninitialized = {\n  session: null,\n  fromCache: false,\n  isInitialized: false,\n};\n\nconst StytchContext = createContext<StytchContext<StytchProjectConfigurationInput>>({ isMounted: false });\nconst StytchUserContext = createContext<SWRUser>(initialUser);\nconst StytchSessionContext = createContext<SWRSession>(initialSession);\n\nexport const useIsMounted__INTERNAL = (): boolean => useContext(StytchContext).isMounted;\n\nexport const isUIClient = <TProjectConfiguration extends StytchProjectConfigurationInput>(\n  client: StytchClient<TProjectConfiguration>,\n): client is StytchUIClient<TProjectConfiguration> => {\n  return (client as StytchUIClient<TProjectConfiguration>).mountLogin !== undefined;\n};\n\n/**\n * Returns the active User.\n * The Stytch SDKs are used for client-side authentication and session management.\n * Check the isInitialized property to determine if the SDK has completed initialization.\n * Check the fromCache property to determine if the user data is from persistent storage.\n * @example\n * const {user, isInitialized, fromCache} = useStytchUser();\n * if (!isInitialized) {\n *     return <p>Loading...</p>;\n * }\n * return (<h1>Welcome, {user.name.first_name}</h1>);\n */\nexport const useStytchUser = <TAssumeHydrated extends boolean = false>(): SWRUser<TAssumeHydrated> => {\n  invariant(useIsMounted__INTERNAL(), noProviderError('useStytchUser'));\n  return useContext(StytchUserContext) as SWRUser<TAssumeHydrated>;\n};\n\n/**\n * Returns the active user's Stytch session.\n * The Stytch SDKs are used for client-side authentication and session management.\n * Check the isInitialized property to determine if the SDK has completed initialization.\n * Check the fromCache property to determine if the session data is from persistent storage.\n * @example\n * const {session, isInitialized, fromCache} = useStytchSession();\n * useEffect(() => {\n *   if (!isInitialized) {\n *     return;\n *   }\n *   if (!session) {\n *     router.replace('/login')\n *   }\n * }, [session, isInitialized]);\n */\nexport const useStytchSession = <TAssumeHydrated extends boolean = false>(): SWRSession<TAssumeHydrated> => {\n  invariant(useIsMounted__INTERNAL(), noProviderError('useStytchSession'));\n  return useContext(StytchSessionContext) as SWRSession<TAssumeHydrated>;\n};\n\n/**\n * Returns the Stytch client stored in the Stytch context.\n *\n * @example\n * const stytch = useStytch();\n * useEffect(() => {\n *   stytch.magicLinks.authenticate('...')\n * }, [stytch]);\n */\nexport const useStytch = <\n  TProjectConfiguration extends StytchProjectConfigurationInput = Stytch.DefaultProjectConfiguration,\n>(): StytchClient<TProjectConfiguration> => {\n  const ctx = useContext(StytchContext);\n  invariant(ctx.isMounted, noProviderError('useStytch'));\n  return ctx.client as StytchClient<TProjectConfiguration>;\n};\n\nexport const withStytch = <\n  T extends object,\n  TProjectConfiguration extends StytchProjectConfigurationInput = Stytch.DefaultProjectConfiguration,\n>(\n  Component: ComponentType<T & { stytch: StytchClient<TProjectConfiguration> }>,\n): ComponentType<T> => {\n  const WithStytch: ComponentType<T> = (props) => {\n    invariant(useIsMounted__INTERNAL(), noProviderError('withStytch'));\n    return <Component {...props} stytch={useStytch()} />;\n  };\n  WithStytch.displayName = `withStytch(${Component.displayName || Component.name || 'Component'})`;\n  return WithStytch;\n};\n\nexport const withStytchUser = <T extends object, TAssumeHydrated extends boolean = false>(\n  Component: ComponentType<\n    T & { stytchUser: User | null; stytchUserIsInitialized: boolean; stytchUserIsFromCache: boolean }\n  >,\n): ComponentType<T> => {\n  const WithStytchUser: ComponentType<T> = (props) => {\n    invariant(useIsMounted__INTERNAL(), noProviderError('withStytchUser'));\n    const { user, isInitialized, fromCache } = useStytchUser<TAssumeHydrated>();\n    return (\n      <Component\n        {...props}\n        stytchUser={user}\n        stytchUserIsInitialized={isInitialized}\n        stytchUserIsFromCache={fromCache}\n      />\n    );\n  };\n  WithStytchUser.displayName = `withStytchUser(${Component.displayName || Component.name || 'Component'})`;\n  return WithStytchUser;\n};\n\nexport const withStytchSession = <T extends object, TAssumeHydrated extends boolean = false>(\n  Component: ComponentType<\n    T & { stytchSession: Session | null; stytchSessionIsInitialized: boolean; stytchSessionIsFromCache: boolean }\n  >,\n): ComponentType<T> => {\n  const WithStytchSession: ComponentType<T> = (props) => {\n    invariant(useIsMounted__INTERNAL(), noProviderError('withStytchSession'));\n    const { session, isInitialized, fromCache } = useStytchSession<TAssumeHydrated>();\n    return (\n      <Component\n        {...props}\n        stytchSession={session}\n        stytchSessionIsInitialized={isInitialized}\n        stytchSessionIsFromCache={fromCache}\n      />\n    );\n  };\n  WithStytchSession.displayName = `withStytchSession(${Component.displayName || Component.name || 'Component'})`;\n  return WithStytchSession;\n};\n\ntype SWRIsAuthorizedUninitialized = {\n  /**\n   * Whether the logged-in user is allowed to perform the specified action on the specified resource.\n   */\n  isAuthorized: false;\n  /**\n   * If true, indicates that the value returned is from the application cache and a state refresh is in progress.\n   */\n  fromCache: false;\n  /**\n   * If true, indicates that the SDK has completed initialization.\n   */\n  isInitialized: false;\n};\n\ntype SWRIsAuthorizedInitialized = {\n  /**\n   * Whether the logged-in user is allowed to perform the specified action on the specified resource.\n   */\n  isAuthorized: boolean;\n  /**\n   * If true, indicates that the value returned is from the application cache and a state refresh is in progress.\n   */\n  fromCache: boolean;\n  /**\n   * If true, indicates that the SDK has completed initialization.\n   */\n  isInitialized: boolean;\n};\n\ntype SWRIsAuthorized<TAlwaysInitialized extends boolean> = TAlwaysInitialized extends true\n  ? SWRIsAuthorizedInitialized\n  : SWRIsAuthorizedInitialized | SWRIsAuthorizedUninitialized;\n\n/**\n * Determines whether the logged-in user is allowed to perform the specified action on the specified resource.\n * Returns `true` if the user can perform the action, `false` otherwise.\n *\n * If the user is not logged in, this method will always return false.\n * If the resource or action provided are not valid for the configured RBAC policy, this method will return false.\n *\n * Remember - authorization checks for sensitive actions should always occur on the backend as well.\n * @example\n * const { isAuthorized } = useStytchIsAuthorized<Permissions>('documents', 'edit');\n * return <button disabled={!isAuthorized}>Edit</button>\n */\nexport const useStytchIsAuthorized = <TAssumeHydrated extends boolean = false>(\n  resourceId: string,\n  action: string,\n): SWRIsAuthorized<TAssumeHydrated> => {\n  invariant(useIsMounted__INTERNAL(), noProviderError('useStytchIsAuthorized', 'StytchProvider'));\n  const client = useStytch();\n  const { user } = useStytchUser();\n  const [isAuthorized, setIsAuthorized] = useAsyncState<SWRIsAuthorized<boolean>>({\n    isInitialized: false,\n    fromCache: false,\n    isAuthorized: false,\n  });\n\n  useEffect(() => {\n    if (isStytchSSRProxy(client)) {\n      return;\n    }\n\n    setIsAuthorized({\n      isInitialized: true,\n      fromCache: true,\n      isAuthorized: client.rbac.isAuthorizedSync(resourceId, action),\n    });\n  }, [action, client, resourceId, setIsAuthorized]);\n\n  useEffect(() => {\n    if (isStytchSSRProxy(client)) {\n      return;\n    }\n    client.rbac.isAuthorized(resourceId, action).then((isAuthorized) => {\n      setIsAuthorized({ isAuthorized, fromCache: false, isInitialized: true });\n    });\n  }, [client, user?.roles, resourceId, action, setIsAuthorized]);\n\n  return isAuthorized;\n};\n\ntype permissionsLoaded<Permissions extends Record<string, string>> =\n  | {\n      loaded: false;\n      value: null;\n    }\n  | {\n      loaded: true;\n      value: PermissionsMap<Permissions>;\n    };\n\n/**\n * Wrap your component with this HOC in order to receive the permissions for the logged-in user.\n * Evaluates all permissions granted to the logged-in user.\n * Returns a Record<RoleId, Record<Action, boolean>> response indicating the user's permissions.\n * Each boolean will be `true` if the user can perform the action, `false` otherwise.\n *\n * If the user is not logged in, all values will be false.\n *\n * Remember - authorization checks for sensitive actions should always occur on the backend as well.\n * @example\n * type Permissions = {\n *   document: 'create' | 'read' | 'write\n *   image: 'create' | 'read'\n * }\n *\n * const MyComponent = (props) => {\n *   const canEditDocuments = props.stytchPermissions.document.edit;\n *   const canReadImages = props.stytchPermissions.image.read;\n * }\n * return withStytchPermissions<Permissions>(MyComponent)\n */\nexport const withStytchPermissions = <Permissions extends Record<string, string>, T extends object>(\n  Component: ComponentType<T & { stytchPermissions: PermissionsMap<Permissions> }>,\n): ComponentType<T> => {\n  const WithStytchPermissions: ComponentType<T> = (props) => {\n    invariant(useIsMounted__INTERNAL(), noProviderError('useRBACPermissions', 'StytchProvider'));\n    const client = useStytch();\n    const { user } = useStytchUser();\n    const [permissions, setPermissions] = useAsyncState<permissionsLoaded<Permissions>>({ loaded: false, value: null });\n\n    useEffect(() => {\n      client.rbac.allPermissions<Permissions>().then((permissions) => {\n        setPermissions({ loaded: true, value: permissions });\n      });\n    }, [client, user?.roles, setPermissions]);\n\n    if (!permissions.loaded) {\n      return null;\n    }\n    return <Component {...props} stytchPermissions={permissions.value} />;\n  };\n  WithStytchPermissions.displayName = `withStytchPermissions(${\n    Component.displayName || Component.name || 'Component'\n  })`;\n  return WithStytchPermissions;\n};\n\nexport interface StytchProviderProps<\n  TProjectConfiguration extends StytchProjectConfigurationInput = Stytch.DefaultProjectConfiguration,\n> {\n  /**\n   * A Stytch client instance, created using either {@link createStytchHeadlessClient} or {@link createStytchUIClient}\n   */\n  stytch: StytchClient<TProjectConfiguration>;\n  /**\n   * When true, the provider will assume that the component will only be\n   * rendered in a browser environment, either in a single-page application or\n   * after completing hydration of a server-rendered application. This allows\n   * cached values to be retrieved from the browser on the first render, meaning\n   * that the `isInitialized` value returned from Stytch hooks will be `true`\n   * starting from the first render.\n   *\n   * When `false`, the provider will defer initialization until after the first\n   * render, and `isInitialized` will initially be `false`.\n   *\n   * This value defaults to `false` in `@stytch/nextjs`.\n   */\n  assumeHydrated?: boolean;\n  children?: ReactNode;\n}\n\n/**\n * The Stytch Context Provider.\n * Wrap your application with this component in order to use Stytch everywhere in your app.\n * @example\n * const stytch = createStytchHeadlessClient('public-token-<find yours in the stytch dashboard>')\n *\n * return (\n *   <StytchProvider stytch={stytch}>\n *     <App />\n *   </StytchProvider>\n * )\n */\nexport const StytchProvider = <\n  TProjectConfiguration extends StytchProjectConfigurationInput = Stytch.DefaultProjectConfiguration,\n>({\n  stytch,\n  children,\n  assumeHydrated = false,\n}: StytchProviderProps<TProjectConfiguration>): JSX.Element => {\n  invariant(!useIsMounted__INTERNAL(), providerMustBeUniqueError);\n  invariant(\n    !assumeHydrated || typeof window !== 'undefined',\n    'The `assumeHydrated` prop must be set to `false` when using StytchProvider in a server environment.',\n  );\n\n  const ctx = useMemo(() => ({ client: stytch, isMounted: true }), [stytch]);\n\n  type ClientState<TAlwaysInitialized extends boolean> = {\n    session: SWRSession<TAlwaysInitialized>;\n    user: SWRUser<TAlwaysInitialized>;\n  };\n\n  const getHydratedState = useCallback(() => {\n    return {\n      session: { ...stytch.session.getInfo(), isInitialized: true },\n      user: { ...stytch.user.getInfo(), isInitialized: true },\n    } satisfies ClientState<true>;\n  }, [stytch]);\n\n  const getInitialState = () => {\n    return {\n      session: initialSession,\n      user: initialUser,\n    } satisfies ClientState<false>;\n  };\n\n  const [{ user, session }, setClientState] = useAsyncState<ClientState<boolean>>(() =>\n    assumeHydrated ? getHydratedState() : (getInitialState() as ClientState<boolean>),\n  );\n\n  // Store the initial value of `assumeHydrated` in a ref, because it is\n  // logically only relevant for the first render\n  const assumeHydratedRef = useRef(assumeHydrated);\n  useEffect(() => {\n    if (isStytchSSRProxy(stytch)) {\n      return;\n    }\n\n    const updateState = () => {\n      setClientState((oldState) => mergeWithStableProps(oldState, getHydratedState()));\n    };\n\n    if (!assumeHydratedRef.current) {\n      updateState();\n    }\n\n    return stytch.onStateChange(updateState);\n  }, [getHydratedState, setClientState, stytch]);\n\n  return (\n    <StytchContext.Provider value={ctx}>\n      <StytchUserContext.Provider value={user}>\n        <StytchSessionContext.Provider value={session}>{children}</StytchSessionContext.Provider>\n      </StytchUserContext.Provider>\n    </StytchContext.Provider>\n  );\n};\n","import React, { useRef } from 'react';\nimport type {\n  Callbacks,\n  StringsOptions,\n  StytchLoginConfig,\n  StyleConfig,\n  StytchProjectConfigurationInput,\n  IDPConsentScreenManifest,\n} from '@stytch/vanilla-js';\n\nimport { useStytch, isUIClient, useIsMounted__INTERNAL, useStytchUser } from './StytchContext';\nimport { invariant } from './utils/invariant';\nimport { noHeadlessClientError, noProviderError } from './utils/errors';\nimport useIsomorphicLayoutEffect from './utils/useIsomorphicLayoutEffect';\n\nexport interface StytchProps<\n  TProjectConfiguration extends StytchProjectConfigurationInput = Stytch.DefaultProjectConfiguration,\n> extends StringsOptions {\n  /**\n   * A {@link StytchLoginConfig} object. Add products and product-specific config to this object to change the login methods shown.\n   *\n   * @example\n   * {\n   *   products: ['crypto', 'otps']\n   * }\n   *\n   * @example\n   * {\n   *   products: ['emailMagicLinks'>]\n   *   emailMagicLinksOptions: {\n   *     loginRedirectURL: 'https://example.com/authenticate',\n   *     signupRedirectURL: 'https://example.com/authenticate',\n   *   }\n   * }\n   *\n   * @example\n   * {\n   *   products: ['oauth'>]\n   *   oauthOptions: {\n   *   providers: [\n   *       { type: 'google', one_tap: true, position: 'embedded' },\n   *       { type: 'microsoft' },\n   *       { type: 'apple' },\n   *       { type: 'facebook' },\n   *     ],\n   *   }\n   * }\n   */\n  config: StytchLoginConfig;\n  /**\n   * An optional {@link StyleConfig} to customize the look and feel of the screen.\n   *\n   * @example\n   * {\n   *    fontFamily: 'Arial, Helvetica, sans-serif',\n   *    width: '360px',\n   *    primaryColor: '#19303D',\n   * }\n   */\n  styles?: StyleConfig;\n  /**\n   * An optional {@link Callbacks} object.\n   *\n   * @example\n   * {\n   *   onError: ({message}) => {\n   *      console.error('Stytch login screen error', message)\n   *   }\n   * }\n   *\n   * @example\n   * {\n   *   onEvent: ({type, data}) => {\n   *     if(type === StytchEventType.CryptoWalletAuthenticate) {\n   *       console.log('Logged in with crypto wallet', data);\n   *     }\n   *   }\n   * }\n   */\n  callbacks?: Callbacks<TProjectConfiguration>;\n}\n\n/**\n * The Stytch Login Screen component.\n * This component can only be used with a Stytch UI Client\n * passed into the StytchProvider.\n *\n * See the {@link https://stytch.com/docs/sdks online reference}\n *\n * @example\n * <StytchLogin\n *   config={{\n *     products: ['emailMagicLinks', 'oauth'],\n *     emailMagicLinksOptions: {\n *       loginRedirectURL: 'https://example.com/authenticate',\n *       signupRedirectURL: 'https://example.com/authenticate',\n *     },\n *     oauthOptions: {\n *      providers: [{ type: OAuthProviders.Google }, { type: OAuthProviders.Microsoft }],\n *    },\n *   }}\n *   styles={{\n *     fontFamily: '\"Helvetica New\", Helvetica, sans-serif',\n *     primaryColor: '#0577CA',\n *     width: '321px',\n *   }}\n *   callbacks={{\n *     onEvent: (event) => console.log(event)\n *   }}\n * />\n */\nexport const StytchLogin = <\n  TProjectConfiguration extends StytchProjectConfigurationInput = Stytch.DefaultProjectConfiguration,\n>({\n  config,\n  styles,\n  callbacks,\n  strings,\n}: StytchProps<TProjectConfiguration>) => {\n  invariant(useIsMounted__INTERNAL(), noProviderError('<StytchLogin />'));\n  const stytchClient = useStytch<TProjectConfiguration>();\n  const containerEl = useRef<HTMLDivElement>(null);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!isUIClient(stytchClient)) {\n      throw Error(noHeadlessClientError);\n    }\n\n    if (!containerEl.current) {\n      return;\n    }\n\n    if (!containerEl.current.id) {\n      const randId = Math.floor(Math.random() * 1e6);\n      containerEl.current.id = `stytch-magic-link-${randId}`;\n    }\n\n    stytchClient.mountLogin({\n      config,\n      callbacks,\n      elementId: `#${containerEl.current.id}`,\n      styles,\n      strings,\n    });\n  }, [stytchClient, config, styles, callbacks, strings]);\n\n  return <div ref={containerEl} />;\n};\n\nexport interface StytchResetPasswordProps<\n  TProjectConfiguration extends StytchProjectConfigurationInput = Stytch.DefaultProjectConfiguration,\n> extends StytchProps<TProjectConfiguration> {\n  /**\n   * A Stytch password reset token.\n   */\n  passwordResetToken: string;\n}\n\nexport type IDPConsentScreenManifestGenerator = (input: {\n  scopes: string[];\n  clientName: string;\n}) => IDPConsentScreenManifest;\n\nexport type AuthTokenParams = {\n  /**\n   * The auth token to provide for attestation prior to running OAuth flow.\n   */\n  trustedAuthToken: string;\n  /**\n   * The profile ID of the token.\n   */\n  tokenProfileID: string;\n};\n\nexport type IdentityProviderProps = Omit<StytchProps, 'config'> & {\n  /**\n   * Optional {@link IDPConsentScreenManifestGenerator} to customize the consent screen.\n   */\n  getIDPConsentManifest?: IDPConsentScreenManifestGenerator;\n  /**\n   * Optional {@link AuthTokenParams} to provide a trusted auth token to provide for attestation prior to running OAuth flow.\n   */\n  authTokenParams?: AuthTokenParams;\n};\n\n/**\n * The Stytch Reset Password component.\n * This component can only be used with a Stytch UI Client\n * passed into the StytchProvider.\n *\n * See the {@link https://stytch.com/docs/sdks online reference}\n *\n * @example\n * <StytchPasswordReset\n *   config={{\n *     products: ['emailMagicLinks', 'oauth'],\n *     emailMagicLinksOptions: {\n *       loginRedirectURL: 'https://example.com/authenticate',\n *       signupRedirectURL: 'https://example.com/authenticate',\n *     },\n *     oauthOptions: {\n *      providers: [{ type: OAuthProviders.Google }, { type: OAuthProviders.Microsoft }],\n *    },\n *   }}\n *   passwordResetToken=\"PvC5UudZ7TPZbELt95yXAQ-8MeEUCRob8bUQ-g52fIJs\"\n *   styles={{\n *     fontFamily: '\"Helvetica New\", Helvetica, sans-serif',\n *     primaryColor: '#0577CA',\n *     width: '321px',\n *   }}\n *   callbacks={{\n *     onEvent: (event) => console.log(event)\n *   }}\n * />\n */\nexport const StytchPasswordReset = <\n  TProjectConfiguration extends StytchProjectConfigurationInput = Stytch.DefaultProjectConfiguration,\n>({\n  config,\n  styles,\n  callbacks,\n  strings,\n  passwordResetToken,\n}: StytchResetPasswordProps<TProjectConfiguration>) => {\n  invariant(useIsMounted__INTERNAL(), noProviderError('<StytchResetPassword />'));\n  const stytchClient = useStytch<TProjectConfiguration>();\n  const containerEl = useRef<HTMLDivElement>(null);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!isUIClient(stytchClient)) {\n      throw Error(noHeadlessClientError);\n    }\n\n    if (!containerEl.current) {\n      return;\n    }\n\n    if (!containerEl.current.id) {\n      const randId = Math.floor(Math.random() * 1e6);\n      containerEl.current.id = `stytch-reset-password-${randId}`;\n    }\n\n    if (passwordResetToken) {\n      stytchClient.mountResetPassword({\n        config,\n        callbacks,\n        elementId: `#${containerEl.current.id}`,\n        styles,\n        strings,\n        passwordResetToken,\n      });\n    }\n  }, [stytchClient, config, styles, callbacks, strings, passwordResetToken]);\n\n  return <div ref={containerEl} />;\n};\n\n/**\n * The Stytch Passkey Registration component.\n * This component can only be used with a Stytch UI Client\n * passed into the StytchProvider.\n *\n * See the {@link https://stytch.com/docs/sdks online reference}\n *\n * @example\n * const styles = {\n *     container: {\n *       backgroundColor: '#e11e1e',\n *     },\n *     colors: {\n *       primary: '#ff00f7',\n *       secondary: '#5C727D',\n *     },\n *    }\n *\n * <StytchPasskeyRegistration\n *   styles={styles}\n *   callbacks={{\n *     onEvent: (event) => console.log(event)\n *   }}\n * />\n */\nexport const StytchPasskeyRegistration = <\n  TProjectConfiguration extends StytchProjectConfigurationInput = Stytch.DefaultProjectConfiguration,\n>({\n  config,\n  styles,\n  callbacks,\n  strings,\n}: StytchProps<TProjectConfiguration>) => {\n  invariant(useIsMounted__INTERNAL(), noProviderError('<StytchPasskeyRegistration />'));\n  const stytchClient = useStytch<TProjectConfiguration>();\n  const user = useStytchUser();\n  const containerEl = useRef<HTMLDivElement>(null);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!isUIClient(stytchClient)) {\n      throw Error(noHeadlessClientError);\n    }\n\n    if (!containerEl.current) {\n      return;\n    }\n\n    if (!containerEl.current.id) {\n      const randId = Math.floor(Math.random() * 1e6);\n      containerEl.current.id = `stytch-passkey-registration-${randId}`;\n    }\n\n    stytchClient.mountPasskeyRegistration({\n      config,\n      callbacks,\n      elementId: `#${containerEl.current.id}`,\n      styles,\n      strings,\n    });\n  }, [stytchClient, config, styles, callbacks, strings, user]);\n\n  return <div ref={containerEl} />;\n};\n\n/**\n * The Stytch IDP component.\n * Parses OAuth Authorization params (client_id, scope, nonce, etc.) out of the page URL.\n * Requires the user to be logged in.\n * This component can only be used with a Stytch UI Client\n * passed into the StytchProvider.\n *\n * See the {@link https://stytch.com/docs/sdks online reference}\n *\n * @example\n * const styles = {\n *   container: {\n *     backgroundColor: '#e11e1e',\n *   },\n *   colors: {\n *     primary: '#ff00f7',\n *     secondary: '#5C727D',\n *   },\n * }\n *\n * <IdentityProvider\n *   styles={styles}\n *   callbacks={{\n *     onEvent: (event) => console.log(event)\n *   }}\n * />\n */\nexport const IdentityProvider = ({\n  styles,\n  callbacks,\n  strings,\n  getIDPConsentManifest,\n  authTokenParams,\n}: IdentityProviderProps) => {\n  invariant(useIsMounted__INTERNAL(), noProviderError('<IdentityProvider />'));\n  const stytchClient = useStytch();\n  const user = useStytchUser();\n  const containerEl = useRef<HTMLDivElement>(null);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!isUIClient(stytchClient)) {\n      throw Error(noHeadlessClientError);\n    }\n\n    if (!containerEl.current) {\n      return;\n    }\n\n    if (!containerEl.current.id) {\n      const randId = Math.floor(Math.random() * 1e6);\n      containerEl.current.id = `stytch-idp-${randId}`;\n    }\n\n    stytchClient.mountIdentityProvider({\n      callbacks,\n      elementId: `#${containerEl.current.id}`,\n      styles,\n      strings,\n      getIDPConsentManifest,\n      authTokenParams,\n    });\n  }, [stytchClient, styles, callbacks, user, strings, getIDPConsentManifest, authTokenParams]);\n\n  return <div ref={containerEl} />;\n};\n","import React, { ComponentType, ReactNode } from 'react';\n\nimport type { StytchProjectConfigurationInput, StytchUIClient } from '@stytch/vanilla-js';\nimport type { Session, StytchHeadlessClient, User } from '@stytch/vanilla-js/headless';\n\nexport { useStytch, withStytch } from '@stytch/internal-react-shared';\n\nimport {\n  StytchProvider as StytchProviderShared,\n  useStytchSession as useStytchSessionShared,\n  useStytchUser as useStytchUserShared,\n  withStytchSession as withStytchSessionShared,\n  withStytchUser as withStytchUserShared,\n  useStytchIsAuthorized as useStytchIsAuthorizedShared,\n  withStytchPermissions as withStytchPermissionsShared,\n} from '@stytch/internal-react-shared';\n\n/**\n * Returns the active User.\n * The Stytch SDKs are used for client-side authentication and session management.\n * Check the isInitialized property to determine if the SDK has completed initialization.\n * Check the fromCache property to determine if the user data is from persistent storage.\n * @example\n * const {user, isInitialized, fromCache} = useStytchUser();\n * if (!isInitialized) {\n *     return <p>Loading...</p>;\n * }\n * return (<h1>Welcome, {user.name.first_name}</h1>);\n */\nexport const useStytchUser = useStytchUserShared as <TAssumeHydrated extends boolean = true>() => ReturnType<\n  typeof useStytchUserShared<TAssumeHydrated>\n>;\n\n/**\n * Returns the active user's Stytch session.\n * The Stytch SDKs are used for client-side authentication and session management.\n * Check the isInitialized property to determine if the SDK has completed initialization.\n * Check the fromCache property to determine if the session data is from persistent storage.\n * @example\n * const {session, isInitialized, fromCache} = useStytchSession();\n * useEffect(() => {\n *   if (!isInitialized) {\n *     return;\n *   }\n *   if (!session) {\n *     router.replace('/login')\n *   }\n * }, [session, isInitialized]);\n */\nexport const useStytchSession = useStytchSessionShared as <TAssumeHydrated extends boolean = true>() => ReturnType<\n  typeof useStytchSessionShared<TAssumeHydrated>\n>;\n\nexport const withStytchUser = withStytchUserShared as <T extends object, TAssumeHydrated extends boolean = true>(\n  Component: ComponentType<\n    T & { stytchUser: User | null; stytchUserIsInitialized: boolean; stytchUserIsFromCache: boolean }\n  >,\n) => ReturnType<typeof withStytchUserShared<T, TAssumeHydrated>>;\n\nexport const withStytchSession = withStytchSessionShared as <T extends object, TAssumeHydrated extends boolean = true>(\n  Component: ComponentType<\n    T & { stytchSession: Session | null; stytchSessionIsInitialized: boolean; stytchSessionIsFromCache: boolean }\n  >,\n) => ReturnType<typeof withStytchSessionShared<T, TAssumeHydrated>>;\n\nexport const useStytchIsAuthorized = useStytchIsAuthorizedShared as <TAssumeHydrated extends boolean = true>(\n  resourceId: string,\n  action: string,\n) => ReturnType<typeof useStytchIsAuthorizedShared<TAssumeHydrated>>;\n\nexport const withStytchPermissions = withStytchPermissionsShared as <\n  Permissions extends Record<string, string>,\n  T extends object,\n>(\n  Component: ComponentType<T & { stytchPermissions: Record<string, Record<string, boolean>> }>,\n) => ReturnType<typeof withStytchPermissionsShared<Permissions, T>>;\n\n/**\n * The Stytch Client object passed in to <StytchProvider /> in your application root.\n * Either a StytchUIClient or StytchHeadlessClient.\n */\ntype StytchClient<TProjectConfiguration extends StytchProjectConfigurationInput> =\n  | StytchUIClient<TProjectConfiguration>\n  | StytchHeadlessClient<TProjectConfiguration>;\n\nexport interface StytchProviderProps<\n  TProjectConfiguration extends StytchProjectConfigurationInput = Stytch.DefaultProjectConfiguration,\n> {\n  /**\n   * A Stytch client instance, either a {@link StytchUIClient} or {@link StytchHeadlessClient}\n   */\n  stytch: StytchClient<TProjectConfiguration>;\n  /**\n   * When true, the provider will assume that the component will only be\n   * rendered in a browser environment, either in a single-page application or\n   * after completing hydration of a server-rendered application. This allows\n   * cached values to be retrieved from the browser on the first render, meaning\n   * that the `isInitialized` value returned from Stytch hooks will be `true`\n   * starting from the first render.\n   *\n   * When `false`, the provider will defer initialization until after the first\n   * render, and `isInitialized` will initially be `false`.\n   *\n   * If you encounter hydration errors relating to the use of this component,\n   * set this to `false`.\n   *\n   * This value defaults to `true` in `@stytch/react`.\n   */\n  assumeHydrated?: boolean;\n  children?: ReactNode;\n}\n\n/**\n * The Stytch Context Provider.\n * Wrap your application with this component in order to use Stytch everywhere in your app.\n * @example\n * const stytch = createStytchHeadlessClient('public-token-<find yours in the stytch dashboard>')\n *\n * ReactDOM.render(\n *   <StytchProvider stytch={stytch}>\n *     <App />\n *   </StytchProvider>,\n *   document.getElementById('root'),\n * )\n */\nexport const StytchProvider = <\n  TProjectConfiguration extends StytchProjectConfigurationInput = Stytch.DefaultProjectConfiguration,\n>({\n  stytch,\n  children,\n  assumeHydrated = true,\n}: StytchProviderProps<TProjectConfiguration>): JSX.Element => {\n  return (\n    <StytchProviderShared stytch={stytch} assumeHydrated={assumeHydrated}>\n      {children}\n    </StytchProviderShared>\n  );\n};\n"],"names":["useStytchUser","useStytchSession","withStytchUser","withStytchSession","useStytchIsAuthorized","withStytchPermissions","StytchProvider","useStytchUserShared","useStytchSessionShared","withStytchUserShared","withStytchSessionShared","useStytchIsAuthorizedShared","withStytchPermissionsShared","StytchProviderShared"],"mappings":"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"}
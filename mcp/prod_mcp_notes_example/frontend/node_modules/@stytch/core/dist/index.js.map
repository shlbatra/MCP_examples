{"version":3,"file":"index.js","sources":["../src/constants.ts","../src/NetworkClient.ts","../../../node_modules/uuid/dist/esm-browser/rng.js","../../../node_modules/uuid/dist/esm-browser/regex.js","../../../node_modules/uuid/dist/esm-browser/validate.js","../../../node_modules/uuid/dist/esm-browser/stringify.js","../../../node_modules/uuid/dist/esm-browser/v4.js","../src/utils/loadESModule.ts","../src/utils/getHttpsUrl.ts","../src/utils/logger.ts","../src/utils/api.ts","../src/utils/checks.ts","../src/utils/country.ts","../src/utils/dfp.ts","../src/utils/arrayUtils.ts","../src/utils/index.ts","../src/DFPProtectedAuthProvider.ts","../src/ErrorMarshaller.ts","../src/EventLogger.ts","../src/Events.ts","../src/HeadlessClients/HeadlessUserClient.ts","../src/HeadlessClients/HeadlessSessionClient.ts","../src/HeadlessClients/HeadlessMagicLinkClient.ts","../src/HeadlessClients/HeadlessOTPClient.ts","../src/HeadlessClients/HeadlessOAuthClient.ts","../src/HeadlessClients/HeadlessCryptoWalletClient.ts","../src/HeadlessClients/HeadlessTOTPClient.ts","../../../node_modules/@github/webauthn-json/dist/esm/webauthn-json.js","../src/HeadlessClients/HeadlessWebAuthnClient.ts","../src/HeadlessClients/HeadlessPasswordClient.ts","../src/HeadlessClients/HeadlessImpersonationClient.ts","../src/rbac.ts","../src/HeadlessClients/HeadlessRBACClient.ts","../src/HeadlessClients/HeadlessIDPClient.ts","../src/HeadlessClients/b2b/HeadlessB2BMagicLinkClient.ts","../src/HeadlessClients/b2b/HeadlessB2BSelfClient.ts","../src/HeadlessClients/b2b/HeadlessB2BSSOClient.ts","../src/HeadlessClients/b2b/HeadlessB2BSCIMClient.ts","../src/HeadlessClients/b2b/HeadlessB2BOrganizationClient.ts","../src/HeadlessClients/b2b/HeadlessB2BOAuthClient.ts","../src/HeadlessClients/b2b/HeadlessB2BSessionClient.ts","../src/HeadlessClients/b2b/HeadlessB2BDiscoveryClient.ts","../src/HeadlessClients/b2b/HeadlessB2BPasswordsClient.ts","../src/HeadlessClients/b2b/HeadlessB2BOTPsClient.ts","../src/HeadlessClients/b2b/HeadlessB2BTOTPsClient.ts","../src/HeadlessClients/b2b/HeadlessB2BRecoveryCodesClient.ts","../src/HeadlessClients/b2b/HeadlessB2BRBACClient.ts","../src/HeadlessClients/b2b/HeadlessB2BImpersonationClient.ts","../src/HeadlessClients/b2b/HeadlessB2BIDPClient.ts","../src/rpc/FrameClient.ts","../src/SearchManager.ts","../src/shouldTryRefresh.ts","../src/SessionManager.ts","../src/StateChangeClient.ts","../src/SubscriptionService.ts","../src/Vertical.ts","../../js-utils/src/createDeepEqual.ts"],"sourcesContent":["export const TEST_API_URL = 'https://test.stytch.com';\nexport const LIVE_API_URL = 'https://api.stytch.com';\nexport const CLIENTSIDE_SERVICES_IFRAME_URL = 'https://js.stytch.com/clientside-services/index.html';\n\nexport const STYTCH_DFP_BACKEND_URL = `https://telemetry.stytch.com`;\nexport const STYTCH_DFP_CDN_URL = `https://elements.stytch.com`;\n\nexport const STYTCH_SESSION_COOKIE = 'stytch_session';\nexport const STYTCH_SESSION_JWT_COOKIE = 'stytch_session_jwt';\nexport const POWERED_BY_STYTCH_IMG_URL = 'https://public-assets.stytch.com/et_powered_by_stytch_logo.png';\n\nexport const GOOGLE_ONE_TAP_HOST = 'https://accounts.google.com/gsi';\n\nexport const GOOGLE_ONE_TAP_SCRIPT_URL = `${GOOGLE_ONE_TAP_HOST}/client`;\n\nexport const DEFAULT_SESSION_DURATION_MINUTES = 30;\nexport const DEFAULT_OTP_EXPIRATION_MINUTES = 5;\n\nexport const MULTIPLE_STYTCH_CLIENTS_DETECTED_WARNING =\n  \"It looks like you're creating multiple copies of the Stytch client.\" +\n  ' This behavior is unsupported, and unintended side effects may occur. ' +\n  \"Make sure you are creating the Stytch client at the global level, and not inside a component's render function.\";\n","import { AnalyticsEvent } from './Events';\nimport { ResponseCommon, StytchAPIUnreachableError, StytchAPIError, StytchAPISchemaError } from './public';\n\ntype SDKRequestMethodAndBody =\n  | {\n      method: 'GET' | 'DELETE';\n      body?: null;\n    }\n  | {\n      method: 'POST' | 'PUT';\n      body?: Record<string, unknown>;\n    };\n\nexport type SDKRequestInfo = SDKRequestMethodAndBody & {\n  url: string;\n  additionalMetadata?: Record<string, string>;\n};\n\nexport interface SDKTelemetry {\n  event_id: string;\n  app_session_id: string;\n  persistent_id: string;\n  client_sent_at: string;\n  timezone: string;\n\n  // Logged in user data\n  // Why don't we generate this from the session_token in the auth header?\n  // - We don't want to tie analytics ingest to session validation. There's no need to put\n  //   that kind of pressure on API, and ingest could be moved to somewhere that doesn't\n  //   have the ability to validate tokens\n  // - For bulk event batches, we want to keep track of whether or not a user was logged\n  //   in at each event. If we have 10 events, the user logs in at event 5, then they'll have\n  //   a token when they log the batch, but we want to know that they were not logged in for the\n  //   first 4 events\n\n  // Versioning\n  app: {\n    identifier: string;\n    version?: string;\n  };\n  os?: {\n    identifier?: string;\n    version?: string;\n  };\n  device?: {\n    model?: string;\n    screen_size?: string;\n  };\n  sdk: {\n    identifier: string;\n    version: string;\n  };\n}\n\nexport type AdditionalTelemetryData =\n  | { stytch_user_id?: string; stytch_session_id?: string }\n  | { stytch_member_id?: string; stytch_member_session_id?: string };\n\nexport interface INetworkClient {\n  createTelemetryBlob(additionalMetadata?: SDKRequestInfo['additionalMetadata']): SDKTelemetry;\n\n  fetchSDK: <T extends ResponseCommon>(info: SDKRequestInfo) => Promise<T>;\n\n  retriableFetchSDK: <T extends ResponseCommon>(info: RetriableSDKRequestInfo) => Promise<T>;\n\n  logEvent<E extends AnalyticsEvent>({\n    name,\n    details,\n    error,\n  }: {\n    name: E['name'];\n    details: E['details'];\n    error?: { error_code?: string; error_description?: string; http_status_code?: string };\n  }): void;\n\n  // @deprecated Use the new sessions.updateSession() method instead\n  updateSessionToken: (sessionToken: string | null) => void;\n}\n\nexport type RetriableSDKRequestInfo = SDKRequestInfo & {\n  retryCallback: (e: RetriableError, info: SDKBaseRequestInfo) => Promise<SDKBaseRequestInfo>;\n};\n\nexport type RetriableSDKBaseRequestInfo = SDKBaseRequestInfo & {\n  retryCallback: (e: RetriableError, info: SDKBaseRequestInfo) => Promise<SDKBaseRequestInfo>;\n};\n\nexport enum RetriableErrorType {\n  RequiredCaptcha = 'CAPTCHA required',\n}\n\nexport class RetriableError extends Error {\n  type: RetriableErrorType;\n\n  constructor(type: RetriableErrorType) {\n    super(type);\n    this.type = type;\n  }\n}\n\nexport async function retriableFetchSDK<T extends ResponseCommon>({\n  method,\n  finalURL,\n  basicAuthHeader,\n  xSDKClientHeader,\n  xSDKParentHostHeader,\n  body,\n  retryCallback,\n}: RetriableSDKBaseRequestInfo): Promise<T> {\n  let req: SDKBaseRequestInfo = {\n    method,\n    finalURL,\n    basicAuthHeader,\n    xSDKClientHeader,\n    xSDKParentHostHeader,\n    body,\n  };\n\n  try {\n    return await baseFetchSDK<T>(req);\n  } catch (err) {\n    if (err instanceof RetriableError) {\n      req = await retryCallback(err, req);\n      return await baseFetchSDK<T>(req);\n    }\n    throw err;\n  }\n}\n\nexport type SDKBaseRequestInfo = {\n  basicAuthHeader: string;\n  xSDKClientHeader: string;\n  xSDKParentHostHeader?: string;\n  body: SDKRequestInfo['body'];\n  method: SDKRequestInfo['method'];\n  finalURL: string;\n};\n\nexport async function baseFetchSDK<T extends ResponseCommon>({\n  method,\n  finalURL,\n  basicAuthHeader,\n  xSDKClientHeader,\n  xSDKParentHostHeader,\n  body,\n}: SDKBaseRequestInfo): Promise<T> {\n  const headers: Record<string, string> = {\n    Authorization: basicAuthHeader,\n    'Content-Type': 'application/json',\n    'X-SDK-Client': xSDKClientHeader,\n  };\n\n  if (xSDKParentHostHeader) {\n    headers['X-SDK-Parent-Host'] = xSDKParentHostHeader;\n  }\n\n  const fetchOpts: RequestInit = {\n    method,\n    headers,\n    body: body && JSON.stringify(body),\n    credentials: 'include',\n  };\n\n  let resp;\n  try {\n    resp = await fetch(finalURL, fetchOpts);\n    /* eslint-disable  @typescript-eslint/no-explicit-any */\n  } catch (e: any) {\n    if (e.message === 'Failed to fetch') {\n      throw new StytchAPIUnreachableError('Unable to contact our servers.');\n    }\n    throw e;\n  }\n\n  // We only return 200 from WB endpoints, but just in case let's accept all 2xx errors\n  if (resp.status <= 299) {\n    try {\n      const respData = await resp.json();\n      return respData.data;\n    } catch {\n      throw new StytchAPIUnreachableError('Invalid JSON response from our servers.');\n    }\n  }\n\n  // 99% of errors will be well-formed JSON errors with an appropriate content-type set\n  if (resp.status !== 200 && resp.headers.get('content-type')?.includes('application/json')) {\n    let respError;\n    try {\n      respError = await resp.json();\n    } catch {\n      // Error was not JSON- but the content type said it was! This means the server lied to us, which it should never do...\n      throw new StytchAPIUnreachableError('Invalid or no response from server');\n    }\n    // If this looks like a JSONSchema validation error, it probably means the caller isn't using\n    // typescript and gave us a bad type.\n    if ('body' in respError || 'params' in respError || 'query' in respError) {\n      throw new StytchAPISchemaError(respError);\n    }\n    throw new StytchAPIError(respError);\n  }\n\n  // Finally handle the other 1% of errors (Captcha errors, network errors, 503s, etc.)\n  let respData;\n  try {\n    respData = await resp.text();\n  } catch {\n    throw new StytchAPIUnreachableError('Invalid response from our servers.');\n  }\n  if (respData.includes('Captcha required')) {\n    throw new RetriableError(RetriableErrorType.RequiredCaptcha);\n  }\n  throw new StytchAPIUnreachableError('Invalid response from our servers.');\n}\n\nexport async function baseSubmitFormSDK({\n  method,\n  finalURL,\n  basicAuthHeader,\n  xSDKClientHeader,\n  xSDKParentHostHeader,\n  body,\n}: SDKBaseRequestInfo): Promise<void> {\n  const bodyParams = (body || {}) as Record<string, string>;\n  const finalBody: Record<string, string> = {\n    ...bodyParams,\n    __Authorization: basicAuthHeader,\n    '__X-SDK-Client': xSDKClientHeader,\n  };\n\n  if (xSDKParentHostHeader) {\n    finalBody['__X-SDK-Parent-Host'] = xSDKParentHostHeader;\n  }\n\n  const children: HTMLInputElement[] = Object.entries(finalBody).map(([key, value]) => {\n    const input = document.createElement('input');\n    input.type = 'hidden';\n    input.name = key;\n    input.value = value;\n    return input;\n  });\n\n  const form = document.createElement('form');\n  form.method = method;\n  form.action = finalURL;\n  form.append(...children);\n\n  document.body.appendChild(form);\n  form.submit();\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","const ModulePromiseCache: Record<string, Promise<unknown>> = {};\n\nexport const __clearcache = () => Object.keys(ModulePromiseCache).forEach((key) => delete ModulePromiseCache[key]);\n\nexport async function loadESModule<T>(url: string, moduleFromGlobalScope: () => T): Promise<T> {\n  if (ModulePromiseCache[url] !== undefined) {\n    return ModulePromiseCache[url] as Promise<T>;\n  }\n\n  ModulePromiseCache[url] = loadESModuleFromNetwork(url, moduleFromGlobalScope);\n  return ModulePromiseCache[url] as Promise<T>;\n}\n\nfunction loadESModuleFromNetwork<T>(url: string, moduleFromGlobalScope: () => T): Promise<T> {\n  return new Promise((resolve, reject) => {\n    const maybeScript = findScript(url);\n    if (maybeScript && maybeScript.dataset.loaded === 'true') {\n      try {\n        resolve(moduleFromGlobalScope());\n      } catch (err) {\n        return reject(new Error(`${url} already loaded, but module was not found in global scope: ${err}`));\n      }\n    }\n\n    const script = createScript(url);\n\n    script.addEventListener('load', () => {\n      script.dataset.loaded = 'true';\n      try {\n        resolve(moduleFromGlobalScope());\n      } catch (err) {\n        reject(new Error(`${url} was loaded, but module was not found in global scope: ${err}`));\n      }\n    });\n\n    script.addEventListener('error', (err) => {\n      reject(new Error(`${url} could not be loaded: ${err}`));\n    });\n  });\n}\n\nconst findScriptsInDom = (url: string) => document.querySelectorAll<HTMLScriptElement>(`script[src=\"${url}\"]`);\n\nfunction findScript(url: string): HTMLScriptElement | undefined {\n  const scripts = findScriptsInDom(url);\n  if (scripts[0]) {\n    return scripts[0];\n  }\n}\n\nfunction createScript(url: string): HTMLScriptElement {\n  const script = document.createElement('script');\n  script.setAttribute('src', url);\n  script.setAttribute('async', 'true');\n  script.setAttribute('defer', 'true');\n  document.head.appendChild(script);\n  return script;\n}\n","export const getHttpsUrl = (urlOrDomain: string) => {\n  // If it's already a valid URL, extract the domain\n  try {\n    const url = new URL(urlOrDomain);\n    return `https://${url.hostname}`;\n  } catch {\n    // invalid URLs are OK\n  }\n\n  // Prepend a scheme and verify it's a valid URL\n  try {\n    const url = new URL(`https://${urlOrDomain}`);\n    return `https://${url.hostname}`;\n  } catch {\n    // Invalid URL, fallback to undefined\n  }\n\n  // Input was neither a valid URL nor a valid domain\n  return undefined;\n};\n","/**\n * A set of tokens to stylize the console.log output\n * First token is the raw text. %c is a placeholder for string formatting\n * Second token starts our stylizing - adding custom color and background\n * Third token resets stylizing to baseline before showing the rest of the content.\n */\nconst STYTCH_BADGE =\n  process.env.NODE_ENV === 'production'\n    ? ['[Stytch]']\n    : ['%c[Stytch]%c', 'background: #19303d; color: #13E5C0; padding: 2px;border-radius: 4px', ''];\n\n// Turn this to true to enable debug logs\n// TODO: Make this an env var\nconst DEBUG = false;\n\n/* eslint-disable no-console */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * An ultralightweight wrapper around console.log.\n * In the future, the logger might be passed in from the customer,\n * or the level might be configurable.\n */\nexport const logger = {\n  debug: (...args: any[]) => DEBUG && console.log(...STYTCH_BADGE, ...args),\n  log: (...args: any[]) => console.log(...STYTCH_BADGE, ...args),\n  warn: (...args: any[]) => console.warn(...STYTCH_BADGE, ...args),\n  error: (...args: any[]) => console.error(...STYTCH_BADGE, ...args),\n};\n\n/* eslint-enable @typescript-eslint/no-explicit-any */\n/* eslint-enable no-console */\n","import { LIVE_API_URL, TEST_API_URL } from '../constants';\nimport { InternalStytchClientOptions } from '../types';\nimport { getHttpsUrl } from './getHttpsUrl';\nimport { logger } from './logger';\n\nexport const getLiveApiURL = (opts: InternalStytchClientOptions | undefined) => {\n  const domain = opts?.customBaseUrl ?? opts?.endpointOptions?.apiDomain;\n  if (domain) {\n    const httpsUrl = getHttpsUrl(domain);\n    if (httpsUrl) {\n      return httpsUrl;\n    } else {\n      const key = opts?.customBaseUrl ? 'customBaseUrl' : 'apiDomain';\n      logger.warn(`Unable to use custom API domain \\`${domain}\\`. ${key} should be a valid domain.`);\n    }\n  }\n\n  return opts?.endpoints?.liveAPIURL ?? LIVE_API_URL;\n};\n\nexport const getTestApiURL = (opts: InternalStytchClientOptions | undefined) => {\n  const domain = opts?.customBaseUrl ?? opts?.endpointOptions?.testApiDomain;\n  if (domain) {\n    const httpsUrl = getHttpsUrl(domain);\n    if (httpsUrl) {\n      return httpsUrl;\n    } else {\n      const key = opts?.customBaseUrl ? 'customBaseUrl' : 'testApiDomain';\n      logger.warn(`Unable to use custom API domain \\`${domain}\\`. ${key} should be a valid domain.`);\n    }\n  }\n\n  return opts?.endpoints?.testAPIURL ?? TEST_API_URL;\n};\n","import { logger } from './logger';\n\nconst trailer = `\nYou can find your public token at https://stytch.com/dashboard/api-keys.`;\nexport const checkPublicToken = (publicToken: unknown) => {\n  if (typeof publicToken !== 'string') {\n    logger.warn(`Public token is malformed. Expected a string, got ${typeof publicToken}.${trailer}`);\n  } else if (publicToken === '') {\n    logger.warn(`Public token is malformed. Expected \"public-token-...\", got an empty string.${trailer}`);\n  } else if (!publicToken.startsWith('public-token-')) {\n    logger.warn(`Public token is malformed. Expected \"public-token-...\", got ${publicToken}.${trailer}`);\n  }\n};\n\nexport const checkNotSSR = (clientName: 'StytchUIClient' | 'StytchHeadlessClient') => {\n  const factoryFunctionName = clientName === 'StytchUIClient' ? 'createStytchUIClient' : 'createStytchHeadlessClient';\n\n  if (typeof window === 'undefined') {\n    throw new Error(\n      `\\`new ${clientName}()\\` is not supported in server environments. If using @stytch/react or @stytch/nextjs, use \\`${factoryFunctionName}()\\` instead.`,\n    );\n  }\n};\n\nexport const checkB2BNotSSR = (clientName: 'StytchB2BUIClient' | 'StytchB2BHeadlessClient') => {\n  const factoryFunctionName =\n    clientName === 'StytchB2BUIClient' ? 'createStytchB2BUIClient' : 'createStytchB2BHeadlessClient';\n\n  if (typeof window === 'undefined') {\n    throw new Error(\n      `\\`new ${clientName}()\\` is not supported in server environments. If using @stytch/react or @stytch/nextjs, use \\`${factoryFunctionName}()\\` instead.`,\n    );\n  }\n};\n","// List of Alpha-2 country codes to display in the drop down for phone number entry in our pre-built UI components.\n//\n// This list contains all allowed country codes, in alphabetical order, with the exception of the US, which is placed first as it is\n// the default and our most common user country.\n//\n// This list was built by pulling all countries from https://www.iban.com/country-codes and then removing countries that are not on our\n// unsupported countries (https://app.launchdarkly.com/default/production/features/default-banned-countries-for-phone-validation/targeting).\n//\n// Other useful links are the IBAN Alpha-2 code list (https://www.iban.com/country-codes) and Twilio's per-country notes\n// (https://www.twilio.com/en-us/guidelines/ag/sms). Just substitute the country code in that URL!\n//\n// This list is served to any customer, regardless of whether they are on the default country allowlist (only US and Canada) or they allow\n// all countries. This means that users may be able to choose a country that is not allowed for a customer and receive an error. This should\n// be improved in the future: ODEVX-34.\n\nexport const COUNTRIES_LIST = {\n  US: '1', // United States of America\n  AX: '358', // Aland Islands\n  AS: '1684', // American Samoa\n  AG: '1268', // Antigua and Barbuda\n  AI: '1264', // Anguilla\n  AR: '54', // Argentina\n  AT: '43', // Austria\n  AU: '61', // Australia\n  BE: '32', // Belgium\n  BJ: '229', // Benin\n  BO: '591', // Bolivia\n  BR: '55', // Brazil\n  IO: '246', // British Indian Ocean Territory (the)\n  BN: '673', // Brunei Darussalam\n  BG: '359', // Bulgaria\n  BF: '226', // Burkina Faso\n  CM: '237', // Cameroon\n  CA: '1', // Canada\n  BQ: '599', // Caribbean Netherlands\n  CF: '236', // Central African Republic (the)\n  CL: '56', // Chile\n  CX: '61', // Christmas Island\n  CC: '61', // Cocos (Keeling) Islands (the)\n  CO: '57', // Colombia\n  CD: '243', // Congo (the Democratic Republic of the)\n  CK: '682', // Cook Islands (the)\n  CR: '506', // Costa Rica\n  HR: '385', // Croatia\n  CZ: '420', // Czechia\n  DK: '45', // Denmark\n  DO: '1829', // Dominican Republic (the)\n  EC: '593', // Ecuador\n  SV: '503', // El Salvador\n  EE: '372', // Estonia\n  SZ: '268', // Eswatini\n  FK: '500', // Falkland Islands (the) [Malvinas]\n  FI: '358', // Finland\n  FR: '33', // France\n  GF: '594', // French Guiana\n  DE: '49', // Germany\n  GH: '233', // Ghana\n  GR: '30', // Greece\n  GD: '1473', // Grenada\n  GT: '502', // Guatemala\n  GG: '44', // Guernsey\n  GW: '245', // Guinea-Bissau\n  GY: '592', // Guyana\n  HU: '36', // Hungary\n  IS: '354', // Iceland\n  IN: '91', // India\n  IE: '353', // Ireland\n  IM: '44', // Isle of Man\n  IT: '39', // Italy\n  JM: '1876', // Jamaica\n  JP: '81', // Japan\n  KZ: '7', // Kazakhstan\n  KE: '254', // Kenya\n  KI: '686', // Kiribati\n  KR: '82', // Korea (the Republic of)\n  LV: '371', // Latvia\n  LT: '370', // Lithuania\n  LU: '352', // Luxembourg\n  MO: '853', // Macao\n  MT: '356', // Malta\n  MH: '692', // Marshall Islands (the)\n  MR: '222', // Mauritania\n  MU: '230', // Mauritius\n  YT: '262', // Mayotte\n  MX: '52', // Mexico\n  MC: '377', // Monaco\n  ME: '382', // Montenegro\n  NR: '674', // Nauru\n  NL: '31', // Netherlands (the)\n  NZ: '64', // New Zealand\n  NI: '505', // Nicaragua\n  NF: '672', // Norfolk Island\n  NO: '47', // Norway\n  PA: '507', // Panama\n  PY: '595', // Paraguay\n  PE: '51', // Peru\n  PN: '870', // Pitcairn\n  PL: '48', // Poland\n  PT: '351', // Portugal\n  PR: '1', // Puerto Rico\n  RO: '40', // Romania\n  BL: '590', // Saint BarthÃ©lemy\n  SH: '290', // Saint Helena, Ascension and Tristan da Cunha\n  KN: '1869', // Saint Kitts and Nevis\n  LC: '1758', // Saint Lucia\n  MF: '590', // Saint Martin (French part)\n  PM: '508', // Saint Pierre and Miquelon\n  SM: '378', // San Marino\n  ST: '239', // Sao Tome and Principe\n  SC: '248', // Seychelles\n  SX: '599', // Sint Maarten (Dutch part)\n  SK: '421', // Slovakia\n  SI: '386', // Slovenia\n  ZA: '27', // South Africa\n  SS: '211', // South Sudan\n  ES: '34', // Spain\n  SR: '597', // Suriname\n  SJ: '47', // Svalbard and Jan Mayen\n  SE: '46', // Sweden\n  CH: '41', // Switzerland\n  TW: '886', // Taiwan\n  TZ: '255', // Tanzania, United Republic of\n  TK: '690', // Tokelau\n  TO: '676', // Tonga\n  TT: '1868', // Trinidad and Tobago\n  TR: '90', // Turkey\n  UA: '380', // Ukraine\n  GB: '44', // United Kingdom of Great Britain and Northern Ireland (the)\n  UM: '1', // United States Minor Outlying Islands (the)\n  UY: '598', // Uruguay\n  VA: '379', // Vatican\n  EH: '212', // Western Sahara\n} as const;\n\nexport type CountryCode = keyof typeof COUNTRIES_LIST;\n","import { STYTCH_DFP_BACKEND_URL, STYTCH_DFP_CDN_URL } from '../constants';\nimport { InternalStytchClientOptions } from '../types';\nimport { getHttpsUrl } from './getHttpsUrl';\nimport { logger } from './logger';\n\nexport const getDFPBackendURL = (opts: InternalStytchClientOptions | undefined) => {\n  const domain = opts?.dfppaUrl ?? opts?.endpointOptions?.dfppaDomain;\n  if (domain) {\n    const httpsUrl = getHttpsUrl(domain);\n    if (httpsUrl) {\n      return httpsUrl;\n    } else {\n      const key = opts?.dfppaUrl ? 'dfppaUrl' : 'dfppaDomain';\n      logger.warn(`Unable to use custom DFPPA domain \\`${domain}\\`. ${key} should be a valid domain.`);\n    }\n  }\n\n  return opts?.endpoints?.dfpBackendURL ?? STYTCH_DFP_BACKEND_URL;\n};\n\nexport const getDFPCdnURL = (opts: InternalStytchClientOptions | undefined) => {\n  const domain = opts?.dfpCdnUrl ?? opts?.endpointOptions?.dfpCdnDomain;\n  if (domain) {\n    const httpsUrl = getHttpsUrl(domain);\n    if (httpsUrl) {\n      return httpsUrl;\n    } else {\n      const key = opts?.dfpCdnUrl ? 'dfpCdnUrl' : 'dfpCdnDomain';\n      logger.warn(`Unable to use custom DFP CDN domain \\`${domain}\\`. ${key} should be a valid domain.`);\n    }\n  }\n\n  return STYTCH_DFP_CDN_URL;\n};\n","/**\n * Moves the first item that matches the predicate to the front of the array.\n * Returns a tuple of [reorderedArray, foundMatch] where foundMatch indicates\n * whether a matching item was found and moved.\n *\n * Note: Returns false if the array has only one item, but does return true even if the\n * item is found at index 0. This is behavior matches user expectation that you can't\n * really reorder an array of length 1.\n */\nfunction moveToFront<T>(array: T[], predicate: (item: T) => boolean): [reorderedArray: T[], foundMatch: boolean] {\n  // If the array has only one item, it can't be moved so we return false\n  if (array.length <= 1) {\n    return [array, false];\n  }\n\n  const matchingIndex = array.findIndex(predicate);\n  if (matchingIndex === -1) {\n    return [array, false];\n  }\n\n  const reordered = [...array];\n  reordered.unshift(...reordered.splice(matchingIndex, 1));\n  return [reordered, true];\n}\n\n// TODO: This weird structure is because export * seems to produce a type structure\n//       that consuming packages downstream had issues with. Not entirely sure why,\n//       I assume it's a TS bug that will be solved in the future?\nexport const arrayUtils = {\n  moveToFront,\n};\n","import { v4 as uuidv4 } from 'uuid';\n\nimport { OTPMethods, ResponseCommon, User, StytchSDKUsageError } from '../public';\n\nexport type { Cacheable } from './Cacheable';\nexport type { EnumOrStringLiteral, StringLiteralFromEnum } from './EnumOrStringLiteral';\nexport { loadESModule } from './loadESModule';\nexport * from './api';\nexport * from './checks';\nexport * from './country';\nexport * from './dfp';\nexport * from './logger';\n\nexport { arrayUtils } from './arrayUtils';\n\nexport const isTestPublicToken = (token: string) => token.includes('public-token-test');\n\n/**\n * Normalizes an es5 promise with a .then(onSuccess, onFailure) signature to\n * the es6 .then().catch() signature\n */\nexport const normalizePromiseLike = <T>(prom: PromiseLike<T>): Promise<T> => {\n  return new Promise<T>((resolve, reject) => {\n    prom.then(resolve, reject);\n  });\n};\n\nexport const createEventId = () => `event-id-${uuidv4()}`;\nexport const createAppSessionId = () => `app-session-id-${uuidv4()}`;\nexport const createPersistentId = () => `persistent-id-${uuidv4()}`;\n\nexport const validate = (methodName: string) => {\n  const validator = {\n    isObject: (fieldName: string, value: object) => {\n      const isObject = typeof value === 'object' && !Array.isArray(value) && value !== null;\n      if (!isObject) {\n        throw new StytchSDKUsageError(methodName, fieldName + ' must be an object.');\n      }\n      return validator;\n    },\n    isOptionalObject: (fieldName: string, value: object | undefined) => {\n      if (typeof value === 'undefined') {\n        return validator;\n      }\n      return validator.isObject(fieldName, value);\n    },\n    isString: (fieldName: string, value: string) => {\n      if (typeof value !== 'string') {\n        throw new StytchSDKUsageError(methodName, fieldName + ' must be a string.');\n      }\n      return validator;\n    },\n    isOptionalString: (fieldName: string, value: string | undefined) => {\n      if (typeof value === 'undefined') {\n        return validator;\n      }\n      return validator.isString(fieldName, value);\n    },\n    isStringArray: (fieldName: string, value: string[]) => {\n      if (!Array.isArray(value)) {\n        throw new StytchSDKUsageError(methodName, fieldName + ' must be an array of strings.');\n      }\n      for (const str of value) {\n        if (typeof str !== 'string') {\n          throw new StytchSDKUsageError(methodName, fieldName + ' must be an array of strings.');\n        }\n      }\n      return validator;\n    },\n    isOptionalStringArray: (fieldName: string, value: string[] | undefined) => {\n      if (typeof value === 'undefined') {\n        return validator;\n      }\n      return validator.isStringArray(fieldName, value);\n    },\n    isNumber: (fieldName: string, value: number) => {\n      if (typeof value !== 'number') {\n        throw new StytchSDKUsageError(methodName, fieldName + ' must be a number.');\n      }\n      return validator;\n    },\n    isOptionalNumber: (fieldName: string, value: number | undefined) => {\n      if (typeof value === 'undefined') {\n        return validator;\n      }\n      return validator.isNumber(fieldName, value);\n    },\n    isBoolean: (fieldName: string, value: boolean) => {\n      if (typeof value !== 'boolean') {\n        throw new StytchSDKUsageError(methodName, fieldName + ' must be a boolean.');\n      }\n      return validator;\n    },\n    isOptionalBoolean: (fieldName: string, value: boolean | undefined) => {\n      if (typeof value === 'undefined') {\n        return validator;\n      }\n      return validator.isBoolean(fieldName, value);\n    },\n  };\n\n  return validator;\n};\n\nexport const isPhoneMethod = (selectionMethod: string) =>\n  selectionMethod === OTPMethods.SMS || selectionMethod === OTPMethods.WhatsApp;\nexport const isEmailMethod = (selectionMethod: string) => selectionMethod === OTPMethods.Email;\n\nexport const removeResponseCommon = <T extends ResponseCommon>({\n  request_id,\n\n  status_code,\n  ...rest\n}: T): Omit<T, keyof ResponseCommon> => rest;\n\nexport type WithUser<T> = T & { __user: User & ResponseCommon };\n\nexport const omitUser = <T extends ResponseCommon>(resp: T & { __user: User }): T => {\n  const { __user, ...rest } = resp;\n  return rest as unknown as T;\n};\n","import { RetriableError, RetriableErrorType, SDKBaseRequestInfo } from './NetworkClient';\nimport { BootstrapData } from './types';\nimport { loadESModule } from './utils';\n\ndeclare global {\n  // The telemetry.js script will set a global function called GetTelemetryID on the window\n  // object. This interface is allows us to call that function while pleasing the TypeScript\n  // compiler.\n  interface Window {\n    GetTelemetryID: (publicToken: string, submitURL: string) => Promise<string>;\n  }\n}\n\nconst loadTelemetryJS = (domain: string) => loadESModule(`${domain}/telemetry.js`, () => window.GetTelemetryID);\n\nexport type DFPProtectedAuthMode = 'OBSERVATION' | 'DECISIONING';\n\nexport type DFPProtectedAuthState = {\n  publicToken: string;\n  dfpBackendURL: string;\n  mode?: DFPProtectedAuthMode;\n  enabled: boolean;\n  loaded: boolean;\n  executeRecaptcha: () => Promise<string | undefined>;\n};\n\nexport class DFPProtectedAuthProvider {\n  private state: Promise<DFPProtectedAuthState>;\n  constructor(\n    publicToken: string,\n    dfpBackendURL: string,\n    dfpCdnDomain: string,\n    private bootstrapPromise: Promise<BootstrapData>,\n    executeRecaptcha: () => Promise<string | undefined> = () => Promise.resolve(undefined),\n  ) {\n    this.state = bootstrapPromise.then(async (bootstrapData) => {\n      if (!bootstrapData.runDFPProtectedAuth) {\n        return { publicToken, dfpBackendURL, enabled: false, loaded: false, executeRecaptcha };\n      }\n      await loadTelemetryJS(dfpCdnDomain);\n      return {\n        publicToken,\n        dfpBackendURL,\n        enabled: true,\n        mode: bootstrapData.dfpProtectedAuthMode || 'OBSERVATION',\n        loaded: true,\n        executeRecaptcha,\n      };\n    });\n  }\n\n  isEnabled = async (): Promise<boolean> => {\n    return this.state.then((state) => state.enabled);\n  };\n\n  getTelemetryID = async (): Promise<string | undefined> => {\n    const { publicToken, enabled, dfpBackendURL } = await this.state;\n    if (!enabled) {\n      return undefined;\n    }\n    return await window.GetTelemetryID(publicToken, `${dfpBackendURL}/submit`);\n  };\n\n  getDFPTelemetryIDAndCaptcha = async (): Promise<{ dfp_telemetry_id?: string; captcha_token?: string }> => {\n    const { enabled, executeRecaptcha, mode } = await this.state;\n\n    let dfp_telemetry_id: string | undefined = undefined;\n    let captcha_token: string | undefined = undefined;\n    if (!enabled) {\n      captcha_token = await executeRecaptcha();\n    }\n    if (mode === 'DECISIONING') {\n      dfp_telemetry_id = await this.getTelemetryID();\n    } else if (mode === 'OBSERVATION') {\n      dfp_telemetry_id = await this.getTelemetryID();\n      captcha_token = await executeRecaptcha();\n    }\n    return { dfp_telemetry_id, captcha_token };\n  };\n\n  retryWithCaptchaAndDFP = async (e: RetriableError, req: SDKBaseRequestInfo): Promise<SDKBaseRequestInfo> => {\n    const { enabled, executeRecaptcha } = await this.state;\n    if (e.type === RetriableErrorType.RequiredCaptcha && enabled) {\n      if (req.body) {\n        req.body.dfp_telemetry_id = await this.getTelemetryID();\n        req.body.captcha_token = await executeRecaptcha();\n      }\n      return req;\n    }\n    throw new Error('Unable to query captcha and/or dfp telemetry ID');\n  };\n}\n\nexport const DisabledDFPProtectedAuthProvider = () => ({\n  isEnabled: async () => false,\n  getTelemetryID: async () => undefined,\n  getDFPTelemetryIDAndCaptcha: async () => ({\n    dfp_telemetry_id: undefined,\n    captcha_token: undefined,\n  }),\n  retryWithCaptchaAndDFP: async () => {\n    throw new Error('DFP protected auth is disabled');\n  },\n});\n\nexport interface IDFPProtectedAuthProvider {\n  isEnabled(): Promise<boolean>;\n  getTelemetryID(): Promise<string | undefined>;\n  retryWithCaptchaAndDFP(e: RetriableError, req: SDKBaseRequestInfo): Promise<SDKBaseRequestInfo>;\n  getDFPTelemetryIDAndCaptcha(): Promise<{ dfp_telemetry_id?: string; captcha_token?: string }>;\n}\n","import {\n  StytchAPIUnreachableError,\n  StytchAPIError,\n  StytchAPISchemaError,\n  SDKAPIUnreachableError,\n  StytchSDKSchemaError,\n  StytchSDKAPIError,\n} from './public';\n\n/**\n * Some errors are thrown from inside an iframe, but we can't serialize them\n * to the parent in Webkit. This class handles restoring marshalled errors\n * to their original form.\n * It preserves the error instance/class constructor by inspecting err.name\n * and calling `new` on the matching constructor.\n */\nexport class ErrorMarshaller {\n  static inflate<T extends new (...any: never[]) => Error>(ErrorClass: T, ErrorData: Record<string, unknown>): Error {\n    // !!HACK!!\n    // We make the assumption that if the error takes in a required property\n    // (StytchAPIError takes in an APIDetails obj...)\n    // that we can just pass in the error body itself to satisfy the constructor...\n    // And if the types don't work out, Object.assign(...) copies everything over anyway\n    // This is a brittle and weak assumption.\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    const err = new ErrorClass(ErrorData);\n    Object.assign(err, ErrorData);\n    Object.setPrototypeOf(err, ErrorClass.prototype);\n    return err as Error;\n  }\n\n  static unmarshall(error: Record<string, unknown>): Error {\n    if ('name' in error) {\n      switch (error.name) {\n        case 'SDKAPIUnreachableError':\n          return ErrorMarshaller.inflate(SDKAPIUnreachableError, error);\n        case 'StytchSDKSchemaError':\n          return ErrorMarshaller.inflate(StytchSDKSchemaError, error);\n        case 'StytchAPIUnreachableError':\n          return ErrorMarshaller.inflate(StytchAPIUnreachableError, error);\n        case 'StytchAPISchemaError':\n          return ErrorMarshaller.inflate(StytchAPISchemaError, error);\n        case 'StytchSDKAPIError':\n          return ErrorMarshaller.inflate(StytchSDKAPIError, error);\n        case 'StytchAPIError':\n          return ErrorMarshaller.inflate(StytchAPIError, error);\n        case 'TypeError':\n          return ErrorMarshaller.inflate(TypeError, error);\n        case 'SyntaxError':\n          return ErrorMarshaller.inflate(SyntaxError, error);\n        case 'ReferenceError':\n          return ErrorMarshaller.inflate(ReferenceError, error);\n        case 'RangeError':\n          return ErrorMarshaller.inflate(RangeError, error);\n        case 'EvalError':\n          return ErrorMarshaller.inflate(EvalError, error);\n        case 'URIError':\n          return ErrorMarshaller.inflate(URIError, error);\n      }\n    }\n    return ErrorMarshaller.inflate(Error, error);\n  }\n}\n","import { SDKTelemetry } from './NetworkClient';\n\nexport const DEFAULT_MAX_BATCH_SIZE = 15;\nexport const DEFAULT_INTERVAL_DURATION_MS = 800;\n\ntype EventLoggerArgs = {\n  maxBatchSize: number;\n  intervalDurationMs: number;\n  logEventURL: string;\n};\n\nexport class EventLogger {\n  private maxBatchSize: number;\n  private logEventURL: string;\n  private batch: Record<string, unknown>[];\n\n  constructor(args: EventLoggerArgs) {\n    this.maxBatchSize = args.maxBatchSize;\n    this.logEventURL = args.logEventURL;\n    // TODO: If we create more than one of these, we'll want a mechanism to clean up the intervals\n    setInterval(this.flush.bind(this), args.intervalDurationMs);\n    this.batch = [];\n  }\n\n  logEvent(telemetry: SDKTelemetry, event: Record<string, unknown>) {\n    this.batch.push({ telemetry, event });\n    if (this.batch.length >= this.maxBatchSize) {\n      this.flush();\n    }\n  }\n\n  async flush() {\n    if (!this.batch.length) {\n      return;\n    }\n    const batchToSubmit = this.batch;\n    this.batch = [];\n    try {\n      await fetch(this.logEventURL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(batchToSubmit),\n      });\n    } catch {\n      // Silently ignore fetch errors\n    }\n  }\n}\n","import { StytchLoginConfig, StytchB2BUIConfig, RNUIProductConfig, TokenType, StytchSDKError } from './public';\nimport { BootstrapData } from './types';\n\nexport enum EmailSentType {\n  LoginOrCreateEML = 'login_or_create_eml',\n  LoginOrCreateOTP = 'login_or_create_otp',\n  ResetPassword = 'reset_password',\n}\n\nexport type AnalyticsEvent =\n  | {\n      name: 'sdk_instance_instantiated';\n      details: {\n        event_callback_registered: boolean;\n        error_callback_registered: boolean;\n        success_callback_registered: boolean;\n      };\n    }\n  | {\n      name: 'b2b_sdk_instance_instantiated';\n      details: {\n        event_callback_registered: boolean;\n        error_callback_registered: boolean;\n        success_callback_registered: boolean;\n      };\n    }\n  | {\n      name: 'render_login_screen';\n      details: {\n        options: StytchLoginConfig | RNUIProductConfig;\n        bootstrap: BootstrapData;\n      };\n    }\n  | {\n      name: 'render_b2b_login_screen';\n      details: {\n        options: StytchB2BUIConfig;\n        bootstrap: BootstrapData;\n      };\n    }\n  | {\n      name: 'render_idp_screen';\n      details: {\n        bootstrap: BootstrapData;\n      };\n    }\n  | {\n      name: 'render_b2b_idp_screen';\n      details: {\n        bootstrap: BootstrapData;\n      };\n    }\n  | {\n      name: 'email_sent';\n      details: {\n        email: string;\n        type: EmailSentType;\n      };\n    }\n  | {\n      name: 'email_try_again_clicked';\n      details: {\n        email: string;\n        type: EmailSentType;\n      };\n    }\n  | {\n      name: 'start_oauth_flow';\n      details: {\n        provider_type: string;\n        custom_scopes?: string[];\n        cname_domain: string | null;\n        pkce: boolean;\n        provider_params?: Record<string, string>;\n      };\n    }\n  | {\n      name: 'deeplink_handled_success';\n      details: {\n        token_type: TokenType;\n      };\n    }\n  | {\n      name: 'deeplink_handled_failure';\n      details: {\n        error: StytchSDKError | undefined;\n      };\n    }\n  | {\n      name: 'oauth_success';\n      details: {\n        provider_type: string;\n      };\n    }\n  | {\n      name: 'oauth_failure';\n      details: {\n        error: StytchSDKError | string | undefined;\n      };\n    }\n  | {\n      name: 'ui_authentication_success';\n      details: {\n        method: 'oauth' | 'otp' | 'magicLinks' | 'passwords';\n      };\n    }\n  | {\n      name: 'render_b2b_admin_portal_sso';\n      details: Record<string, never>;\n    }\n  | {\n      name: 'render_b2b_admin_portal_org_settings';\n      details: Record<string, never>;\n    }\n  | {\n      name: 'render_b2b_admin_portal_member_management';\n      details: Record<string, never>;\n    }\n  | {\n      name: 'render_b2b_admin_portal_scim';\n      details: Record<string, never>;\n    };\n","import {\n  IHeadlessUserClient,\n  User,\n  ResponseCommon,\n  UpdateResponse,\n  UserUpdateOptions,\n  UserUpdateResponse,\n  UserOnChangeCallback,\n  ConsumerState,\n  UserInfo,\n  StytchProjectConfigurationInput,\n  UserGetConnectedAppsResponse,\n} from '../public';\nimport { INetworkClient } from '../NetworkClient';\nimport { IConsumerSubscriptionService } from '../SubscriptionService';\nimport { omitUser, removeResponseCommon, validate, WithUser } from '../utils';\n\nexport class HeadlessUserClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessUserClient\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IConsumerSubscriptionService<TProjectConfiguration>,\n  ) {}\n\n  get = async () => {\n    const resp = await this._networkClient.fetchSDK<User & ResponseCommon>({\n      url: '/users/me',\n      method: 'GET',\n    });\n    const user = removeResponseCommon(resp);\n    this._subscriptionService.updateUser(user);\n    return user;\n  };\n\n  getSync = () => {\n    return this._subscriptionService.getUser();\n  };\n\n  getInfo = (): UserInfo => ({\n    user: this.getSync(),\n    fromCache: this._subscriptionService.getFromCache(),\n  });\n\n  update = async (options: UserUpdateOptions) => {\n    validate('stytch.user.update').isOptionalObject('untrusted_metadata', options.untrusted_metadata);\n    const resp = await this._networkClient.fetchSDK<WithUser<UserUpdateResponse>>({\n      url: '/users/me',\n      body: options,\n      method: 'PUT',\n    });\n    const user = removeResponseCommon(resp.__user);\n    this._subscriptionService.updateUser(user);\n    return omitUser(resp);\n  };\n\n  deleteEmail = async (emailId: string) => {\n    const resp = await this._networkClient.fetchSDK<WithUser<UpdateResponse>>({\n      url: `/users/emails/${emailId}`,\n      method: 'DELETE',\n    });\n    const user = removeResponseCommon(resp.__user);\n    this._subscriptionService.updateUser(user);\n    return omitUser(resp);\n  };\n\n  deletePhoneNumber = async (phoneId: string) => {\n    const resp = await this._networkClient.fetchSDK<WithUser<UpdateResponse>>({\n      url: `/users/phone_numbers/${phoneId}`,\n      method: 'DELETE',\n    });\n    const user = removeResponseCommon(resp.__user);\n    this._subscriptionService.updateUser(user);\n    return omitUser(resp);\n  };\n\n  deleteTOTP = async (totpId: string) => {\n    const resp = await this._networkClient.fetchSDK<WithUser<UpdateResponse>>({\n      url: `/users/totps/${totpId}`,\n      method: 'DELETE',\n    });\n    const user = removeResponseCommon(resp.__user);\n    this._subscriptionService.updateUser(user);\n    return omitUser(resp);\n  };\n\n  deleteCryptoWallet = async (cryptoWalletId: string) => {\n    const resp = await this._networkClient.fetchSDK<WithUser<UpdateResponse>>({\n      url: `/users/crypto_wallets/${cryptoWalletId}`,\n      method: 'DELETE',\n    });\n    const user = removeResponseCommon(resp.__user);\n    this._subscriptionService.updateUser(user);\n    return omitUser(resp);\n  };\n\n  deleteOAuthRegistration = async (oauthUserRegistrationId: string) => {\n    const resp = await this._networkClient.fetchSDK<WithUser<UpdateResponse>>({\n      url: `/users/oauth/${oauthUserRegistrationId}`,\n      method: 'DELETE',\n    });\n    const user = removeResponseCommon(resp.__user);\n    this._subscriptionService.updateUser(user);\n    return omitUser(resp);\n  };\n\n  deleteWebauthnRegistration = async (webAuthnId: string) => {\n    const resp = await this._networkClient.fetchSDK<WithUser<UpdateResponse>>({\n      url: `/users/webauthn_registrations/${webAuthnId}`,\n      method: 'DELETE',\n    });\n    const user = removeResponseCommon(resp.__user);\n    this._subscriptionService.updateUser(user);\n    return omitUser(resp);\n  };\n\n  deleteBiometricRegistration = async (biometricRegistrationId: string) => {\n    const resp = await this._networkClient.fetchSDK<WithUser<UpdateResponse>>({\n      url: `/users/biometric_registrations/${biometricRegistrationId}`,\n      method: 'DELETE',\n    });\n    const user = removeResponseCommon(resp.__user);\n    this._subscriptionService.updateUser(user);\n    return omitUser(resp);\n  };\n\n  onChange = (callback: UserOnChangeCallback) => {\n    let lastVal = this._subscriptionService.getUser();\n    const listener = (state: ConsumerState | null) => {\n      if (state?.user !== lastVal) {\n        lastVal = state?.user ?? null;\n        callback(lastVal);\n      }\n    };\n    return this._subscriptionService.subscribeToState(listener);\n  };\n\n  getConnectedApps = async () => {\n    return await this._networkClient.fetchSDK<UserGetConnectedAppsResponse>({\n      url: '/users/connected_apps',\n      method: 'GET',\n    });\n  };\n\n  revokedConnectedApp = async (connectedAppId: string) => {\n    return await this._networkClient.fetchSDK<ResponseCommon>({\n      url: `/users/connected_apps/${connectedAppId}/revoke`,\n      method: 'POST',\n    });\n  };\n}\n","import {\n  IHeadlessSessionClient,\n  SessionOnChangeCallback,\n  SessionRevokeResponse,\n  SessionAuthenticateOptions,\n  SessionAuthenticateResponse,\n  SessionAccessTokenExchangeOptions,\n  SessionAccessTokenExchangeResponse,\n  SessionTokens,\n  UNRECOVERABLE_ERROR_TYPES,\n  SessionRevokeOptions,\n  ConsumerState,\n  SessionTokensUpdate,\n  SessionInfo,\n  StytchProjectConfigurationInput,\n  SessionAttestOptions,\n  SessionAttestResponse,\n} from '../public';\nimport { IConsumerSubscriptionService, INetworkClient } from '..';\nimport { ExtractOpaqueTokens, IfOpaqueTokens } from '../typeConfig';\nimport { omitUser, WithUser, validate } from '../utils';\n\nexport class HeadlessSessionClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessSessionClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IConsumerSubscriptionService<TProjectConfiguration>,\n  ) {}\n\n  getSync = () => {\n    return this._subscriptionService.getSession();\n  };\n\n  getInfo = (): SessionInfo => {\n    const session = this.getSync();\n    const fromCache = this._subscriptionService.getFromCache();\n    return { session, fromCache };\n  };\n\n  onChange = (callback: SessionOnChangeCallback) => {\n    let lastVal = this._subscriptionService.getSession();\n    const listener = (state: ConsumerState | null) => {\n      if (state?.session !== lastVal) {\n        lastVal = state?.session ?? null;\n        callback(lastVal);\n      }\n    };\n    return this._subscriptionService.subscribeToState(listener);\n  };\n\n  revoke = async (options?: SessionRevokeOptions) => {\n    /**\n     * Revoke destroys the local state if the API request is successful\n     * or if we return an unrecoverable error (user is unauthenticated)\n     * or if the developer passses in a forceClear option.\n     * If the API request returns a recoverable error (the user is offline),\n     * we do not destroy the local state to let the developer manually add retry\n     * logic to call revoke again.\n     */\n\n    try {\n      const resp = await this._networkClient.fetchSDK<SessionRevokeResponse>({\n        url: `/sessions/revoke`,\n        method: 'POST',\n      });\n\n      this._subscriptionService.destroyState();\n\n      return resp;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } catch (error: any) {\n      if (options?.forceClear) {\n        this._subscriptionService.destroyState();\n      } else if (UNRECOVERABLE_ERROR_TYPES.includes(error.error_type)) {\n        this._subscriptionService.destroyState();\n      }\n      throw error;\n    }\n  };\n\n  private _authenticate = async (\n    options?: SessionAuthenticateOptions,\n  ): Promise<SessionAuthenticateResponse<TProjectConfiguration>> => {\n    const initialSession = this._subscriptionService.getSession();\n    const isSessionStale = () => initialSession?.session_id !== this._subscriptionService.getSession()?.session_id;\n\n    try {\n      const requestBody = {\n        session_duration_minutes: options?.session_duration_minutes,\n      };\n      const resp = await this._networkClient.fetchSDK<WithUser<SessionAuthenticateResponse<TProjectConfiguration>>>({\n        url: '/sessions/authenticate',\n        body: requestBody,\n        method: 'POST',\n      });\n\n      if (isSessionStale()) {\n        // [SDK-1336] The session was updated out from under us while the\n        // request was in flight; discard the response and retry\n        return this._authenticate(options);\n      }\n\n      return omitUser(resp);\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } catch (error: any) {\n      if (isSessionStale()) {\n        // [SDK-1336] The session was updated out from under us while the\n        // request was in flight; discard the response and retry\n        return this._authenticate(options);\n      }\n\n      if (UNRECOVERABLE_ERROR_TYPES.includes(error.error_type)) {\n        this._subscriptionService.destroySession();\n      }\n      throw error;\n    }\n  };\n\n  authenticate = this._subscriptionService.withUpdateSession(this._authenticate);\n\n  exchangeAccessToken = this._subscriptionService.withUpdateSession(async (data: SessionAccessTokenExchangeOptions) => {\n    validate('stytch.session.exchangeAccessToken')\n      .isString('access_token', data.access_token)\n      .isNumber('session_duration_minutes', data.session_duration_minutes);\n    const resp = await this._networkClient.fetchSDK<\n      WithUser<SessionAccessTokenExchangeResponse<TProjectConfiguration>>\n    >({\n      url: '/sessions/exchange_access_token',\n      body: data,\n      method: 'POST',\n    });\n\n    return omitUser(resp);\n  });\n\n  getTokens() {\n    return this._subscriptionService.getTokens() as IfOpaqueTokens<\n      ExtractOpaqueTokens<TProjectConfiguration>,\n      never,\n      SessionTokens | null\n    >;\n  }\n\n  updateSession(tokens: SessionTokensUpdate): void {\n    validate('stytch.session.updateSession')\n      .isString('session_token', tokens.session_token)\n      .isOptionalString('session_jwt', tokens.session_jwt ?? undefined);\n    this._subscriptionService.updateTokens(tokens);\n  }\n\n  attest = this._subscriptionService.withUpdateSession(async (data: SessionAttestOptions) => {\n    validate('stytch.session.attest')\n      .isString('profile_id', data.profile_id)\n      .isString('token', data.token)\n      .isOptionalNumber('session_duration_minutes', data.session_duration_minutes);\n\n    return this._networkClient.fetchSDK<SessionAttestResponse<TProjectConfiguration>>({\n      url: '/sessions/attest',\n      body: data,\n      method: 'POST',\n    });\n  });\n}\n","import { IConsumerSubscriptionService } from '..';\nimport { IDFPProtectedAuthProvider } from '../DFPProtectedAuthProvider';\nimport { INetworkClient } from '../NetworkClient';\nimport { IPKCEManager } from '../PKCEManager';\nimport {\n  IHeadlessMagicLinksClient,\n  MagicLinksAuthenticateOptions,\n  MagicLinksAuthenticateResponse,\n  MagicLinksLoginOrCreateOptions,\n  MagicLinksLoginOrCreateResponse,\n  MagicLinksSendOptions,\n  MagicLinksSendResponse,\n  ResponseCommon,\n  StytchProjectConfigurationInput,\n} from '../public';\nimport { omitUser, validate, WithUser } from '../utils';\n\ntype DynamicConfig = Promise<{\n  pkceRequiredForEmailMagicLinks: boolean;\n}>;\n\nconst DefaultDynamicConfig = Promise.resolve({\n  pkceRequiredForEmailMagicLinks: false,\n});\n\nexport class HeadlessMagicLinksClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessMagicLinksClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IConsumerSubscriptionService<TProjectConfiguration>,\n    private _pkceManager: IPKCEManager,\n    private _passwordResetPKCEManager: IPKCEManager,\n    private _config: DynamicConfig = DefaultDynamicConfig,\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  private async getCodeChallenge(): Promise<string> {\n    let keyPair = await this._pkceManager.getPKPair();\n    if (keyPair) {\n      return keyPair.code_challenge;\n    }\n    keyPair = await this._pkceManager.startPKCETransaction();\n    return keyPair.code_challenge;\n  }\n\n  private async handlePKCEForAuthenticate(\n    pkceManager: IPKCEManager,\n    data: MagicLinksAuthenticateOptions & { token: string },\n  ): Promise<WithUser<MagicLinksAuthenticateResponse<TProjectConfiguration>>> {\n    const pkPair = await pkceManager.getPKPair();\n\n    const requestBody = {\n      code_verifier: pkPair?.code_verifier,\n      ...data,\n    };\n\n    const resp = await this._networkClient.fetchSDK<WithUser<MagicLinksAuthenticateResponse<TProjectConfiguration>>>({\n      url: '/magic_links/authenticate',\n      body: requestBody,\n      method: 'POST',\n    });\n\n    pkceManager.clearPKPair();\n\n    return resp;\n  }\n\n  email = {\n    loginOrCreate: async (email: string, options: MagicLinksLoginOrCreateOptions = {}): Promise<ResponseCommon> => {\n      const { pkceRequiredForEmailMagicLinks } = await this._config;\n\n      let code_challenge: string | undefined = undefined;\n      if (pkceRequiredForEmailMagicLinks) {\n        code_challenge = await this.getCodeChallenge();\n      }\n\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      const requestBody = {\n        ...options,\n        email,\n        code_challenge,\n        captcha_token,\n        dfp_telemetry_id,\n      };\n      return this._networkClient.retriableFetchSDK<MagicLinksLoginOrCreateResponse>({\n        url: '/magic_links/email/login_or_create',\n        body: requestBody,\n        method: 'POST',\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n\n    send: async (email: string, options: MagicLinksSendOptions = {}): Promise<ResponseCommon> => {\n      const { pkceRequiredForEmailMagicLinks } = await this._config;\n\n      let code_challenge: string | undefined = undefined;\n      if (pkceRequiredForEmailMagicLinks) {\n        code_challenge = await this.getCodeChallenge();\n      }\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      const requestBody = {\n        ...options,\n        email,\n        code_challenge,\n        captcha_token,\n        dfp_telemetry_id,\n      };\n      const isLoggedIn = !!this._subscriptionService.getSession();\n\n      const endpoint = isLoggedIn ? '/magic_links/email/send/secondary' : '/magic_links/email/send/primary';\n\n      return this._networkClient.retriableFetchSDK<MagicLinksSendResponse>({\n        url: endpoint,\n        body: requestBody,\n        method: 'POST',\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n  };\n\n  authenticate = this._subscriptionService.withUpdateSession(\n    async (token: string, options: MagicLinksAuthenticateOptions) => {\n      validate('stytch.magicLinks.authenticate')\n        .isString('Token', token)\n        .isNumber('session_duration_minutes', options.session_duration_minutes);\n\n      // When a user resets their password with PKCE turned on, they create a pkPair in the 'passwords' namespace.\n      // However, when the user gets the reset password email, they have the option to log in without a password.\n      // This redirects them to the magic link authenticate flow, which automatically looks for the pkce code_verifier\n      // in the 'magic_links' namespace, breaking the flow. Unfortunately we won't know for sure in the eml authenticate call\n      // whether or not the user is coming from a password reset flow. To handle this, we have to try to authenticate with\n      // both the 'passwords' and 'magic_links' code_verifiers.\n      const passwordResetPKPair = await this._passwordResetPKCEManager.getPKPair();\n\n      let resp: WithUser<MagicLinksAuthenticateResponse<TProjectConfiguration>> | null = null;\n\n      if (passwordResetPKPair?.code_verifier) {\n        try {\n          resp = await this.handlePKCEForAuthenticate(this._passwordResetPKCEManager, { ...options, token });\n        } catch (e) {\n          if ((e as Error).message.includes('pkce')) {\n            // If pkce-related error, fall back to magic links code_verifier\n            // eslint-disable-next-line no-console\n            console.log(\n              'Authenticate with passwords pkce namespace failed. Falling back to authenticate with magic_links namespace.',\n            );\n          } else {\n            throw e;\n          }\n        }\n      }\n\n      if (!resp) {\n        resp = await this.handlePKCEForAuthenticate(this._pkceManager, { ...options, token });\n      }\n      return omitUser(resp);\n    },\n  );\n}\n","import { IConsumerSubscriptionService, IDFPProtectedAuthProvider, INetworkClient } from '..';\nimport {\n  IHeadlessOTPsClient,\n  OTPAuthenticateOptions,\n  OTPCodeEmailOptions,\n  OTPCodeOptions,\n  OTPCodeSMSOptions,\n  OTPsAuthenticateResponse,\n  OTPsLoginOrCreateResponse,\n  OTPsSendResponse,\n  StytchProjectConfigurationInput,\n} from '../public';\nimport { WithUser, omitUser, validate } from '../utils';\n\nexport class HeadlessOTPClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessOTPsClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IConsumerSubscriptionService<TProjectConfiguration>,\n    private executeRecaptcha: () => Promise<string | undefined> = () => Promise.resolve(undefined),\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  sms = {\n    loginOrCreate: async (phone_number: string, options: OTPCodeSMSOptions): Promise<OTPsLoginOrCreateResponse> => {\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      const requestBody = { ...options, phone_number, captcha_token, dfp_telemetry_id };\n      return this._networkClient.retriableFetchSDK<OTPsLoginOrCreateResponse>({\n        url: '/otps/sms/login_or_create',\n        body: requestBody,\n        method: 'POST',\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n    send: async (phone_number: string, options: OTPCodeSMSOptions): Promise<OTPsSendResponse> => {\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      const requestBody = { ...options, phone_number, captcha_token, dfp_telemetry_id };\n\n      const isLoggedIn = !!this._subscriptionService.getSession();\n\n      const endpoint = isLoggedIn ? '/otps/sms/send/secondary' : '/otps/sms/send/primary';\n\n      return this._networkClient.retriableFetchSDK<OTPsSendResponse>({\n        url: endpoint,\n        body: requestBody,\n        method: 'POST',\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n  };\n\n  whatsapp = {\n    loginOrCreate: async (phone_number: string, options: OTPCodeOptions): Promise<OTPsLoginOrCreateResponse> => {\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      const requestBody = { ...options, phone_number, dfp_telemetry_id, captcha_token };\n      return this._networkClient.retriableFetchSDK<OTPsLoginOrCreateResponse>({\n        url: '/otps/whatsapp/login_or_create',\n        body: requestBody,\n        method: 'POST',\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n    send: async (phone_number: string, options: OTPCodeOptions): Promise<OTPsSendResponse> => {\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      const requestBody = { ...options, phone_number, captcha_token, dfp_telemetry_id };\n\n      const isLoggedIn = !!this._subscriptionService.getSession();\n\n      const endpoint = isLoggedIn ? '/otps/whatsapp/send/secondary' : '/otps/whatsapp/send/primary';\n\n      return this._networkClient.retriableFetchSDK<OTPsSendResponse>({\n        url: endpoint,\n        body: requestBody,\n        method: 'POST',\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n  };\n\n  email = {\n    loginOrCreate: async (email: string, options: OTPCodeEmailOptions): Promise<OTPsLoginOrCreateResponse> => {\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      const requestBody = { ...options, email, captcha_token, dfp_telemetry_id };\n      return this._networkClient.retriableFetchSDK<OTPsLoginOrCreateResponse>({\n        url: '/otps/email/login_or_create',\n        body: requestBody,\n        method: 'POST',\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n    send: async (email: string, options: OTPCodeEmailOptions): Promise<OTPsSendResponse> => {\n      const captcha_token = await this.executeRecaptcha();\n      const requestBody = { ...options, email, captcha_token };\n\n      const isLoggedIn = !!this._subscriptionService.getSession();\n\n      const endpoint = isLoggedIn ? '/otps/email/send/secondary' : '/otps/email/send/primary';\n\n      return this._networkClient.fetchSDK<OTPsSendResponse>({\n        url: endpoint,\n        body: requestBody,\n        method: 'POST',\n      });\n    },\n  };\n\n  authenticate = this._subscriptionService.withUpdateSession(\n    async (code: string, method_id: string, options: OTPAuthenticateOptions) => {\n      validate('stytch.otps.authenticate')\n        .isString('Code', code)\n        .isNumber('session_duration_minutes', options.session_duration_minutes);\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      const requestBody = {\n        token: code,\n        method_id,\n        dfp_telemetry_id,\n        captcha_token,\n        ...options,\n      };\n      const resp = await this._networkClient.retriableFetchSDK<\n        WithUser<OTPsAuthenticateResponse<TProjectConfiguration>>\n      >({\n        url: '/otps/authenticate',\n        body: requestBody,\n        method: 'POST',\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n\n      return omitUser(resp);\n    },\n  );\n}\n","import {\n  IHeadlessOAuthClient,\n  OAuthAttachResponse,\n  OAuthAuthenticateOptions,\n  OAuthAuthenticateResponse,\n  OAuthGetURLOptions,\n  OAuthProviders,\n  StytchProjectConfigurationInput,\n} from '../public';\nimport { INetworkClient, IPKCEManager, IConsumerSubscriptionService } from '..';\nimport { WithUser, omitUser, logger, validate, isTestPublicToken } from '../utils';\n\ntype DynamicConfig = Promise<{\n  cnameDomain: null | string;\n  pkceRequiredForOAuth: boolean;\n}>;\ntype Config = {\n  publicToken: string;\n  testAPIURL: string;\n  liveAPIURL: string;\n};\n\nexport class HeadlessOAuthClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessOAuthClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IConsumerSubscriptionService<TProjectConfiguration>,\n    private _pkceManager: IPKCEManager,\n    private _dynamicConfig: DynamicConfig,\n    private _config: Config,\n  ) {}\n\n  google = {\n    start: this.startOAuthFlow(OAuthProviders.Google),\n  };\n\n  apple = {\n    start: this.startOAuthFlow(OAuthProviders.Apple),\n  };\n\n  microsoft = {\n    start: this.startOAuthFlow(OAuthProviders.Microsoft),\n  };\n\n  github = {\n    start: this.startOAuthFlow(OAuthProviders.Github),\n  };\n\n  gitlab = {\n    start: this.startOAuthFlow(OAuthProviders.GitLab),\n  };\n\n  facebook = {\n    start: this.startOAuthFlow(OAuthProviders.Facebook),\n  };\n\n  discord = {\n    start: this.startOAuthFlow(OAuthProviders.Discord),\n  };\n\n  salesforce = {\n    start: this.startOAuthFlow(OAuthProviders.Salesforce),\n  };\n\n  slack = {\n    start: this.startOAuthFlow(OAuthProviders.Slack),\n  };\n\n  amazon = {\n    start: this.startOAuthFlow(OAuthProviders.Amazon),\n  };\n\n  bitbucket = {\n    start: this.startOAuthFlow(OAuthProviders.Bitbucket),\n  };\n\n  linkedin = {\n    start: this.startOAuthFlow(OAuthProviders.LinkedIn),\n  };\n\n  coinbase = {\n    start: this.startOAuthFlow(OAuthProviders.Coinbase),\n  };\n\n  twitch = {\n    start: this.startOAuthFlow(OAuthProviders.Twitch),\n  };\n\n  twitter = {\n    start: this.startOAuthFlow(OAuthProviders.Twitter),\n  };\n\n  tiktok = {\n    start: this.startOAuthFlow(OAuthProviders.TikTok),\n  };\n\n  snapchat = {\n    start: this.startOAuthFlow(OAuthProviders.Snapchat),\n  };\n\n  figma = {\n    start: this.startOAuthFlow(OAuthProviders.Figma),\n  };\n\n  yahoo = {\n    start: this.startOAuthFlow(OAuthProviders.Yahoo),\n  };\n\n  authenticate = this._subscriptionService.withUpdateSession(\n    async (token: string, options: OAuthAuthenticateOptions) => {\n      validate('stytch.oauth.authenticate')\n        .isString('Token', token)\n        .isNumber('session_duration_minutes', options.session_duration_minutes);\n\n      const keyPair = await this._pkceManager.getPKPair();\n\n      if (!keyPair) {\n        logger.warn(\n          'No code verifier found in local storage for OAuth flow.\\n' +\n            'Consider using stytch.oauth.$provider.start() to add PKCE to your OAuth flows for added security.\\n' +\n            'See https://stytch.com/docs/oauth#guides_pkce for more information.',\n        );\n      }\n\n      const resp = await this._networkClient.fetchSDK<WithUser<OAuthAuthenticateResponse<TProjectConfiguration>>>({\n        url: '/oauth/authenticate',\n        method: 'POST',\n        body: {\n          token,\n          code_verifier: keyPair?.code_verifier,\n          ...options,\n        },\n      });\n\n      this._pkceManager.clearPKPair();\n\n      return omitUser(resp);\n    },\n  );\n\n  async attach(provider: string): Promise<OAuthAttachResponse> {\n    validate('stytch.oauth.attach').isString('Provider', provider);\n    return await this._networkClient.fetchSDK<OAuthAttachResponse>({\n      url: '/oauth/attach',\n      method: 'POST',\n      body: { provider },\n    });\n  }\n\n  private async getBaseApiUrl() {\n    const { cnameDomain } = await this._dynamicConfig;\n    if (cnameDomain) {\n      // The API returns cname domains without a protocol - assume HTTPS\n      return `https://${cnameDomain}`;\n    }\n    // Our TestAPIURL and LiveAPIURL should have the HTTPS protocol already attached\n    // Don't add it twice!\n    if (isTestPublicToken(this._config.publicToken)) {\n      return this._config.testAPIURL;\n    }\n    return this._config.liveAPIURL;\n  }\n\n  private startOAuthFlow(providerType: OAuthProviders) {\n    return async ({\n      login_redirect_url,\n      signup_redirect_url,\n      custom_scopes,\n      provider_params,\n      oauth_attach_token,\n    }: OAuthGetURLOptions = {}): Promise<void> => {\n      const { cnameDomain, pkceRequiredForOAuth } = await this._dynamicConfig;\n      const baseURL = await this.getBaseApiUrl();\n\n      this._networkClient.logEvent({\n        name: 'start_oauth_flow',\n        details: {\n          provider_type: providerType,\n          custom_scopes,\n          cname_domain: cnameDomain,\n          pkce: pkceRequiredForOAuth,\n          provider_params,\n        },\n      });\n\n      const oauthUrl = new URL(`${baseURL}/v1/public/oauth/${providerType}/start`);\n      oauthUrl.searchParams.set('public_token', this._config.publicToken);\n\n      if (pkceRequiredForOAuth) {\n        const keyPair = await this._pkceManager.startPKCETransaction();\n        oauthUrl.searchParams.set('code_challenge', keyPair.code_challenge);\n      } else {\n        this._pkceManager.clearPKPair();\n      }\n\n      if (custom_scopes) {\n        validate('startOAuthFlow').isStringArray('custom_scopes', custom_scopes);\n        oauthUrl.searchParams.set('custom_scopes', custom_scopes.join(' '));\n      }\n      if (provider_params) {\n        validate('startOAuthFlow').isOptionalObject('provider_params', provider_params);\n        for (const key in provider_params) {\n          oauthUrl.searchParams.set('provider_' + key, provider_params[key]);\n        }\n      }\n      if (login_redirect_url) oauthUrl.searchParams.set('login_redirect_url', login_redirect_url);\n      if (signup_redirect_url) oauthUrl.searchParams.set('signup_redirect_url', signup_redirect_url);\n      if (oauth_attach_token) oauthUrl.searchParams.set('oauth_attach_token', oauth_attach_token);\n\n      window.location.href = oauthUrl.toString();\n    };\n  }\n}\n","import { IConsumerSubscriptionService, IDFPProtectedAuthProvider, INetworkClient } from '..';\nimport {\n  CryptoWalletAuthenticateOptions,\n  CryptoWalletAuthenticateResponse,\n  CryptoWalletAuthenticateStartOptions,\n  CryptoWalletAuthenticateStartResponse,\n  IHeadlessCryptoWalletClient,\n  StytchProjectConfigurationInput,\n} from '../public';\nimport { omitUser, validate, WithUser } from '../utils';\n\ntype DynamicConfig = Promise<{\n  siweRequiredForCryptoWallets: boolean;\n}>;\n\nconst DefaultDynamicConfig = Promise.resolve({\n  siweRequiredForCryptoWallets: false,\n});\n\nexport class HeadlessCryptoWalletClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessCryptoWalletClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _apiNetworkClient: INetworkClient,\n    private _subscriptionService: IConsumerSubscriptionService<TProjectConfiguration>,\n    private executeRecaptcha: () => Promise<string | undefined> = () => Promise.resolve(undefined),\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n    private _config: DynamicConfig = DefaultDynamicConfig,\n  ) {}\n\n  async authenticateStart(\n    options: CryptoWalletAuthenticateStartOptions,\n  ): Promise<CryptoWalletAuthenticateStartResponse> {\n    validate('stytch.cryptoWallets.authenticateStart')\n      .isString('crypto_wallet_address', options.crypto_wallet_address)\n      .isString('crypto_wallet_type', options.crypto_wallet_type);\n    if (options.siwe_params) {\n      validate('stytch.cryptoWallets.authenticateStart')\n        .isOptionalString('uri', options.siwe_params.uri)\n        .isOptionalString('chain_id', options.siwe_params.chain_id)\n        .isOptionalString('issued_at', options.siwe_params.issued_at)\n        .isOptionalString('statement', options.siwe_params.statement)\n        .isOptionalString('not_before', options.siwe_params.not_before)\n        .isOptionalString('message_request_id', options.siwe_params.message_request_id)\n        .isOptionalStringArray('resources', options.siwe_params.resources);\n    }\n\n    const isLoggedIn = !!this._subscriptionService.getSession();\n    const captcha_token = await this.executeRecaptcha();\n    const { siweRequiredForCryptoWallets } = await this._config;\n\n    const body: CryptoWalletAuthenticateStartOptions = {\n      crypto_wallet_address: options.crypto_wallet_address,\n      crypto_wallet_type: options.crypto_wallet_type,\n    };\n    if (siweRequiredForCryptoWallets && options.crypto_wallet_type == 'ethereum') {\n      body.siwe_params = { ...options.siwe_params, uri: options.siwe_params?.uri || window.location.origin };\n    }\n\n    const endpoint = isLoggedIn\n      ? '/crypto_wallets/authenticate/start/secondary'\n      : '/crypto_wallets/authenticate/start/primary';\n\n    const requestBody = {\n      ...body,\n      captcha_token,\n    };\n    return this._apiNetworkClient.fetchSDK<CryptoWalletAuthenticateStartResponse>({\n      url: endpoint,\n      method: 'POST',\n      body: requestBody,\n    });\n  }\n\n  authenticate = this._subscriptionService.withUpdateSession(\n    async (\n      options: CryptoWalletAuthenticateOptions,\n    ): Promise<CryptoWalletAuthenticateResponse<TProjectConfiguration>> => {\n      validate('stytch.cryptoWallets.authenticate')\n        .isString('signature', options.signature)\n        .isString('crypto_wallet_address', options.crypto_wallet_address)\n        .isString('crypto_wallet_type', options.crypto_wallet_type)\n        .isNumber('session_duration_minutes', options.session_duration_minutes);\n\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      const resp = await this._apiNetworkClient.retriableFetchSDK<\n        WithUser<CryptoWalletAuthenticateResponse<TProjectConfiguration>>\n      >({\n        url: '/crypto_wallets/authenticate',\n        method: 'POST',\n        body: {\n          session_duration_minutes: options.session_duration_minutes,\n          crypto_wallet_address: options.crypto_wallet_address,\n          crypto_wallet_type: options.crypto_wallet_type,\n          signature: options.signature,\n          captcha_token,\n          dfp_telemetry_id,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n\n      return omitUser(resp);\n    },\n  );\n}\n","import {\n  IHeadlessTOTPClient,\n  TOTPAuthenticateOptions,\n  TOTPAuthenticateResponse,\n  TOTPCreateOptions,\n  TOTPCreateResponse,\n  TOTPRecoverOptions,\n  TOTPRecoverResponse,\n  TOTPRecoveryCodesResponse,\n  StytchProjectConfigurationInput,\n} from '../public';\n\nimport { IConsumerSubscriptionService, IDFPProtectedAuthProvider, INetworkClient } from '..';\nimport { omitUser, validate, WithUser } from '../utils';\n\nexport class HeadlessTOTPClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessTOTPClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IConsumerSubscriptionService<TProjectConfiguration>,\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  async create(options: TOTPCreateOptions): Promise<TOTPCreateResponse> {\n    validate('stytch.totps.create').isNumber('expiration_minutes', options.expiration_minutes);\n\n    const resp = await this._networkClient.fetchSDK<WithUser<TOTPCreateResponse>>({\n      url: '/totps',\n      method: 'POST',\n      body: {\n        expiration_minutes: options.expiration_minutes,\n      },\n    });\n\n    this._subscriptionService.updateUser(resp.__user);\n\n    return omitUser(resp);\n  }\n\n  authenticate = this._subscriptionService.withUpdateSession(\n    async (options: TOTPAuthenticateOptions): Promise<TOTPAuthenticateResponse<TProjectConfiguration>> => {\n      validate('stytch.totps.authenticate')\n        .isNumber('session_duration_minutes', options.session_duration_minutes)\n        .isString('totp_code', options.totp_code);\n\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      const resp = await this._networkClient.retriableFetchSDK<\n        WithUser<TOTPAuthenticateResponse<TProjectConfiguration>>\n      >({\n        url: '/totps/authenticate',\n        method: 'POST',\n        body: {\n          session_duration_minutes: options.session_duration_minutes,\n          totp_code: options.totp_code,\n          captcha_token,\n          dfp_telemetry_id,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n\n      return omitUser(resp);\n    },\n  );\n\n  async recoveryCodes(): Promise<TOTPRecoveryCodesResponse> {\n    return this._networkClient.fetchSDK<TOTPRecoveryCodesResponse>({\n      url: '/totps/recovery_codes',\n      method: 'POST',\n    });\n  }\n\n  recover = this._subscriptionService.withUpdateSession(\n    async (options: TOTPRecoverOptions): Promise<TOTPRecoverResponse<TProjectConfiguration>> => {\n      validate('stytch.totps.recover')\n        .isNumber('session_duration_minutes', options.session_duration_minutes)\n        .isString('recovery_code', options.recovery_code);\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      const resp = await this._networkClient.retriableFetchSDK<WithUser<TOTPRecoverResponse<TProjectConfiguration>>>({\n        url: '/totps/recover',\n        method: 'POST',\n        body: {\n          session_duration_minutes: options.session_duration_minutes,\n          recovery_code: options.recovery_code,\n          captcha_token,\n          dfp_telemetry_id,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n\n      return omitUser(resp);\n    },\n  );\n}\n","// src/webauthn-json/base64url.ts\nfunction base64urlToBuffer(baseurl64String) {\n  const padding = \"==\".slice(0, (4 - baseurl64String.length % 4) % 4);\n  const base64String = baseurl64String.replace(/-/g, \"+\").replace(/_/g, \"/\") + padding;\n  const str = atob(base64String);\n  const buffer = new ArrayBuffer(str.length);\n  const byteView = new Uint8Array(buffer);\n  for (let i = 0; i < str.length; i++) {\n    byteView[i] = str.charCodeAt(i);\n  }\n  return buffer;\n}\nfunction bufferToBase64url(buffer) {\n  const byteView = new Uint8Array(buffer);\n  let str = \"\";\n  for (const charCode of byteView) {\n    str += String.fromCharCode(charCode);\n  }\n  const base64String = btoa(str);\n  const base64urlString = base64String.replace(/\\+/g, \"-\").replace(\n    /\\//g,\n    \"_\"\n  ).replace(/=/g, \"\");\n  return base64urlString;\n}\n\n// src/webauthn-json/convert.ts\nvar copyValue = \"copy\";\nvar convertValue = \"convert\";\nfunction convert(conversionFn, schema2, input) {\n  if (schema2 === copyValue) {\n    return input;\n  }\n  if (schema2 === convertValue) {\n    return conversionFn(input);\n  }\n  if (schema2 instanceof Array) {\n    return input.map((v) => convert(conversionFn, schema2[0], v));\n  }\n  if (schema2 instanceof Object) {\n    const output = {};\n    for (const [key, schemaField] of Object.entries(schema2)) {\n      if (schemaField.derive) {\n        const v = schemaField.derive(input);\n        if (v !== void 0) {\n          input[key] = v;\n        }\n      }\n      if (!(key in input)) {\n        if (schemaField.required) {\n          throw new Error(`Missing key: ${key}`);\n        }\n        continue;\n      }\n      if (input[key] == null) {\n        output[key] = null;\n        continue;\n      }\n      output[key] = convert(\n        conversionFn,\n        schemaField.schema,\n        input[key]\n      );\n    }\n    return output;\n  }\n}\nfunction derived(schema2, derive) {\n  return {\n    required: true,\n    schema: schema2,\n    derive\n  };\n}\nfunction required(schema2) {\n  return {\n    required: true,\n    schema: schema2\n  };\n}\nfunction optional(schema2) {\n  return {\n    required: false,\n    schema: schema2\n  };\n}\n\n// src/webauthn-json/basic/schema.ts\nvar publicKeyCredentialDescriptorSchema = {\n  type: required(copyValue),\n  id: required(convertValue),\n  transports: optional(copyValue)\n};\nvar simplifiedExtensionsSchema = {\n  appid: optional(copyValue),\n  appidExclude: optional(copyValue),\n  credProps: optional(copyValue)\n};\nvar simplifiedClientExtensionResultsSchema = {\n  appid: optional(copyValue),\n  appidExclude: optional(copyValue),\n  credProps: optional(copyValue)\n};\nvar credentialCreationOptions = {\n  publicKey: required({\n    rp: required(copyValue),\n    user: required({\n      id: required(convertValue),\n      name: required(copyValue),\n      displayName: required(copyValue)\n    }),\n    challenge: required(convertValue),\n    pubKeyCredParams: required(copyValue),\n    timeout: optional(copyValue),\n    excludeCredentials: optional([publicKeyCredentialDescriptorSchema]),\n    authenticatorSelection: optional(copyValue),\n    attestation: optional(copyValue),\n    extensions: optional(simplifiedExtensionsSchema)\n  }),\n  signal: optional(copyValue)\n};\nvar publicKeyCredentialWithAttestation = {\n  type: required(copyValue),\n  id: required(copyValue),\n  rawId: required(convertValue),\n  authenticatorAttachment: optional(copyValue),\n  response: required({\n    clientDataJSON: required(convertValue),\n    attestationObject: required(convertValue),\n    transports: derived(\n      copyValue,\n      (response) => {\n        var _a;\n        return ((_a = response.getTransports) == null ? void 0 : _a.call(response)) || [];\n      }\n    )\n  }),\n  clientExtensionResults: derived(\n    simplifiedClientExtensionResultsSchema,\n    (pkc) => pkc.getClientExtensionResults()\n  )\n};\nvar credentialRequestOptions = {\n  mediation: optional(copyValue),\n  publicKey: required({\n    challenge: required(convertValue),\n    timeout: optional(copyValue),\n    rpId: optional(copyValue),\n    allowCredentials: optional([publicKeyCredentialDescriptorSchema]),\n    userVerification: optional(copyValue),\n    extensions: optional(simplifiedExtensionsSchema)\n  }),\n  signal: optional(copyValue)\n};\nvar publicKeyCredentialWithAssertion = {\n  type: required(copyValue),\n  id: required(copyValue),\n  rawId: required(convertValue),\n  authenticatorAttachment: optional(copyValue),\n  response: required({\n    clientDataJSON: required(convertValue),\n    authenticatorData: required(convertValue),\n    signature: required(convertValue),\n    userHandle: required(convertValue)\n  }),\n  clientExtensionResults: derived(\n    simplifiedClientExtensionResultsSchema,\n    (pkc) => pkc.getClientExtensionResults()\n  )\n};\nvar schema = {\n  credentialCreationOptions,\n  publicKeyCredentialWithAttestation,\n  credentialRequestOptions,\n  publicKeyCredentialWithAssertion\n};\n\n// src/webauthn-json/basic/api.ts\nfunction createRequestFromJSON(requestJSON) {\n  return convert(base64urlToBuffer, credentialCreationOptions, requestJSON);\n}\nfunction createResponseToJSON(credential) {\n  return convert(\n    bufferToBase64url,\n    publicKeyCredentialWithAttestation,\n    credential\n  );\n}\nasync function create(requestJSON) {\n  const credential = await navigator.credentials.create(\n    createRequestFromJSON(requestJSON)\n  );\n  return createResponseToJSON(credential);\n}\nfunction getRequestFromJSON(requestJSON) {\n  return convert(base64urlToBuffer, credentialRequestOptions, requestJSON);\n}\nfunction getResponseToJSON(credential) {\n  return convert(\n    bufferToBase64url,\n    publicKeyCredentialWithAssertion,\n    credential\n  );\n}\nasync function get(requestJSON) {\n  const credential = await navigator.credentials.get(\n    getRequestFromJSON(requestJSON)\n  );\n  return getResponseToJSON(credential);\n}\n\n// src/webauthn-json/basic/supported.ts\nfunction supported() {\n  return !!(navigator.credentials && navigator.credentials.create && navigator.credentials.get && window.PublicKeyCredential);\n}\nexport {\n  create,\n  get,\n  schema,\n  supported\n};\n//# sourceMappingURL=webauthn-json.js.map\n","import * as webauthnJson from '@github/webauthn-json';\nimport {\n  IHeadlessWebAuthnClient,\n  StytchProjectConfigurationInput,\n  WebAuthnAuthenticateResponse,\n  WebAuthnAuthenticateStartOptions,\n  WebAuthnAuthenticateStartResponse,\n  WebAuthnRegisterResponse,\n  WebAuthnRegisterStartOptions,\n  WebAuthnRegisterStartResponse,\n  WebAuthnUpdateOptions,\n  WebAuthnUpdateResponse,\n} from '../public';\n\nimport { IConsumerSubscriptionService, IDFPProtectedAuthProvider, INetworkClient } from '..';\nimport { logger, omitUser, validate, WithUser } from '../utils';\n\nexport class HeadlessWebAuthnClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessWebAuthnClient<TProjectConfiguration>\n{\n  constructor(\n    public _networkClient: INetworkClient,\n    private _subscriptionService: IConsumerSubscriptionService<TProjectConfiguration>,\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  register = this._subscriptionService.withUpdateSession(\n    async (options?: WebAuthnRegisterStartOptions): Promise<WebAuthnRegisterResponse<TProjectConfiguration>> => {\n      validate('stytch.webauthn.register')\n        .isOptionalString('domain', options?.domain)\n        .isOptionalString('authenticator_type', options?.authenticator_type)\n        .isOptionalBoolean('is_passkey', options?.is_passkey)\n        .isOptionalNumber('session_duration_minutes', options?.session_duration_minutes)\n        .isOptionalString('override_id', options?.override_id)\n        .isOptionalString('override_name', options?.override_name)\n        .isOptionalString('override_display_name', options?.override_display_name)\n        .isOptionalBoolean('use_base64_url_encoding', options?.use_base64_url_encoding);\n\n      const startResp = await this._networkClient.fetchSDK<WebAuthnRegisterStartResponse>({\n        url: '/webauthn/register/start',\n        method: 'POST',\n        body: {\n          domain: options?.domain ?? window.location.hostname,\n          authenticator_type: options?.authenticator_type ?? undefined,\n          return_passkey_credential_options: options?.is_passkey,\n          override_id: options?.override_id,\n          override_name: options?.override_name,\n          override_display_name: options?.override_display_name,\n          user_agent: navigator.userAgent,\n          use_base64_url_encoding: options?.use_base64_url_encoding,\n        },\n      });\n\n      const publicKeyCredentialCreationOptions = startResp.public_key_credential_creation_options;\n      const publicKey = JSON.parse(publicKeyCredentialCreationOptions);\n\n      const credential = await webauthnJson.create({\n        publicKey: publicKey,\n      });\n\n      const resp = await this._networkClient.fetchSDK<WithUser<WebAuthnRegisterResponse<TProjectConfiguration>>>({\n        url: '/webauthn/register',\n        method: 'POST',\n        body: {\n          public_key_credential: JSON.stringify(credential),\n          session_duration_minutes: options?.session_duration_minutes,\n        },\n      });\n\n      return omitUser(resp);\n    },\n  );\n\n  authenticate = this._subscriptionService.withUpdateSession(\n    async (\n      options: WebAuthnAuthenticateStartOptions,\n    ): Promise<WebAuthnAuthenticateResponse<TProjectConfiguration> | null> => {\n      validate('stytch.webauthn.authenticate')\n        .isOptionalString('domain', options.domain)\n        .isNumber('session_duration_minutes', options.session_duration_minutes)\n        .isOptionalBoolean('is_passkey', options.is_passkey)\n        .isOptionalObject('signal', options.signal);\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      if (options.conditional_mediation) {\n        if (!(await this.browserSupportsAutofill())) {\n          logger.error('Browser does not support WebAuthn autofill');\n          return null;\n        }\n\n        if (!this.checkEligibleInputs()) {\n          return null;\n        }\n      }\n\n      const isLoggedIn = !!this._subscriptionService.getSession();\n\n      const endpoint = isLoggedIn ? '/webauthn/authenticate/start/secondary' : '/webauthn/authenticate/start/primary';\n\n      const startResp = await this._networkClient.fetchSDK<WebAuthnAuthenticateStartResponse>({\n        url: endpoint,\n        method: 'POST',\n        body: {\n          domain: options.domain ?? window.location.hostname,\n          return_passkey_credential_options: options?.is_passkey,\n        },\n      });\n\n      const publicKeyCredentialRequestOptions = startResp.public_key_credential_request_options;\n      const abortController = new AbortController();\n      const credReqOptions = {\n        publicKey: JSON.parse(publicKeyCredentialRequestOptions),\n        signal: options.signal ?? abortController.signal,\n      };\n      const conditionalMediationCredReqOption = {\n        ...credReqOptions,\n        mediation: 'conditional' as CredentialMediationRequirement,\n      };\n      const credential = await webauthnJson.get(\n        options.conditional_mediation ? conditionalMediationCredReqOption : credReqOptions,\n      );\n\n      const authenticationData = await this._networkClient.retriableFetchSDK<\n        WithUser<WebAuthnAuthenticateResponse<TProjectConfiguration>>\n      >({\n        url: '/webauthn/authenticate',\n        method: 'POST',\n        body: {\n          public_key_credential: JSON.stringify(credential),\n          session_duration_minutes: options.session_duration_minutes,\n          dfp_telemetry_id,\n          captcha_token,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n\n      return omitUser(authenticationData);\n    },\n  );\n\n  async update(options: WebAuthnUpdateOptions): Promise<WebAuthnUpdateResponse> {\n    validate('stytch.webauthn.update')\n      .isString('webauthn_registration_id', options.webauthn_registration_id)\n      .isString('name', options.name);\n\n    const url = '/webauthn/update/' + options.webauthn_registration_id;\n    return await this._networkClient.fetchSDK<WebAuthnUpdateResponse>({\n      url: url,\n      method: 'PUT',\n      body: {\n        name: options.name,\n      },\n    });\n  }\n\n  async browserSupportsAutofill(): Promise<boolean> {\n    return (await window.PublicKeyCredential?.isConditionalMediationAvailable?.()) ?? false;\n  }\n\n  private checkEligibleInputs = (): boolean => {\n    // Check for an <input> with \"webauthn\" in its `autocomplete` attribute\n    const eligibleInputs = document.querySelectorAll(\"input[autocomplete*='webauthn']\");\n    // WebAuthn autofill requires at least one valid input\n    if (eligibleInputs.length < 1) {\n      logger.error('No <input> with `\"webauthn\"` in its `autocomplete` attribute was detected');\n      return false;\n    }\n    return true;\n  };\n}\n","import { IConsumerSubscriptionService } from '..';\nimport { IDFPProtectedAuthProvider } from '../DFPProtectedAuthProvider';\nimport { INetworkClient } from '../NetworkClient';\nimport { IPKCEManager } from '../PKCEManager';\nimport {\n  IHeadlessPasswordClient,\n  PasswordAuthenticateOptions,\n  PasswordAuthenticateResponse,\n  PasswordCreateOptions,\n  PasswordCreateResponse,\n  PasswordResetByEmailOptions,\n  PasswordResetByEmailResponse,\n  PasswordResetByEmailStartOptions,\n  PasswordResetByEmailStartResponse,\n  PasswordResetByExistingPasswordOptions,\n  PasswordResetByExistingPasswordResponse,\n  PasswordResetBySessionOptions,\n  PasswordResetBySessionResponse,\n  PasswordStrengthCheckOptions,\n  PasswordStrengthCheckResponse,\n  StytchProjectConfigurationInput,\n} from '../public';\nimport { omitUser, validate, WithUser } from '../utils';\n\ntype DynamicConfig = Promise<{\n  pkceRequiredForPasswordResets: boolean;\n}>;\n\nconst DefaultDynamicConfig = Promise.resolve({\n  pkceRequiredForPasswordResets: false,\n});\n\nexport class HeadlessPasswordClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessPasswordClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IConsumerSubscriptionService<TProjectConfiguration>,\n    private _pkceManager: IPKCEManager,\n    private _config: DynamicConfig = DefaultDynamicConfig,\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  private async getCodeChallenge(): Promise<string | undefined> {\n    const { pkceRequiredForPasswordResets } = await this._config;\n    if (!pkceRequiredForPasswordResets) {\n      return undefined;\n    }\n    let keyPair = await this._pkceManager.getPKPair();\n    if (keyPair) {\n      return keyPair.code_challenge;\n    }\n    keyPair = await this._pkceManager.startPKCETransaction();\n    return keyPair.code_challenge;\n  }\n\n  create = this._subscriptionService.withUpdateSession(\n    async (options: PasswordCreateOptions): Promise<PasswordCreateResponse<TProjectConfiguration>> => {\n      validate('stytch.passwords.create')\n        .isString('password', options.password)\n        .isString('email', options.email)\n        .isNumber('session_duration_minutes', options.session_duration_minutes);\n\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      const resp = await this._networkClient.retriableFetchSDK<WithUser<PasswordCreateResponse<TProjectConfiguration>>>(\n        {\n          url: '/passwords',\n          method: 'POST',\n          body: {\n            email: options.email,\n            password: options.password,\n            session_duration_minutes: options.session_duration_minutes,\n            captcha_token,\n            dfp_telemetry_id,\n          },\n          retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n        },\n      );\n\n      return omitUser(resp);\n    },\n  );\n\n  authenticate = this._subscriptionService.withUpdateSession(\n    async (options: PasswordAuthenticateOptions): Promise<PasswordAuthenticateResponse<TProjectConfiguration>> => {\n      validate('stytch.passwords.authenticate')\n        .isString('password', options.password)\n        .isString('email', options.email)\n        .isNumber('session_duration_minutes', options.session_duration_minutes);\n\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      const resp = await this._networkClient.retriableFetchSDK<\n        WithUser<PasswordAuthenticateResponse<TProjectConfiguration>>\n      >({\n        url: '/passwords/authenticate',\n        method: 'POST',\n        body: {\n          email: options.email,\n          password: options.password,\n          session_duration_minutes: options.session_duration_minutes,\n          captcha_token,\n          dfp_telemetry_id,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n\n      return omitUser(resp);\n    },\n  );\n\n  async resetByEmailStart(options: PasswordResetByEmailStartOptions): Promise<PasswordResetByEmailStartResponse> {\n    validate('stytch.passwords.resetByEmailStart')\n      .isString('email', options.email)\n      .isOptionalString('login_redirect_url', options.login_redirect_url)\n      .isOptionalString('reset_password_redirect_url', options.reset_password_redirect_url)\n      .isOptionalString('reset_password_template_id', options.reset_password_template_id)\n      .isOptionalNumber('reset_password_expiration_minutes', options.reset_password_expiration_minutes)\n      .isOptionalString('locale', options.locale);\n\n    const code_challenge = await this.getCodeChallenge();\n    const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n    return this._networkClient.retriableFetchSDK<PasswordResetByEmailStartResponse>({\n      url: '/passwords/email/reset/start',\n      method: 'POST',\n      body: {\n        email: options.email,\n        login_redirect_url: options.login_redirect_url,\n        reset_password_redirect_url: options.reset_password_redirect_url,\n        reset_password_expiration_minutes: options.reset_password_expiration_minutes,\n        reset_password_template_id: options.reset_password_template_id,\n        locale: options.locale,\n        code_challenge,\n        captcha_token,\n        dfp_telemetry_id,\n      },\n      retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n    });\n  }\n\n  resetByEmail = this._subscriptionService.withUpdateSession(\n    async (options: PasswordResetByEmailOptions): Promise<PasswordResetByEmailResponse<TProjectConfiguration>> => {\n      validate('stytch.passwords.resetByEmail')\n        .isString('token', options.token)\n        .isString('password', options.password)\n        .isNumber('session_duration_minutes', options.session_duration_minutes);\n\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      const pkPair = await this._pkceManager.getPKPair();\n      const code_verifier = pkPair?.code_verifier;\n\n      const resp = await this._networkClient.retriableFetchSDK<\n        WithUser<PasswordResetByEmailResponse<TProjectConfiguration>>\n      >({\n        url: '/passwords/email/reset',\n        method: 'POST',\n        body: {\n          token: options.token,\n          password: options.password,\n          session_duration_minutes: options.session_duration_minutes,\n          captcha_token,\n          code_verifier,\n          dfp_telemetry_id,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n\n      this._pkceManager.clearPKPair();\n\n      return omitUser(resp);\n    },\n  );\n\n  resetByExistingPassword = this._subscriptionService.withUpdateSession(\n    async (\n      options: PasswordResetByExistingPasswordOptions,\n    ): Promise<PasswordResetByExistingPasswordResponse<TProjectConfiguration>> => {\n      validate('stytch.passwords.resetByExistingPassword')\n        .isString('email', options.email)\n        .isString('existing_password', options.existing_password)\n        .isString('new_password', options.new_password)\n        .isNumber('session_duration_minutes', options.session_duration_minutes);\n\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      const resp = await this._networkClient.retriableFetchSDK<\n        WithUser<PasswordResetByExistingPasswordResponse<TProjectConfiguration>>\n      >({\n        url: '/passwords/existing_password/reset',\n        method: 'POST',\n        body: {\n          email: options.email,\n          existing_password: options.existing_password,\n          new_password: options.new_password,\n          session_duration_minutes: options.session_duration_minutes,\n          dfp_telemetry_id,\n          captcha_token,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n\n      return omitUser(resp);\n    },\n  );\n\n  resetBySession = this._subscriptionService.withUpdateSession(\n    async (options: PasswordResetBySessionOptions): Promise<PasswordResetBySessionResponse<TProjectConfiguration>> => {\n      validate('stytch.passwords.resetBySession').isString('password', options.password);\n\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      return this._networkClient.retriableFetchSDK<PasswordResetBySessionResponse<TProjectConfiguration>>({\n        url: '/passwords/session/reset',\n        method: 'POST',\n        body: {\n          password: options.password,\n          session_duration_minutes: options.session_duration_minutes,\n          dfp_telemetry_id,\n          captcha_token,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n  );\n\n  async strengthCheck(options: PasswordStrengthCheckOptions): Promise<PasswordStrengthCheckResponse> {\n    validate('stytch.passwords.strengthCheck')\n      .isOptionalString('email', options.email)\n      .isString('password', options.password);\n\n    return this._networkClient.fetchSDK<PasswordStrengthCheckResponse>({\n      url: '/passwords/strength_check',\n      method: 'POST',\n      body: {\n        email: options.email,\n        password: options.password,\n      },\n    });\n  }\n}\n","import { IDFPProtectedAuthProvider } from '../DFPProtectedAuthProvider';\nimport { INetworkClient } from '../NetworkClient';\nimport {\n  ImpersonationAuthenticateOptions,\n  ImpersonationAuthenticateResponse,\n  IHeadlessImpersonationClient,\n} from '../public/impersonation';\nimport { StytchProjectConfigurationInput } from '../public/typeConfig';\nimport { validate } from '../utils';\nimport { IConsumerSubscriptionService } from '../SubscriptionService';\n\nexport class HeadlessImpersonationClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessImpersonationClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IConsumerSubscriptionService<TProjectConfiguration>,\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  authenticate = this._subscriptionService.withUpdateSession(async (data: ImpersonationAuthenticateOptions) => {\n    validate('stytch.impersonation.authenticate').isString('impersonation_token', data.impersonation_token);\n    const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n    return this._networkClient.retriableFetchSDK<ImpersonationAuthenticateResponse<TProjectConfiguration>>({\n      url: '/impersonation/authenticate',\n      body: {\n        ...data,\n        dfp_telemetry_id,\n        captcha_token,\n      },\n      method: 'POST',\n      retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n    });\n  });\n}\n","export const WILDCARD_ACTION = '*';\n\nexport type RBACPolicyRole = {\n  role_id: string;\n  description: string;\n  permissions: {\n    resource_id: string;\n    actions: string[];\n  }[];\n};\n\nexport type RBACPolicyScope = {\n  scope: string;\n  description: string;\n  permissions: {\n    resource_id: string;\n    actions: string[];\n  }[];\n};\n\nexport type RBACPolicyResource = {\n  resource_id: string;\n  description: string;\n  actions: string[];\n};\n\nexport type RBACPolicyRaw = {\n  roles: RBACPolicyRole[];\n  resources: RBACPolicyResource[];\n  scopes: RBACPolicyScope[];\n};\n\n/**\n * RBACPolicy represents an instance of a parsed Stytch RBAC policy object\n * It contains methods for computing outcomes for various permissions questions\n */\nexport class RBACPolicy {\n  private rolesByID: Record<string, RBACPolicyRole>;\n\n  constructor(\n    public roles: RBACPolicyRole[],\n    public resources: RBACPolicyResource[],\n  ) {\n    this.rolesByID = {};\n    roles.forEach((role) => (this.rolesByID[role.role_id] = role));\n  }\n\n  static fromJSON(input: RBACPolicyRaw): RBACPolicy {\n    return new RBACPolicy(input.roles, input.resources);\n  }\n\n  /**\n   * Merges organization custom roles with this project policy.\n   * Custom roles are additive - they add additional roles on top of the base project policy.\n   * Resources remain from the project policy, roles are combined.\n   * @param customRoles Array of custom organization roles to add\n   * @returns A new RBACPolicy instance with merged roles\n   */\n  mergeWithCustomRoles(customRoles: RBACPolicyRole[]): RBACPolicy {\n    const mergedRoles = [...this.roles, ...customRoles];\n\n    // Resources come from the project policy - custom roles don't define new resources\n    return new RBACPolicy(mergedRoles, this.resources);\n  }\n\n  /**\n   * isAuthorized returns whether or not a user with a specific set of roles can perform a desired action\n   * @example\n   *  const canDoIt = policy.callerIsAuthorized(roles, 'files', 'create')\n   *  console.log(canDoIt) // true\n   */\n  callerIsAuthorized(memberRoles: string[], resourceId: string, action: string): boolean {\n    return !!memberRoles\n      .map((roleId) => this.rolesByID[roleId])\n      // Defense in depth: filter out null/undefined in case memberRoles contains a role that doesn't match the policy\n      // This may happen if the member is loaded _before_ a fresh RBAC policy is loaded\n      .filter((v) => v)\n      .flatMap((role) => role.permissions)\n      .filter((permission) => permission.resource_id === resourceId)\n      .find((permission) => permission.actions.includes(action) || permission.actions.includes(WILDCARD_ACTION));\n  }\n\n  /**\n   * allPermissions generates a map that allows quick lookup of all the permissions available to the user\n   * @example\n   *   const perms = policy.allPermissions(roles)\n   *   console.log(perms.files.create) // true\n   *   console.log(perms.files.delete) // false\n   */\n  allPermissionsForCaller(memberRoles: string[]): Record<string, Record<string, boolean>> {\n    const allPermsMap: Record<string, Record<string, boolean>> = Object.create(null);\n    this.resources.forEach((resource) => {\n      allPermsMap[resource.resource_id] = {};\n      resource.actions.forEach((action) => {\n        allPermsMap[resource.resource_id][action] = this.callerIsAuthorized(memberRoles, resource.resource_id, action);\n      });\n    });\n    return allPermsMap;\n  }\n}\n","import { IConsumerSubscriptionService } from '../SubscriptionService';\nimport { logger } from '../utils';\nimport { RBACPolicy, RBACPolicyRaw } from '../rbac';\nimport { IHeadlessRBACClient, ConsumerPermissionsMap } from '../public/rbac';\nimport { StytchProjectConfigurationInput } from '../public/typeConfig';\n\ntype CachedConfig = {\n  rbacPolicy: RBACPolicyRaw | null;\n};\n\ntype DynamicConfig = Promise<CachedConfig>;\n\nexport class HeadlessRBACClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessRBACClient\n{\n  private cachedPolicy: RBACPolicy | null;\n  private policyPromise: Promise<RBACPolicy>;\n  constructor(\n    cachedConfig: CachedConfig,\n    dynamicConfig: DynamicConfig,\n    private _subscriptionService: IConsumerSubscriptionService<TProjectConfiguration>,\n  ) {\n    this.cachedPolicy = cachedConfig.rbacPolicy ? RBACPolicy.fromJSON(cachedConfig.rbacPolicy) : null;\n    this.policyPromise = dynamicConfig.then((data) => {\n      if (!data.rbacPolicy) {\n        logger.error('Unable to retrieve RBAC policy from servers. Assuming caller has no permissions.');\n        return new RBACPolicy([], []);\n      }\n      // Update the existing policy too, so isAuthorizedSync will be up-to-date\n      this.cachedPolicy = RBACPolicy.fromJSON(data.rbacPolicy);\n      return this.cachedPolicy;\n    });\n  }\n\n  allPermissions<Permissions extends Record<string, string>>() {\n    return this.policyPromise.then(\n      (policy) => policy.allPermissionsForCaller(this.roleIds()) as ConsumerPermissionsMap<Permissions>,\n    );\n  }\n\n  isAuthorizedSync: IHeadlessRBACClient['isAuthorizedSync'] = (resourceId, action) => {\n    return !!this.cachedPolicy?.callerIsAuthorized(this.roleIds(), resourceId as string, action as unknown as string);\n  };\n\n  isAuthorized: IHeadlessRBACClient['isAuthorized'] = (resourceId, action) => {\n    return this.policyPromise.then((policy) =>\n      policy.callerIsAuthorized(this.roleIds(), resourceId as string, action as unknown as string),\n    );\n  };\n\n  private roleIds() {\n    const user = this._subscriptionService.getUser();\n\n    if (!user) {\n      return [];\n    }\n\n    // Although user.roles is guaranteed to exist for fresh data, there is a chance\n    // that the user stored in localstorage clientside comes from before roles were added to\n    // the API response - in which case user.roles will be undefined and this will crash\n    // TODO: [AUTH-2294] We can safely remove this ~3mos after RBAC is released\n    return user.roles ?? [];\n  }\n}\n","import { INetworkClient } from '../NetworkClient';\nimport {\n  IHeadlessIDPClient,\n  OAuthAuthorizeStartOptions,\n  OAuthAuthorizeStartResponse,\n  OAuthAuthorizeSubmitOptions,\n  OAuthAuthorizeSubmitResponse,\n  OAuthLogoutStartOptions,\n  OAuthLogoutStartResponse,\n} from '../public/idp';\n\nexport class HeadlessIDPClient implements IHeadlessIDPClient {\n  constructor(private _networkClient: INetworkClient) {}\n\n  oauthAuthorizeStart = async (data: OAuthAuthorizeStartOptions): Promise<OAuthAuthorizeStartResponse> =>\n    this._networkClient.fetchSDK<OAuthAuthorizeStartResponse>({\n      url: '/idp/oauth/authorize/start',\n      method: 'POST',\n      body: data,\n    });\n\n  oauthAuthorizeSubmit = async (data: OAuthAuthorizeSubmitOptions): Promise<OAuthAuthorizeSubmitResponse> =>\n    this._networkClient.fetchSDK<OAuthAuthorizeSubmitResponse>({\n      url: '/idp/oauth/authorize/submit',\n      method: 'POST',\n      body: data,\n    });\n\n  oauthLogoutStart = async (data: OAuthLogoutStartOptions): Promise<OAuthLogoutStartResponse> =>\n    this._networkClient.fetchSDK<OAuthLogoutStartResponse>({\n      url: `/oauth/logout/start`,\n      method: 'POST',\n      body: data,\n    });\n}\n","import { DisabledDFPProtectedAuthProvider, IDFPProtectedAuthProvider } from '../../DFPProtectedAuthProvider';\nimport { INetworkClient } from '../../NetworkClient';\nimport { IPKCEManager } from '../../PKCEManager';\nimport { IB2BSubscriptionService } from '../../SubscriptionService';\nimport {\n  B2BMagicLinksInviteOptions,\n  B2BMagicLinksInviteResponse,\n  ResponseCommon,\n  StytchProjectConfigurationInput,\n} from '../../public';\nimport {\n  B2BMagicLinkLoginOrSignupOptions,\n  B2BMagicLinkLoginOrSignupResponse,\n  B2BMagicLinksAuthenticateOptions,\n  B2BMagicLinksAuthenticateResponse,\n  B2BMagicLinksDiscoveryAuthenticateOptions,\n  B2BMagicLinksDiscoveryAuthenticateResponse,\n  B2BMagicLinksEmailDiscoverySendOptions,\n  B2BMagicLinksEmailDiscoverySendResponse,\n  IHeadlessB2BMagicLinksClient,\n} from '../../public/b2b/magicLinks';\nimport { validate } from '../../utils';\n\ntype DynamicConfig = Promise<{\n  pkceRequiredForEmailMagicLinks: boolean;\n}>;\n\nconst DefaultDynamicConfig = Promise.resolve({\n  pkceRequiredForEmailMagicLinks: false,\n});\n\nexport class HeadlessB2BMagicLinksClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BMagicLinksClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n    private _pkceManager: IPKCEManager,\n    private _passwordResetPKCEManager: IPKCEManager,\n    private _config: DynamicConfig = DefaultDynamicConfig,\n    private dfpProtectedAuth: IDFPProtectedAuthProvider = DisabledDFPProtectedAuthProvider(),\n  ) {}\n\n  private async getCodeChallenge(): Promise<string | undefined> {\n    const { pkceRequiredForEmailMagicLinks } = await this._config;\n    if (!pkceRequiredForEmailMagicLinks) {\n      return undefined;\n    }\n    let keyPair = await this._pkceManager.getPKPair();\n    if (keyPair) {\n      return keyPair.code_challenge;\n    }\n    keyPair = await this._pkceManager.startPKCETransaction();\n    return keyPair.code_challenge;\n  }\n\n  private async handlePKCEForAuthenticate(\n    pkceManager: IPKCEManager,\n    data: B2BMagicLinksAuthenticateOptions,\n  ): Promise<B2BMagicLinksAuthenticateResponse<TProjectConfiguration>> {\n    const pkPair = await pkceManager.getPKPair();\n\n    const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n    const requestBody = {\n      pkce_code_verifier: pkPair?.code_verifier,\n      dfp_telemetry_id,\n      captcha_token,\n      intermediate_session_token: (await this._subscriptionService.getIntermediateSessionToken()) || undefined,\n      ...data,\n    };\n    const resp = await this._networkClient.retriableFetchSDK<B2BMagicLinksAuthenticateResponse<TProjectConfiguration>>({\n      url: '/b2b/magic_links/authenticate',\n      body: requestBody,\n      method: 'POST',\n      retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n    });\n\n    pkceManager.clearPKPair();\n\n    return resp;\n  }\n\n  email = {\n    invite: async (data: B2BMagicLinksInviteOptions): Promise<B2BMagicLinksInviteResponse> => {\n      validate('stytch.magicLinks.email.invite')\n        .isString('email_address', data.email_address)\n        .isOptionalString('invite_redirect_url', data.invite_redirect_url)\n        .isOptionalString('invite_template_id', data.invite_template_id)\n        .isOptionalString('name', data.name)\n        .isOptionalString('locale', data.locale)\n        .isOptionalStringArray('roles', data.roles)\n        .isOptionalNumber('invite_expiration_minutes', data.invite_expiration_minutes);\n\n      return this._networkClient.fetchSDK<B2BMagicLinksInviteResponse>({\n        url: '/b2b/magic_links/email/invite',\n        body: data,\n        method: 'POST',\n      });\n    },\n    loginOrSignup: async (data: B2BMagicLinkLoginOrSignupOptions): Promise<ResponseCommon> => {\n      validate('stytch.magicLinks.email.loginOrSignup')\n        .isString('email_address', data.email_address)\n        .isString('organization_id', data.organization_id)\n        .isOptionalString('login_redirect_url', data.login_redirect_url)\n        .isOptionalString('login_template_id', data.login_template_id)\n        .isOptionalString('signup_redirect_url', data.signup_redirect_url)\n        .isOptionalString('signup_template_id', data.signup_template_id)\n        .isOptionalString('locale', data.locale)\n        .isOptionalNumber('login_expiration_minutes', data.login_expiration_minutes)\n        .isOptionalNumber('signup_expiration_minutes', data.signup_expiration_minutes);\n\n      const pkce_code_challenge = await this.getCodeChallenge();\n      const requestBody = {\n        ...data,\n        pkce_code_challenge,\n      };\n      return this._networkClient.fetchSDK<B2BMagicLinkLoginOrSignupResponse>({\n        url: '/b2b/magic_links/email/login_or_signup',\n        body: requestBody,\n        method: 'POST',\n      });\n    },\n    discovery: {\n      send: async (data: B2BMagicLinksEmailDiscoverySendOptions): Promise<B2BMagicLinksEmailDiscoverySendResponse> => {\n        validate('stytch.magicLinks.email.discovery.send')\n          .isString('email_address', data.email_address)\n          .isOptionalString('discovery_redirect_url', data.discovery_redirect_url)\n          .isOptionalString('login_template_id', data.login_template_id)\n          .isOptionalString('locale', data.locale)\n          .isOptionalNumber('discovery_expiration_minutes', data.discovery_expiration_minutes);\n\n        const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n        const pkce_code_challenge = await this.getCodeChallenge();\n        const requestBody = {\n          ...data,\n          pkce_code_challenge,\n          dfp_telemetry_id,\n          captcha_token,\n        };\n        return this._networkClient.retriableFetchSDK<B2BMagicLinksEmailDiscoverySendResponse>({\n          url: '/b2b/magic_links/email/discovery/send',\n          body: requestBody,\n          method: 'POST',\n          retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n        });\n      },\n    },\n  };\n\n  authenticate = this._subscriptionService.withUpdateSession(async (data: B2BMagicLinksAuthenticateOptions) => {\n    validate('stytch.magicLinks.authenticate')\n      .isString('magic_links_token', data.magic_links_token)\n      .isNumber('session_duration_minutes', data.session_duration_minutes)\n      .isOptionalString('locale', data.locale);\n\n    // When a user resets their password with PKCE turned on, they create a pkPair in the 'passwords' namespace.\n    // However, when the user gets the reset password email, they have the option to log in without a password.\n    // This redirects them to the magic link authenticate flow, which automatically looks for the pkce code_verifier\n    // in the 'magic_links' namespace, breaking the flow. Unfortunately we won't know for sure in the eml authenticate call\n    // whether or not the user is coming from a password reset flow. To handle this, we have to try to authenticate with\n    // both the 'passwords' and 'magic_links' code_verifiers.\n    const passwordResetPKPair = await this._passwordResetPKCEManager.getPKPair();\n\n    let resp: B2BMagicLinksAuthenticateResponse<TProjectConfiguration> | null = null;\n\n    if (passwordResetPKPair?.code_verifier) {\n      try {\n        resp = await this.handlePKCEForAuthenticate(this._passwordResetPKCEManager, data);\n      } catch (e) {\n        if ((e as Error).message.includes('pkce')) {\n          // If pkce-related error, fall back to magic links code_verifier\n          // eslint-disable-next-line no-console\n          console.log(\n            'Authenticate with passwords pkce namespace failed. Falling back to authenticate with magic_links namespace.',\n          );\n        } else {\n          throw e;\n        }\n      }\n    }\n\n    if (!resp) {\n      resp = await this.handlePKCEForAuthenticate(this._pkceManager, data);\n    }\n\n    return resp;\n  });\n\n  discovery = {\n    authenticate: this._subscriptionService.withUpdateSession(\n      async (\n        data: B2BMagicLinksDiscoveryAuthenticateOptions,\n      ): Promise<B2BMagicLinksDiscoveryAuthenticateResponse<TProjectConfiguration>> => {\n        validate('stytch.magicLinks.discovery.authenticate').isString(\n          'discovery_magic_links_token',\n          data.discovery_magic_links_token,\n        );\n\n        const pkPair = await this._pkceManager.getPKPair();\n\n        const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n        const requestBody = {\n          pkce_code_verifier: pkPair?.code_verifier,\n          dfp_telemetry_id,\n          captcha_token,\n          ...data,\n        };\n        const resp = await this._networkClient.retriableFetchSDK<\n          B2BMagicLinksDiscoveryAuthenticateResponse<TProjectConfiguration>\n        >({\n          url: '/b2b/magic_links/discovery/authenticate',\n          body: requestBody,\n          method: 'POST',\n          retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n        });\n\n        this._pkceManager.clearPKPair();\n\n        return resp;\n      },\n    ),\n  };\n}\n","import {\n  ResponseCommon,\n  Member,\n  IHeadlessB2BSelfClient,\n  B2BMemberOnChangeCallback,\n  B2BMemberUpdateOptions,\n  B2BMemberUpdateResponse,\n  B2BMemberDeleteMFAPhoneNumberResponse,\n  B2BMemberDeletePasswordResponse,\n  MemberInfo,\n  B2BMemberUnlinkRetiredEmailRequest,\n  B2BMemberUnlinkRetiredEmailResponse,\n  B2BMemberStartEmailUpdateRequest,\n  B2BMemberStartEmailUpdateResponse,\n  StytchProjectConfigurationInput,\n  B2BMemberGetConnectedAppsResponse,\n  B2BMemberRevokeConnectedAppOptions,\n  B2BMemberRevokeConnectedAppResponse,\n} from '../../public';\nimport { INetworkClient } from '../../NetworkClient';\nimport { validate } from '../../utils';\nimport { IB2BSubscriptionService } from '../../SubscriptionService';\n\nexport class HeadlessB2BSelfClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BSelfClient\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _apiNetworkClient: INetworkClient,\n    private _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n  ) {}\n\n  get = async (): Promise<Member | null> => {\n    const resp = await this._networkClient.fetchSDK<{ member: Member } & ResponseCommon>({\n      url: `/b2b/organizations/members/me`,\n      method: 'GET',\n    });\n    this._subscriptionService.updateMember(resp.member);\n    return resp.member;\n  };\n\n  getSync = (): Member | null => {\n    return this._subscriptionService.getMember();\n  };\n\n  getInfo = (): MemberInfo => ({\n    member: this.getSync(),\n    fromCache: this._subscriptionService.getFromCache(),\n  });\n\n  onChange = (callback: B2BMemberOnChangeCallback) => {\n    return this._subscriptionService.subscribeToState((state) => callback(state?.member ?? null));\n  };\n\n  update = async (data: B2BMemberUpdateOptions): Promise<B2BMemberUpdateResponse> => {\n    validate('stytch.self.update')\n      .isOptionalString('name', data.name)\n      .isOptionalObject('untrusted_metadata', data.untrusted_metadata)\n      .isOptionalBoolean('mfa_enrolled', data.mfa_enrolled)\n      .isOptionalString('mfa_phone_number', data.mfa_phone_number)\n      .isOptionalString('default_mfa_method', data.default_mfa_method);\n\n    const resp = await this._networkClient.fetchSDK<B2BMemberUpdateResponse>({\n      url: '/b2b/organizations/members/update',\n      body: data,\n      method: 'PUT',\n    });\n    this._subscriptionService.updateMember(resp.member);\n    return resp;\n  };\n\n  deleteMFAPhoneNumber = async (): Promise<B2BMemberDeleteMFAPhoneNumberResponse> => {\n    const resp = await this._networkClient.fetchSDK<B2BMemberDeleteMFAPhoneNumberResponse>({\n      url: '/b2b/organizations/members/deletePhoneNumber',\n      method: 'DELETE',\n    });\n    this._subscriptionService.updateMember(resp.member);\n    return resp;\n  };\n\n  deleteMFATOTP = async (): Promise<B2BMemberDeletePasswordResponse> => {\n    const resp = await this._networkClient.fetchSDK<B2BMemberDeletePasswordResponse>({\n      url: `/b2b/organizations/members/deleteTOTP`,\n      method: 'DELETE',\n    });\n    this._subscriptionService.updateMember(resp.member);\n    return resp;\n  };\n\n  deletePassword = async (passwordId: string): Promise<B2BMemberDeletePasswordResponse> => {\n    const resp = await this._networkClient.fetchSDK<B2BMemberDeletePasswordResponse>({\n      url: `/b2b/organizations/members/passwords/${passwordId}`,\n      method: 'DELETE',\n    });\n    this._subscriptionService.updateMember(resp.member);\n    return resp;\n  };\n\n  unlinkRetiredEmail = async (\n    data: B2BMemberUnlinkRetiredEmailRequest,\n  ): Promise<B2BMemberUnlinkRetiredEmailResponse> => {\n    const resp = await this._apiNetworkClient.fetchSDK<B2BMemberUnlinkRetiredEmailResponse>({\n      url: '/b2b/organizations/members/unlink_retired_email',\n      method: 'POST',\n      body: data,\n    });\n    this._subscriptionService.updateMember(resp.member);\n    return resp;\n  };\n\n  startEmailUpdate = async (data: B2BMemberStartEmailUpdateRequest): Promise<B2BMemberStartEmailUpdateResponse> => {\n    const resp = await this._apiNetworkClient.fetchSDK<B2BMemberStartEmailUpdateResponse>({\n      url: '/b2b/organizations/members/start_email_update',\n      method: 'POST',\n      body: data,\n    });\n    this._subscriptionService.updateMember(resp.member);\n    return resp;\n  };\n\n  getConnectedApps = async (): Promise<B2BMemberGetConnectedAppsResponse> => {\n    return this._networkClient.fetchSDK<B2BMemberGetConnectedAppsResponse>({\n      url: '/b2b/organizations/members/connected_apps',\n      method: 'GET',\n    });\n  };\n\n  revokeConnectedApp = async (\n    data: B2BMemberRevokeConnectedAppOptions,\n  ): Promise<B2BMemberRevokeConnectedAppResponse> => {\n    return this._networkClient.fetchSDK<B2BMemberRevokeConnectedAppResponse>({\n      url: `/b2b/organizations/members/connected_apps/${data.connected_app_id}/revoke`,\n      method: 'POST',\n    });\n  };\n}\n","import { IB2BSubscriptionService, IDFPProtectedAuthProvider, INetworkClient, IPKCEManager } from '../..';\nimport {\n  B2BSSOCreateExternalConnectionOptions,\n  B2BSSOCreateExternalConnectionResponse,\n  B2BSSODeleteConnectionResponse,\n  B2BSSODiscoverConnectionsResponse,\n  B2BSSOGetConnectionsResponse,\n  B2BSSOOIDCCreateConnectionOptions,\n  B2BSSOOIDCCreateConnectionResponse,\n  B2BSSOOIDCUpdateConnectionOptions,\n  B2BSSOOIDCUpdateConnectionResponse,\n  B2BSSOSAMLCreateConnectionOptions,\n  B2BSSOSAMLCreateConnectionResponse,\n  B2BSSOSAMLDeleteEncryptionPrivateKeyOptions,\n  B2BSSOSAMLDeleteEncryptionPrivateKeyResponse,\n  B2BSSOSAMLDeleteVerificationCertificateOptions,\n  B2BSSOSAMLDeleteVerificationCertificateResponse,\n  B2BSSOSAMLUpdateConnectionByURLOptions,\n  B2BSSOSAMLUpdateConnectionByURLResponse,\n  B2BSSOSAMLUpdateConnectionOptions,\n  B2BSSOSAMLUpdateConnectionResponse,\n  B2BSSOUpdateExternalConnectionOptions,\n  B2BSSOUpdateExternalConnectionResponse,\n  IHeadlessB2BSSOClient,\n  SSOAuthenticateOptions,\n  SSOAuthenticateResponse,\n  SSOStartOptions,\n} from '../../public';\nimport { StytchProjectConfigurationInput } from '../../public/typeConfig';\nimport { isTestPublicToken, logger, validate } from '../../utils';\n\ntype DynamicConfig = Promise<{\n  pkceRequiredForSso: boolean;\n}>;\ntype Config = {\n  publicToken: string;\n  testAPIURL: string;\n  liveAPIURL: string;\n};\n\nexport class HeadlessB2BSSOClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BSSOClient<TProjectConfiguration>\n{\n  constructor(\n    protected _networkClient: INetworkClient,\n    protected _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n    protected _pkceManager: IPKCEManager,\n    protected _dynamicConfig: DynamicConfig,\n    protected _config: Config,\n    protected dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  authenticate = this._subscriptionService.withUpdateSession(async (options: SSOAuthenticateOptions) => {\n    validate('stytch.sso.authenticate')\n      .isString('sso_token', options.sso_token)\n      .isNumber('session_duration_minutes', options.session_duration_minutes)\n      .isOptionalString('locale', options.locale);\n\n    const keyPair = await this._pkceManager.getPKPair();\n\n    if (!keyPair) {\n      logger.warn(\n        'No code verifier found in local storage for SSO flow.\\n' +\n          'Consider using stytch.sso.start() to add PKCE to your SSO flows for added security.\\n' +\n          'See https://stytch.com/docs/oauth#guides_pkce for more information.',\n      );\n    }\n\n    const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n    const resp = await this._networkClient.retriableFetchSDK<SSOAuthenticateResponse<TProjectConfiguration>>({\n      url: '/b2b/sso/authenticate',\n      method: 'POST',\n      body: {\n        pkce_code_verifier: keyPair?.code_verifier,\n        ...options,\n        dfp_telemetry_id,\n        captcha_token,\n        intermediate_session_token: this._subscriptionService.getIntermediateSessionToken() || undefined,\n      },\n      retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n    });\n\n    this._pkceManager.clearPKPair();\n\n    return resp;\n  });\n\n  protected async getBaseApiUrl() {\n    // Our TestAPIURL and LiveAPIURL should have the HTTPS protocol already attached\n    // Don't add it twice!\n    if (isTestPublicToken(this._config.publicToken)) {\n      return this._config.testAPIURL;\n    }\n    return this._config.liveAPIURL;\n  }\n\n  async start({ connection_id, login_redirect_url, signup_redirect_url }: SSOStartOptions): Promise<void> {\n    const { pkceRequiredForSso } = await this._dynamicConfig;\n    const baseURL = await this.getBaseApiUrl();\n\n    const startUrl = new URL(`${baseURL}/v1/public/sso/start`);\n    startUrl.searchParams.set('public_token', this._config.publicToken);\n    startUrl.searchParams.set('connection_id', connection_id);\n\n    if (pkceRequiredForSso) {\n      const keyPair = await this._pkceManager.startPKCETransaction();\n      startUrl.searchParams.set('pkce_code_challenge', keyPair.code_challenge);\n    } else {\n      this._pkceManager.clearPKPair();\n    }\n\n    if (login_redirect_url) startUrl.searchParams.set('login_redirect_url', login_redirect_url);\n    if (signup_redirect_url) startUrl.searchParams.set('signup_redirect_url', signup_redirect_url);\n\n    window.location.href = startUrl.toString();\n  }\n\n  async getConnections(): Promise<B2BSSOGetConnectionsResponse> {\n    return await this._networkClient.fetchSDK<B2BSSOGetConnectionsResponse>({\n      url: '/b2b/sso',\n      method: 'GET',\n    });\n  }\n\n  async discoverConnections(emailAddress: string): Promise<B2BSSODiscoverConnectionsResponse> {\n    return await this._networkClient.fetchSDK<B2BSSODiscoverConnectionsResponse>({\n      url: `/b2b/sso/discovery/connections?email_address=${encodeURIComponent(emailAddress)}`,\n      method: 'GET',\n    });\n  }\n\n  async deleteConnection(connectionId: string): Promise<B2BSSODeleteConnectionResponse> {\n    return this._networkClient.fetchSDK<B2BSSODeleteConnectionResponse>({\n      url: `/b2b/sso/${connectionId}`,\n      method: 'DELETE',\n    });\n  }\n\n  saml = {\n    createConnection: async (data: B2BSSOSAMLCreateConnectionOptions): Promise<B2BSSOSAMLCreateConnectionResponse> => {\n      return await this._networkClient.fetchSDK<B2BSSOSAMLCreateConnectionResponse>({\n        url: '/b2b/sso/saml',\n        method: 'POST',\n        body: data,\n      });\n    },\n    updateConnection: async (data: B2BSSOSAMLUpdateConnectionOptions): Promise<B2BSSOSAMLUpdateConnectionResponse> => {\n      return await this._networkClient.fetchSDK<B2BSSOSAMLUpdateConnectionResponse>({\n        url: `/b2b/sso/saml/${data.connection_id}`,\n        method: 'PUT',\n        body: data,\n      });\n    },\n    updateConnectionByURL: async (\n      data: B2BSSOSAMLUpdateConnectionByURLOptions,\n    ): Promise<B2BSSOSAMLUpdateConnectionByURLResponse> => {\n      return await this._networkClient.fetchSDK<B2BSSOSAMLUpdateConnectionResponse>({\n        url: `/b2b/sso/saml/${data.connection_id}/url`,\n        method: 'PUT',\n        body: data,\n      });\n    },\n    deleteVerificationCertificate: async (\n      data: B2BSSOSAMLDeleteVerificationCertificateOptions,\n    ): Promise<B2BSSOSAMLDeleteVerificationCertificateResponse> => {\n      return await this._networkClient.fetchSDK<B2BSSOSAMLDeleteVerificationCertificateResponse>({\n        url: `/b2b/sso/saml/${data.connection_id}/verification_certificates/${data.certificate_id}`,\n        method: 'DELETE',\n      });\n    },\n    deleteEncryptionPrivateKey: async (\n      data: B2BSSOSAMLDeleteEncryptionPrivateKeyOptions,\n    ): Promise<B2BSSOSAMLDeleteEncryptionPrivateKeyResponse> => {\n      return await this._networkClient.fetchSDK<B2BSSOSAMLDeleteEncryptionPrivateKeyResponse>({\n        url: `/b2b/sso/saml/${data.connection_id}/encryption_private_key/${data.private_key_id}`,\n        method: 'DELETE',\n      });\n    },\n  };\n\n  oidc = {\n    createConnection: async (data: B2BSSOOIDCCreateConnectionOptions): Promise<B2BSSOOIDCCreateConnectionResponse> => {\n      return await this._networkClient.fetchSDK<B2BSSOOIDCCreateConnectionResponse>({\n        url: '/b2b/sso/oidc',\n        method: 'POST',\n        body: data,\n      });\n    },\n    updateConnection: async (data: B2BSSOOIDCUpdateConnectionOptions): Promise<B2BSSOOIDCUpdateConnectionResponse> => {\n      return await this._networkClient.fetchSDK<B2BSSOOIDCUpdateConnectionResponse>({\n        url: `/b2b/sso/oidc/${data.connection_id}`,\n        method: 'PUT',\n        body: data,\n      });\n    },\n  };\n\n  external = {\n    createConnection: async (\n      data: B2BSSOCreateExternalConnectionOptions,\n    ): Promise<B2BSSOCreateExternalConnectionResponse> => {\n      return await this._networkClient.fetchSDK<B2BSSOCreateExternalConnectionResponse>({\n        url: '/b2b/sso/external',\n        method: 'POST',\n        body: data,\n      });\n    },\n    updateConnection: async (\n      data: B2BSSOUpdateExternalConnectionOptions,\n    ): Promise<B2BSSOUpdateExternalConnectionResponse> => {\n      return await this._networkClient.fetchSDK<B2BSSOUpdateExternalConnectionResponse>({\n        url: `/b2b/sso/external/${data.connection_id}`,\n        method: 'PUT',\n        body: data,\n      });\n    },\n  };\n}\n","import {\n  B2BSCIMCreateConnectionOptions,\n  B2BSCIMCreateConnectionResponse,\n  B2BSCIMDeleteConnectionResponse,\n  B2BSCIMGetConnectionGroupsOptions,\n  B2BSCIMGetConnectionGroupsResponse,\n  B2BSCIMGetConnectionResponse,\n  B2BSCIMRotateCancelResponse,\n  B2BSCIMRotateCompleteResponse,\n  B2BSCIMRotateStartResponse,\n  B2BSCIMUpdateConnectionOptions,\n  B2BSCIMUpdateConnectionResponse,\n  IHeadlessB2BSCIMClient,\n} from '../../public/b2b/scim';\nimport { IB2BSubscriptionService, INetworkClient } from '../..';\nimport { validate } from '../../utils';\nimport { StytchProjectConfigurationInput } from '../../public/typeConfig';\n\nexport class HeadlessB2BSCIMClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BSCIMClient\n{\n  constructor(\n    protected _networkClient: INetworkClient,\n    protected _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n  ) {}\n\n  async createConnection(data: B2BSCIMCreateConnectionOptions): Promise<B2BSCIMCreateConnectionResponse> {\n    validate('stytch.scim.createConnection')\n      .isOptionalString('display_name', data.display_name)\n      .isOptionalString('identity_provider', data.identity_provider);\n\n    return await this._networkClient.fetchSDK<B2BSCIMCreateConnectionResponse>({\n      url: '/b2b/scim',\n      method: 'POST',\n      body: data,\n    });\n  }\n\n  async updateConnection(data: B2BSCIMUpdateConnectionOptions): Promise<B2BSCIMUpdateConnectionResponse> {\n    validate('stytch.scim.updateConnection')\n      .isString('connection_id', data.connection_id)\n      .isOptionalString('display_name', data.display_name)\n      .isOptionalString('identity_provider', data.identity_provider);\n\n    return await this._networkClient.fetchSDK<B2BSCIMUpdateConnectionResponse>({\n      url: `/b2b/scim/${data.connection_id}`,\n      method: 'PUT',\n      body: data,\n    });\n  }\n\n  async deleteConnection(connectionId: string): Promise<B2BSCIMDeleteConnectionResponse> {\n    validate('stytch.scim.deleteConnection').isString('connection_id', connectionId);\n\n    return await this._networkClient.fetchSDK<B2BSCIMDeleteConnectionResponse>({\n      url: `/b2b/scim/${connectionId}`,\n      method: 'DELETE',\n    });\n  }\n\n  async getConnection(): Promise<B2BSCIMGetConnectionResponse> {\n    return await this._networkClient.fetchSDK<B2BSCIMGetConnectionResponse>({\n      url: '/b2b/scim',\n      method: 'GET',\n    });\n  }\n\n  async getConnectionGroups(data: B2BSCIMGetConnectionGroupsOptions): Promise<B2BSCIMGetConnectionGroupsResponse> {\n    validate('stytch.scim.getConnectionGroups')\n      .isOptionalNumber('limit', data.limit)\n      .isOptionalString('cursor', data.cursor);\n\n    return await this._networkClient.fetchSDK<B2BSCIMGetConnectionGroupsResponse>({\n      url: '/b2b/scim/groups',\n      method: 'POST',\n      body: data,\n    });\n  }\n\n  async rotateStart(connectionId: string): Promise<B2BSCIMRotateStartResponse> {\n    validate('stytch.scim.rotateStart').isString('connectionId', connectionId);\n    return await this._networkClient.fetchSDK<B2BSCIMRotateStartResponse>({\n      url: `/b2b/scim/rotate/start`,\n      method: 'POST',\n      body: { connection_id: connectionId },\n    });\n  }\n\n  async rotateComplete(connectionId: string): Promise<B2BSCIMRotateCompleteResponse> {\n    validate('stytch.scim.rotateComplete').isString('connectionId', connectionId);\n\n    return await this._networkClient.fetchSDK<B2BSCIMRotateCompleteResponse>({\n      url: `/b2b/scim/rotate/complete`,\n      method: 'POST',\n      body: { connection_id: connectionId },\n    });\n  }\n\n  async rotateCancel(connectionId: string): Promise<B2BSCIMRotateCancelResponse> {\n    validate('stytch.scim.rotateCancel').isString('connectionId', connectionId);\n\n    return await this._networkClient.fetchSDK<B2BSCIMRotateCancelResponse>({\n      url: `/b2b/scim/rotate/cancel`,\n      method: 'POST',\n      body: { connection_id: connectionId },\n    });\n  }\n}\n","import { INetworkClient } from '../../NetworkClient';\nimport { IB2BSubscriptionService } from '../../SubscriptionService';\nimport { validate } from '../../utils';\nimport {\n  ResponseCommon,\n  Organization,\n  IHeadlessB2BOrganizationClient,\n  B2BOrganizationsUpdateResponse,\n  B2BOrganizationsUpdateOptions,\n  B2BOrganizationsDeleteResponse,\n  B2BOrganizationsMembersCreateOptions,\n  B2BOrganizationsMembersCreateResponse,\n  B2BOrganizationsMembersDeleteResponse,\n  B2BOrganizationsMembersReactivateResponse,\n  B2BOrganizationsMemberDeletePasswordResponse,\n  B2BOrganizationsMemberDeleteMFAPhoneNumberResponse,\n  B2BOrganizationsMembersUpdateOptions,\n  B2BOrganizationsMembersUpdateResponse,\n  B2BOrganizationsMembersSearchResponse,\n  B2BOrganizationsMembersSearchOptions,\n  B2BOrganizationsMemberDeleteMFATOTPResponse,\n  OrganizationInfo,\n  B2BOrganizationsGetBySlugResponse,\n  B2BOrganizationsGetBySlugOptions,\n  B2BOrganizationsMemberUnlinkRetiredEmailOptions,\n  B2BOrganizationsMemberUnlinkRetiredEmailResponse,\n  B2BOrganizationsMemberStartEmailUpdateOptions,\n  B2BOrganizationsMemberStartEmailUpdateResponse,\n  StytchProjectConfigurationInput,\n  MemberResponseCommon,\n  B2BOrganizationsGetConnectedAppsResponse,\n  B2BOrganizationsGetConnectedAppResponse,\n  B2BOrganizationsGetConnectedAppOptions,\n  B2BOrganizationsMemberGetConnectedAppsOptions,\n  B2BOrganizationsMemberGetConnectedAppsResponse,\n  B2BOrganizationsMemberRevokeConnectedAppOptions,\n  B2BOrganizationsMemberRevokeConnectedAppResponse,\n} from '../../public';\n\nexport class HeadlessB2BOrganizationClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BOrganizationClient\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _apiNetworkClient: INetworkClient,\n    private _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n  ) {}\n\n  get = async (): Promise<Organization | null> => {\n    const resp = await this._networkClient.fetchSDK<{ organization: Organization } & ResponseCommon>({\n      url: `/b2b/organizations/me`,\n      method: 'GET',\n    });\n    this._subscriptionService.updateOrganization(resp.organization);\n    return resp.organization;\n  };\n\n  getSync = (): Organization | null => {\n    return this._subscriptionService.getOrganization();\n  };\n\n  getInfo = (): OrganizationInfo => ({\n    organization: this.getSync(),\n    fromCache: this._subscriptionService.getFromCache(),\n  });\n\n  onChange = (callback: (organization: Organization | null) => void) => {\n    return this._subscriptionService.subscribeToState((state) => callback(state?.organization ?? null));\n  };\n\n  update = async (data: B2BOrganizationsUpdateOptions): Promise<B2BOrganizationsUpdateResponse> => {\n    const resp = await this._networkClient.fetchSDK<B2BOrganizationsUpdateResponse>({\n      url: `/b2b/organizations/me`,\n      method: 'PUT',\n      body: data,\n    });\n\n    this._subscriptionService.updateOrganization(resp.organization);\n    return resp;\n  };\n\n  delete = async (): Promise<B2BOrganizationsDeleteResponse> => {\n    const resp = await this._networkClient.fetchSDK<B2BOrganizationsDeleteResponse>({\n      url: `/b2b/organizations/me`,\n      method: 'DELETE',\n    });\n\n    this._subscriptionService.destroyState();\n\n    return resp;\n  };\n\n  getBySlug = async (data: B2BOrganizationsGetBySlugOptions): Promise<B2BOrganizationsGetBySlugResponse> => {\n    validate('stytch.organization.getBySlug').isString('organization_slug', data.organization_slug);\n\n    return this._networkClient.fetchSDK<B2BOrganizationsGetBySlugResponse>({\n      url: `/b2b/organizations/search`,\n      method: 'POST',\n      body: data,\n    });\n  };\n\n  getConnectedApps = async (): Promise<B2BOrganizationsGetConnectedAppsResponse> => {\n    return this._networkClient.fetchSDK<B2BOrganizationsGetConnectedAppsResponse>({\n      url: '/b2b/organizations/connected_apps',\n      method: 'GET',\n    });\n  };\n\n  getConnectedApp = async (\n    data: B2BOrganizationsGetConnectedAppOptions,\n  ): Promise<B2BOrganizationsGetConnectedAppResponse> => {\n    return this._networkClient.fetchSDK<B2BOrganizationsGetConnectedAppResponse>({\n      url: `/b2b/organizations/connected_apps/${data.connected_app_id}`,\n      method: 'GET',\n    });\n  };\n\n  members = {\n    create: async (data: B2BOrganizationsMembersCreateOptions): Promise<B2BOrganizationsMembersCreateResponse> => {\n      return this._networkClient.fetchSDK<B2BOrganizationsMembersCreateResponse>({\n        url: `/b2b/organizations/members`,\n        method: 'POST',\n        body: data,\n      });\n    },\n    search: async (data: B2BOrganizationsMembersSearchOptions): Promise<B2BOrganizationsMembersSearchResponse> => {\n      return this._networkClient.fetchSDK<B2BOrganizationsMembersSearchResponse>({\n        url: `/b2b/organizations/me/members/search`,\n        method: 'POST',\n        body: data,\n      });\n    },\n    update: async (data: B2BOrganizationsMembersUpdateOptions): Promise<B2BOrganizationsMembersUpdateResponse> => {\n      const response = await this._networkClient.fetchSDK<B2BOrganizationsMembersUpdateResponse>({\n        url: `/b2b/organizations/members/${data.member_id}`,\n        method: 'PUT',\n        body: data,\n      });\n\n      this.updateMemberIfSelf(response);\n      return response;\n    },\n    deletePassword: async (passwordId: string): Promise<B2BOrganizationsMemberDeletePasswordResponse> => {\n      const response = await this._networkClient.fetchSDK<B2BOrganizationsMemberDeletePasswordResponse>({\n        url: `/b2b/organizations/members/passwords/${passwordId}`,\n        method: 'DELETE',\n      });\n\n      this.updateMemberIfSelf(response);\n      return response;\n    },\n    deleteMFAPhoneNumber: async (memberId: string): Promise<B2BOrganizationsMemberDeleteMFAPhoneNumberResponse> => {\n      const response = await this._networkClient.fetchSDK<B2BOrganizationsMemberDeleteMFAPhoneNumberResponse>({\n        url: `/b2b/organizations/members/mfa_phone_numbers/${memberId}`,\n        method: 'DELETE',\n      });\n\n      this.updateMemberIfSelf(response);\n      return response;\n    },\n    deleteMFATOTP: async (memberId: string): Promise<B2BOrganizationsMemberDeleteMFATOTPResponse> => {\n      const response = await this._networkClient.fetchSDK<B2BOrganizationsMemberDeleteMFATOTPResponse>({\n        url: `/b2b/organizations/members/totp/${memberId}`,\n        method: 'DELETE',\n      });\n\n      this.updateMemberIfSelf(response);\n      return response;\n    },\n    delete: async (memberId: string): Promise<B2BOrganizationsMembersDeleteResponse> => {\n      const response = await this._networkClient.fetchSDK<B2BOrganizationsMembersDeleteResponse>({\n        url: `/b2b/organizations/members/${memberId}`,\n        method: 'DELETE',\n      });\n\n      if (memberId === this._subscriptionService.getMember()?.member_id) {\n        this._subscriptionService.destroyState();\n      }\n\n      return response;\n    },\n    reactivate: async (memberId: string): Promise<B2BOrganizationsMembersReactivateResponse> => {\n      return this._networkClient.fetchSDK<B2BOrganizationsMembersReactivateResponse>({\n        url: `/b2b/organizations/members/${memberId}/reactivate`,\n        method: 'PUT',\n      });\n    },\n    unlinkRetiredEmail: async (\n      data: B2BOrganizationsMemberUnlinkRetiredEmailOptions,\n    ): Promise<B2BOrganizationsMemberUnlinkRetiredEmailResponse> => {\n      const { member_id, ...body } = data;\n      const response = await this._apiNetworkClient.fetchSDK<B2BOrganizationsMemberUnlinkRetiredEmailResponse>({\n        url: `/b2b/organizations/members/${member_id}/unlink_retired_email`,\n        method: 'POST',\n        body,\n      });\n\n      this.updateMemberIfSelf(response);\n      return response;\n    },\n    startEmailUpdate: async (\n      data: B2BOrganizationsMemberStartEmailUpdateOptions,\n    ): Promise<B2BOrganizationsMemberStartEmailUpdateResponse> => {\n      const { member_id, ...body } = data;\n      const response = await this._apiNetworkClient.fetchSDK<B2BOrganizationsMemberStartEmailUpdateResponse>({\n        url: `/b2b/organizations/members/${member_id}/start_email_update`,\n        method: 'POST',\n        body,\n      });\n\n      this.updateMemberIfSelf(response);\n      return response;\n    },\n    getConnectedApps: async (\n      data: B2BOrganizationsMemberGetConnectedAppsOptions,\n    ): Promise<B2BOrganizationsMemberGetConnectedAppsResponse> => {\n      return this._networkClient.fetchSDK<B2BOrganizationsMemberGetConnectedAppsResponse>({\n        url: `b2b/organizations/members/${data.member_id}/connected_apps`,\n        method: 'GET',\n      });\n    },\n    revokeConnectedApp: async (\n      data: B2BOrganizationsMemberRevokeConnectedAppOptions,\n    ): Promise<B2BOrganizationsMemberRevokeConnectedAppResponse> => {\n      return this._networkClient.fetchSDK<B2BOrganizationsMemberRevokeConnectedAppResponse>({\n        url: `/b2b/organizations/members/${data.member_id}/connected_apps/${data.connected_app_id}/revoke`,\n        method: 'POST',\n      });\n    },\n  };\n\n  private updateMemberIfSelf = (response: MemberResponseCommon) => {\n    if (response.member_id === this._subscriptionService.getMember()?.member_id) {\n      this._subscriptionService.updateMember(response.member);\n    }\n  };\n}\n","import { IB2BSubscriptionService, IDFPProtectedAuthProvider, INetworkClient, IPKCEManager } from '../..';\nimport { StytchProjectConfigurationInput } from '../../public/typeConfig';\nimport {\n  B2BOAuthAuthenticateOptions,\n  B2BOAuthAuthenticateResponse,\n  B2BOAuthDiscoveryAuthenticateResponse,\n  B2BOAuthDiscoveryStartOptions,\n  IHeadlessB2BOAuthClient,\n  OAuthDiscoveryAuthenticateOptions,\n  OAuthStartOptions,\n} from '../../public/b2b/oauth';\nimport { B2BOAuthProviders } from '../../public/b2b/ui';\nimport { isTestPublicToken, logger, validate } from '../../utils';\n\ntype DynamicConfig = Promise<{\n  cnameDomain: null | string;\n  pkceRequiredForOAuth: boolean;\n}>;\ntype Config = {\n  publicToken: string;\n  testAPIURL: string;\n  liveAPIURL: string;\n};\n\nexport class HeadlessB2BOAuthClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BOAuthClient<TProjectConfiguration>\n{\n  constructor(\n    protected _networkClient: INetworkClient,\n    protected _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n    protected _pkceManager: IPKCEManager,\n    protected _dynamicConfig: DynamicConfig,\n    protected _config: Config,\n    protected dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  authenticate = this._subscriptionService.withUpdateSession(async (options: B2BOAuthAuthenticateOptions) => {\n    validate('stytch.oauth.authenticate')\n      .isString('oauth_token', options.oauth_token)\n      .isNumber('session_duration_minutes', options.session_duration_minutes)\n      .isOptionalString('locale', options.locale);\n\n    const keyPair = await this._pkceManager.getPKPair();\n\n    if (!keyPair) {\n      logger.warn(\n        'No code verifier found in local storage for OAuth flow.\\n' +\n          'Consider using stytch.oauth.$provider.start() to add PKCE to your OAuth flows for added security.\\n' +\n          'See https://stytch.com/docs/oauth#guides_pkce for more information.',\n      );\n    }\n\n    const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n    const resp = await this._networkClient.retriableFetchSDK<B2BOAuthAuthenticateResponse<TProjectConfiguration>>({\n      url: '/b2b/oauth/authenticate',\n      method: 'POST',\n      body: {\n        pkce_code_verifier: keyPair?.code_verifier,\n        dfp_telemetry_id,\n        captcha_token,\n        intermediate_session_token: (await this._subscriptionService.getIntermediateSessionToken()) || undefined,\n        ...options,\n      },\n      retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n    });\n\n    this._pkceManager.clearPKPair();\n\n    return resp;\n  });\n\n  protected async getBaseApiUrl() {\n    const { cnameDomain } = await this._dynamicConfig;\n    if (cnameDomain) {\n      // The API returns cname domains without a protocol - assume HTTPS\n      return `https://${cnameDomain}`;\n    }\n    // Our TestAPIURL and LiveAPIURL should have the HTTPS protocol already attached\n    // Don't add it twice!\n    if (isTestPublicToken(this._config.publicToken)) {\n      return this._config.testAPIURL;\n    }\n    return this._config.liveAPIURL;\n  }\n\n  protected startOAuthFlow(providerType: B2BOAuthProviders) {\n    return async ({\n      organization_id,\n      organization_slug,\n      login_redirect_url,\n      signup_redirect_url,\n      custom_scopes,\n      provider_params,\n    }: OAuthStartOptions): Promise<void> => {\n      const { pkceRequiredForOAuth } = await this._dynamicConfig;\n      const baseURL = await this.getBaseApiUrl();\n\n      const startUrl = new URL(`${baseURL}/v1/b2b/public/oauth/${providerType}/start`);\n      startUrl.searchParams.set('public_token', this._config.publicToken);\n      if (organization_id && organization_id != '') {\n        startUrl.searchParams.set('organization_id', organization_id);\n      }\n\n      if (organization_slug && organization_slug != '') {\n        startUrl.searchParams.set('slug', organization_slug);\n      }\n\n      if (custom_scopes) {\n        validate('startOAuthFlow').isStringArray('custom_scopes', custom_scopes);\n        startUrl.searchParams.set('custom_scopes', custom_scopes.join(' '));\n      }\n      if (provider_params) {\n        validate('startOAuthFlow').isOptionalObject('provider_params', provider_params);\n        for (const key in provider_params) {\n          startUrl.searchParams.set('provider_' + key, provider_params[key]);\n        }\n      }\n\n      if (pkceRequiredForOAuth) {\n        const keyPair = await this._pkceManager.startPKCETransaction();\n        startUrl.searchParams.set('pkce_code_challenge', keyPair.code_challenge);\n      } else {\n        this._pkceManager.clearPKPair();\n      }\n\n      if (login_redirect_url) startUrl.searchParams.set('login_redirect_url', login_redirect_url);\n      if (signup_redirect_url) startUrl.searchParams.set('signup_redirect_url', signup_redirect_url);\n\n      window.location.href = startUrl.toString();\n    };\n  }\n\n  protected startDiscoveryOAuthFlow(providerType: B2BOAuthProviders) {\n    return async ({\n      discovery_redirect_url,\n      custom_scopes,\n      provider_params,\n    }: B2BOAuthDiscoveryStartOptions): Promise<void> => {\n      const { pkceRequiredForOAuth } = await this._dynamicConfig;\n      const baseURL = await this.getBaseApiUrl();\n\n      const startUrl = new URL(`${baseURL}/v1/b2b/public/oauth/${providerType}/discovery/start`);\n      startUrl.searchParams.set('public_token', this._config.publicToken);\n      if (custom_scopes) {\n        validate('startOAuthFlow').isStringArray('custom_scopes', custom_scopes);\n        startUrl.searchParams.set('custom_scopes', custom_scopes.join(' '));\n      }\n      if (provider_params) {\n        validate('startOAuthFlow').isOptionalObject('provider_params', provider_params);\n        for (const key in provider_params) {\n          startUrl.searchParams.set('provider_' + key, provider_params[key]);\n        }\n      }\n\n      if (pkceRequiredForOAuth) {\n        const keyPair = await this._pkceManager.startPKCETransaction();\n        startUrl.searchParams.set('pkce_code_challenge', keyPair.code_challenge);\n      } else {\n        this._pkceManager.clearPKPair();\n      }\n\n      if (discovery_redirect_url) {\n        startUrl.searchParams.set('discovery_redirect_url', discovery_redirect_url);\n      }\n\n      window.location.href = startUrl.toString();\n    };\n  }\n\n  discovery = {\n    authenticate: this._subscriptionService.withUpdateSession(\n      async (\n        data: OAuthDiscoveryAuthenticateOptions,\n      ): Promise<B2BOAuthDiscoveryAuthenticateResponse<TProjectConfiguration>> => {\n        validate('stytch.oauth.discovery.authenticate').isString('discovery_oauth_token', data.discovery_oauth_token);\n\n        const pkPair = await this._pkceManager.getPKPair();\n\n        const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n        const requestBody = {\n          pkce_code_verifier: pkPair?.code_verifier,\n          dfp_telemetry_id,\n          captcha_token,\n          ...data,\n        };\n        const resp = await this._networkClient.retriableFetchSDK<\n          B2BOAuthDiscoveryAuthenticateResponse<TProjectConfiguration>\n        >({\n          url: '/b2b/oauth/discovery/authenticate',\n          body: requestBody,\n          method: 'POST',\n          retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n        });\n\n        this._pkceManager.clearPKPair();\n\n        return resp;\n      },\n    ),\n  };\n\n  google = {\n    start: this.startOAuthFlow(B2BOAuthProviders.Google),\n    discovery: {\n      start: this.startDiscoveryOAuthFlow(B2BOAuthProviders.Google),\n    },\n  };\n\n  microsoft = {\n    start: this.startOAuthFlow(B2BOAuthProviders.Microsoft),\n    discovery: {\n      start: this.startDiscoveryOAuthFlow(B2BOAuthProviders.Microsoft),\n    },\n  };\n\n  hubspot = {\n    start: this.startOAuthFlow(B2BOAuthProviders.HubSpot),\n    discovery: {\n      start: this.startDiscoveryOAuthFlow(B2BOAuthProviders.HubSpot),\n    },\n  };\n\n  slack = {\n    start: this.startOAuthFlow(B2BOAuthProviders.Slack),\n    discovery: {\n      start: this.startDiscoveryOAuthFlow(B2BOAuthProviders.Slack),\n    },\n  };\n\n  github = {\n    start: this.startOAuthFlow(B2BOAuthProviders.GitHub),\n    discovery: {\n      start: this.startDiscoveryOAuthFlow(B2BOAuthProviders.GitHub),\n    },\n  };\n}\n","import {\n  IHeadlessB2BSessionClient,\n  B2BSessionOnChangeCallback,\n  SessionRevokeResponse,\n  SessionAuthenticateOptions,\n  B2BSessionAuthenticateResponse,\n  B2BSessionRevokeOptions,\n  SessionTokensUpdate,\n  UNRECOVERABLE_ERROR_TYPES,\n  B2BSessionExchangeOptions,\n  B2BSessionExchangeResponse,\n  MemberSessionInfo,\n  StytchProjectConfigurationInput,\n  SessionTokens,\n  B2BSessionAccessTokenExchangeOptions,\n  B2BSessionAccessTokenExchangeResponse,\n  B2BSessionAttestResponse,\n  B2BSessionAttestOptions,\n} from '../../public';\nimport { validate } from '../../utils';\nimport { INetworkClient, IB2BSubscriptionService, IfOpaqueTokens, ExtractOpaqueTokens } from '../..';\n\nexport class HeadlessB2BSessionClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BSessionClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n  ) {}\n\n  getSync = () => {\n    return this._subscriptionService.getSession();\n  };\n\n  getInfo = (): MemberSessionInfo => ({\n    session: this.getSync(),\n    fromCache: this._subscriptionService.getFromCache(),\n  });\n\n  onChange = (callback: B2BSessionOnChangeCallback) => {\n    return this._subscriptionService.subscribeToState((state) => callback(state?.session ?? null));\n  };\n\n  revoke = async (options?: B2BSessionRevokeOptions) => {\n    /**\n     * Revoke destroys the local state if the API request is successful\n     * or if we return an unrecoverable error (user is unauthenticated)\n     * or if the developer passes in a forceClear option.\n     * If the API request returns a recoverable error (the user is offline),\n     * we do not destroy the local state to let the developer manually add retry\n     * logic to call revoke again.\n     */\n    try {\n      const resp = await this._networkClient.fetchSDK<SessionRevokeResponse>({\n        url: `/b2b/sessions/revoke`,\n        method: 'POST',\n      });\n\n      this._subscriptionService.destroyState();\n\n      return resp;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } catch (error: any) {\n      if (options?.forceClear) {\n        this._subscriptionService.destroyState();\n      } else if (UNRECOVERABLE_ERROR_TYPES.includes(error.error_type)) {\n        this._subscriptionService.destroyState();\n      }\n      throw error;\n    }\n  };\n\n  revokeForMember = async (options: { member_id: string }) => {\n    validate('stytch.session.revokeForMember').isString('member_id', options.member_id);\n\n    return await this._networkClient.fetchSDK<SessionRevokeResponse>({\n      url: `/b2b/sessions/revoke/${options.member_id}`,\n      method: 'POST',\n    });\n  };\n\n  private _authenticate = async (\n    options?: SessionAuthenticateOptions,\n  ): Promise<B2BSessionAuthenticateResponse<TProjectConfiguration>> => {\n    const initialSession = this._subscriptionService.getSession();\n    const isSessionStale = () =>\n      initialSession?.member_session_id !== this._subscriptionService.getSession()?.member_session_id;\n\n    try {\n      const requestBody = {\n        session_duration_minutes: options?.session_duration_minutes,\n      };\n      const resp = await this._networkClient.fetchSDK<B2BSessionAuthenticateResponse<TProjectConfiguration>>({\n        url: '/b2b/sessions/authenticate',\n        body: requestBody,\n        method: 'POST',\n      });\n\n      if (isSessionStale()) {\n        // [SDK-1336] The session was updated out from under us while the\n        // request was in flight; discard the response and retry\n        return this._authenticate(options);\n      }\n\n      return resp;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } catch (error: any) {\n      if (isSessionStale()) {\n        // [SDK-1336] The session was updated out from under us while the\n        // request was in flight; discard the response and retry\n        return this._authenticate(options);\n      }\n\n      if (UNRECOVERABLE_ERROR_TYPES.includes(error.error_type)) {\n        this._subscriptionService.destroySession();\n      }\n      throw error;\n    }\n  };\n\n  authenticate = this._subscriptionService.withUpdateSession(this._authenticate);\n\n  getTokens() {\n    return this._subscriptionService.getTokens() as IfOpaqueTokens<\n      ExtractOpaqueTokens<TProjectConfiguration>,\n      never,\n      SessionTokens | null\n    >;\n  }\n\n  updateSession(tokens: SessionTokensUpdate): void {\n    validate('stytch.session.updateSession')\n      .isString('session_token', tokens.session_token)\n      .isOptionalString('session_jwt', tokens.session_jwt ?? undefined);\n    this._subscriptionService.updateTokens(tokens);\n  }\n\n  exchange = this._subscriptionService.withUpdateSession(async (data: B2BSessionExchangeOptions) => {\n    validate('stytch.session.exchange')\n      .isString('organization_id', data.organization_id)\n      .isNumber('session_duration_minutes', data.session_duration_minutes)\n      .isOptionalString('locale', data.locale);\n\n    return this._networkClient.fetchSDK<B2BSessionExchangeResponse<TProjectConfiguration>>({\n      url: '/b2b/sessions/exchange',\n      body: data,\n      method: 'POST',\n    });\n  });\n\n  exchangeAccessToken = this._subscriptionService.withUpdateSession(\n    async (data: B2BSessionAccessTokenExchangeOptions) => {\n      validate('stytch.session.exchange')\n        .isString('organization_id', data.access_token)\n        .isNumber('session_duration_minutes', data.session_duration_minutes);\n      return this._networkClient.fetchSDK<B2BSessionAccessTokenExchangeResponse<TProjectConfiguration>>({\n        url: '/b2b/sessions/exchange_access_token',\n        body: data,\n        method: 'POST',\n      });\n    },\n  );\n\n  attest = this._subscriptionService.withUpdateSession(async (data: B2BSessionAttestOptions) => {\n    validate('stytch.session.attest')\n      .isOptionalString('organization_id', data.organization_id)\n      .isString('profile_id', data.profile_id)\n      .isString('token', data.token)\n      .isOptionalNumber('session_duration_minutes', data.session_duration_minutes);\n\n    return this._networkClient.fetchSDK<B2BSessionAttestResponse<TProjectConfiguration>>({\n      url: '/b2b/sessions/attest',\n      body: data,\n      method: 'POST',\n    });\n  });\n}\n","import {\n  B2BDiscoveryIntermediateSessionsExchangeOptions,\n  B2BDiscoveryIntermediateSessionsExchangeResponse,\n  B2BDiscoveryOrganizationsCreateOptions,\n  B2BDiscoveryOrganizationsCreateResponse,\n  B2BDiscoveryOrganizationsResponse,\n  IHeadlessB2BDiscoveryClient,\n  StytchProjectConfigurationInput,\n} from '../../public';\nimport { INetworkClient } from '../..';\nimport { validate } from '../../utils';\nimport { IB2BSubscriptionService } from '../..';\n\nexport class HeadlessB2BDiscoveryClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BDiscoveryClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n  ) {}\n\n  organizations = {\n    list: async (): Promise<B2BDiscoveryOrganizationsResponse> => {\n      return this._networkClient.fetchSDK<B2BDiscoveryOrganizationsResponse>({\n        url: '/b2b/discovery/organizations',\n        body: {\n          intermediate_session_token: (await this._subscriptionService.getIntermediateSessionToken()) || undefined,\n        },\n        method: 'POST',\n      });\n    },\n    create: this._subscriptionService.withUpdateSession(\n      async (\n        data: B2BDiscoveryOrganizationsCreateOptions,\n      ): Promise<B2BDiscoveryOrganizationsCreateResponse<TProjectConfiguration>> => {\n        validate('stytch.discovery.organizations.create')\n          .isNumber('session_duration_minutes', data.session_duration_minutes)\n          .isOptionalString('organization_name', data.organization_name)\n          .isOptionalString('organization_slug', data.organization_slug)\n          .isOptionalString('organization_logo_url', data.organization_logo_url)\n          .isOptionalString('sso_jit_provisioning', data.sso_jit_provisioning)\n          .isOptionalStringArray('email_allowed_domains', data.email_allowed_domains)\n          .isOptionalString('email_invites', data.email_invites)\n          .isOptionalString('auth_methods', data.auth_methods)\n          .isOptionalStringArray('allowed_auth_methods', data.allowed_auth_methods)\n          .isOptionalString('mfa_policy', data.mfa_policy);\n\n        const requestBody = {\n          ...data,\n          intermediate_session_token: (await this._subscriptionService.getIntermediateSessionToken()) || undefined,\n        };\n\n        return this._networkClient.fetchSDK<B2BDiscoveryOrganizationsCreateResponse<TProjectConfiguration>>({\n          url: '/b2b/discovery/organizations/create',\n          body: requestBody,\n          method: 'POST',\n        });\n      },\n    ),\n  };\n\n  intermediateSessions = {\n    exchange: this._subscriptionService.withUpdateSession(\n      async (\n        data: B2BDiscoveryIntermediateSessionsExchangeOptions,\n      ): Promise<B2BDiscoveryIntermediateSessionsExchangeResponse<TProjectConfiguration>> => {\n        validate('stytch.discovery.intermediateSessions.exchange')\n          .isString('organization_id', data.organization_id)\n          .isNumber('session_duration_minutes', data.session_duration_minutes)\n          .isOptionalString('locale', data.locale);\n\n        const requestBody = {\n          ...data,\n          intermediate_session_token: this._subscriptionService.getIntermediateSessionToken() || undefined,\n        };\n        return this._networkClient.fetchSDK<B2BDiscoveryIntermediateSessionsExchangeResponse<TProjectConfiguration>>({\n          url: '/b2b/discovery/intermediate_sessions/exchange',\n          body: requestBody,\n          method: 'POST',\n        });\n      },\n    ),\n  };\n}\n","import { IDFPProtectedAuthProvider } from '../../DFPProtectedAuthProvider';\nimport { INetworkClient } from '../../NetworkClient';\nimport { IPKCEManager } from '../../PKCEManager';\nimport { IB2BSubscriptionService } from '../../SubscriptionService';\nimport { validate } from '../../utils';\nimport { StytchProjectConfigurationInput } from '../../public/typeConfig';\nimport {\n  B2BPasswordDiscoveryResetByEmailStartOptions,\n  B2BPasswordDiscoveryResetByEmailStartResponse,\n  B2BPasswordDiscoveryResetByEmailOptions,\n  B2BPasswordDiscoveryResetByEmailResponse,\n  B2BPasswordAuthenticateOptions,\n  B2BPasswordAuthenticateResponse,\n  B2BPasswordResetByEmailOptions,\n  B2BPasswordResetByEmailResponse,\n  B2BPasswordResetByEmailStartOptions,\n  B2BPasswordResetByEmailStartResponse,\n  B2BPasswordResetByExistingPasswordOptions,\n  B2BPasswordResetByExistingPasswordResponse,\n  B2BPasswordResetBySessionOptions,\n  B2BPasswordResetBySessionResponse,\n  B2BPasswordStrengthCheckOptions,\n  B2BPasswordStrengthCheckResponse,\n  IHeadlessB2BPasswordClient,\n  B2BPasswordDiscoveryAuthenticateOptions,\n  B2BPasswordDiscoveryAuthenticateResponse,\n} from '../../public/b2b/passwords';\n\ntype DynamicConfig = Promise<{\n  pkceRequiredForPasswordResets: boolean;\n}>;\n\nconst DefaultDynamicConfig = Promise.resolve({\n  pkceRequiredForPasswordResets: false,\n});\n\nexport class HeadlessB2BPasswordsClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BPasswordClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n    private _pkceManager: IPKCEManager,\n    private _config: DynamicConfig = DefaultDynamicConfig,\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  private async getCodeChallenge(): Promise<string | undefined> {\n    const { pkceRequiredForPasswordResets } = await this._config;\n    if (!pkceRequiredForPasswordResets) {\n      return undefined;\n    }\n    let keyPair = await this._pkceManager.getPKPair();\n    if (keyPair) {\n      return keyPair.code_challenge;\n    }\n    keyPair = await this._pkceManager.startPKCETransaction();\n    return keyPair.code_challenge;\n  }\n\n  authenticate = this._subscriptionService.withUpdateSession(\n    async (\n      options: B2BPasswordAuthenticateOptions,\n    ): Promise<B2BPasswordAuthenticateResponse<TProjectConfiguration>> => {\n      validate('stytch.passwords.authenticate')\n        .isString('org_id', options.organization_id)\n        .isString('password', options.password)\n        .isString('email_address', options.email_address)\n        .isNumber('session_duration_minutes', options.session_duration_minutes)\n        .isOptionalString('locale', options.locale);\n\n      const pkPair = await this._pkceManager.getPKPair();\n      const code_verifier = pkPair?.code_verifier;\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      return this._networkClient.retriableFetchSDK<B2BPasswordAuthenticateResponse<TProjectConfiguration>>({\n        url: '/b2b/passwords/authenticate',\n        method: 'POST',\n        body: {\n          organization_id: options.organization_id,\n          email_address: options.email_address,\n          password: options.password,\n          session_duration_minutes: options.session_duration_minutes,\n          locale: options.locale,\n          captcha_token,\n          dfp_telemetry_id,\n          code_verifier,\n          intermediate_session_token: this._subscriptionService.getIntermediateSessionToken() || undefined,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n  );\n\n  async resetByEmailStart(options: B2BPasswordResetByEmailStartOptions): Promise<B2BPasswordResetByEmailStartResponse> {\n    validate('stytch.passwords.resetByEmailStart')\n      .isString('email', options.email_address)\n      .isOptionalString('login_redirect_url', options.login_redirect_url)\n      .isOptionalString('reset_password_redirect_url', options.reset_password_redirect_url)\n      .isOptionalString('reset_password_template_id', options.reset_password_template_id)\n      .isOptionalNumber('reset_password_expiration_minutes', options.reset_password_expiration_minutes)\n      .isOptionalString('verify_email_template_id', options.verify_email_template_id)\n      .isOptionalString('locale', options.locale);\n\n    const code_challenge = await this.getCodeChallenge();\n    const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n    return this._networkClient.retriableFetchSDK<B2BPasswordResetByEmailStartResponse>({\n      url: '/b2b/passwords/email/reset/start',\n      method: 'POST',\n      body: {\n        organization_id: options.organization_id,\n        email_address: options.email_address,\n        login_redirect_url: options.login_redirect_url,\n        reset_password_redirect_url: options.reset_password_redirect_url,\n        reset_password_expiration_minutes: options.reset_password_expiration_minutes,\n        reset_password_template_id: options.reset_password_template_id,\n        verify_email_template_id: options.verify_email_template_id,\n        locale: options.locale,\n        code_challenge,\n        captcha_token,\n        dfp_telemetry_id,\n      },\n      retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n    });\n  }\n\n  discovery = {\n    resetByEmailStart: async (\n      options: B2BPasswordDiscoveryResetByEmailStartOptions,\n    ): Promise<B2BPasswordDiscoveryResetByEmailStartResponse> => {\n      validate('stytch.passwords.discovery.resetByEmailStart')\n        .isString('email', options.email_address)\n        .isOptionalString('login_redirect_url', options.discovery_redirect_url)\n        .isOptionalString('reset_password_redirect_url', options.reset_password_redirect_url)\n        .isOptionalString('reset_password_template_id', options.reset_password_template_id)\n        .isOptionalNumber('reset_password_expiration_minutes', options.reset_password_expiration_minutes)\n        .isOptionalString('verify_email_template_id', options.verify_email_template_id)\n        .isOptionalString('locale', options.locale);\n\n      const pkce_code_challenge = await this.getCodeChallenge();\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      return this._networkClient.retriableFetchSDK<B2BPasswordDiscoveryResetByEmailStartResponse>({\n        url: '/b2b/passwords/discovery/reset/start',\n        method: 'POST',\n        body: {\n          email_address: options.email_address,\n          discovery_redirect_url: options.discovery_redirect_url,\n          reset_password_redirect_url: options.reset_password_redirect_url,\n          reset_password_expiration_minutes: options.reset_password_expiration_minutes,\n          reset_password_template_id: options.reset_password_template_id,\n          verify_email_template_id: options.verify_email_template_id,\n          locale: options.locale,\n          pkce_code_challenge,\n          captcha_token,\n          dfp_telemetry_id,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n    resetByEmail: this._subscriptionService.withUpdateSession(\n      async (\n        options: B2BPasswordDiscoveryResetByEmailOptions,\n      ): Promise<B2BPasswordDiscoveryResetByEmailResponse<TProjectConfiguration>> => {\n        validate('stytch.passwords.discovery.resetByEmail')\n          .isString('password_reset_token', options.password_reset_token)\n          .isString('password', options.password);\n\n        const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n        const pkPair = await this._pkceManager.getPKPair();\n        const pkce_code_verifier = pkPair?.code_verifier;\n\n        const resp = await this._networkClient.retriableFetchSDK<\n          B2BPasswordDiscoveryResetByEmailResponse<TProjectConfiguration>\n        >({\n          url: '/b2b/passwords/discovery/reset',\n          method: 'POST',\n          body: {\n            password_reset_token: options.password_reset_token,\n            password: options.password,\n            captcha_token,\n            dfp_telemetry_id,\n            pkce_code_verifier,\n            intermediate_session_token: (await this._subscriptionService.getIntermediateSessionToken()) || undefined,\n          },\n          retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n        });\n\n        this._pkceManager.clearPKPair();\n\n        return resp;\n      },\n    ),\n\n    authenticate: this._subscriptionService.withUpdateSession(\n      async (\n        options: B2BPasswordDiscoveryAuthenticateOptions,\n      ): Promise<B2BPasswordDiscoveryAuthenticateResponse<TProjectConfiguration>> => {\n        validate('stytch.passwords.discovery.authenticate')\n          .isString('password', options.password)\n          .isString('email_address', options.email_address);\n\n        const pkPair = await this._pkceManager.getPKPair();\n        const code_verifier = pkPair?.code_verifier;\n        const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n        return this._networkClient.retriableFetchSDK<B2BPasswordDiscoveryAuthenticateResponse<TProjectConfiguration>>({\n          url: '/b2b/passwords/discovery/authenticate',\n          method: 'POST',\n          body: {\n            email_address: options.email_address,\n            password: options.password,\n            captcha_token,\n            dfp_telemetry_id,\n            code_verifier,\n          },\n          retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n        });\n      },\n    ),\n  };\n\n  resetByEmail = this._subscriptionService.withUpdateSession(\n    async (\n      options: B2BPasswordResetByEmailOptions,\n    ): Promise<B2BPasswordResetByEmailResponse<TProjectConfiguration>> => {\n      validate('stytch.passwords.resetByEmail')\n        .isString('password_reset_token', options.password_reset_token)\n        .isString('password', options.password)\n        .isNumber('session_duration_minutes', options.session_duration_minutes)\n        .isOptionalString('locale', options.locale);\n\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      const pkPair = await this._pkceManager.getPKPair();\n      const code_verifier = pkPair?.code_verifier;\n\n      const resp = await this._networkClient.retriableFetchSDK<B2BPasswordResetByEmailResponse<TProjectConfiguration>>({\n        url: '/b2b/passwords/email/reset',\n        method: 'POST',\n        body: {\n          password_reset_token: options.password_reset_token,\n          password: options.password,\n          session_duration_minutes: options.session_duration_minutes,\n          locale: options.locale,\n          captcha_token,\n          dfp_telemetry_id,\n          code_verifier: code_verifier,\n          intermediate_session_token: this._subscriptionService.getIntermediateSessionToken() || undefined,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n\n      this._pkceManager.clearPKPair();\n      return resp;\n    },\n  );\n\n  resetByExistingPassword = this._subscriptionService.withUpdateSession(\n    async (\n      options: B2BPasswordResetByExistingPasswordOptions,\n    ): Promise<B2BPasswordResetByExistingPasswordResponse<TProjectConfiguration>> => {\n      validate('stytch.passwords.resetByExistingPassword')\n        .isString('email', options.email_address)\n        .isString('existing_password', options.existing_password)\n        .isString('new_password', options.new_password)\n        .isOptionalString('locale', options.locale)\n        .isNumber('session_duration_minutes', options.session_duration_minutes);\n\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      return this._networkClient.retriableFetchSDK<B2BPasswordResetByExistingPasswordResponse<TProjectConfiguration>>({\n        url: '/b2b/passwords/existing_password/reset',\n        method: 'POST',\n        body: {\n          organization_id: options.organization_id,\n          email_address: options.email_address,\n          existing_password: options.existing_password,\n          new_password: options.new_password,\n          locale: options.locale,\n          session_duration_minutes: options.session_duration_minutes,\n          captcha_token,\n          dfp_telemetry_id,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n  );\n\n  resetBySession = this._subscriptionService.withUpdateSession(\n    async (\n      options: B2BPasswordResetBySessionOptions,\n    ): Promise<B2BPasswordResetBySessionResponse<TProjectConfiguration>> => {\n      validate('stytch.passwords.resetBySession').isString('password', options.password);\n\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n      return this._networkClient.retriableFetchSDK<B2BPasswordResetBySessionResponse<TProjectConfiguration>>({\n        url: '/b2b/passwords/session/reset',\n        method: 'POST',\n        body: {\n          password: options.password,\n          captcha_token,\n          dfp_telemetry_id,\n        },\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n  );\n\n  async strengthCheck(options: B2BPasswordStrengthCheckOptions): Promise<B2BPasswordStrengthCheckResponse> {\n    validate('stytch.passwords.strengthCheck')\n      .isOptionalString('email', options.email_address)\n      .isString('password', options.password);\n\n    return this._networkClient.fetchSDK<B2BPasswordStrengthCheckResponse>({\n      url: '/b2b/passwords/strength_check',\n      method: 'POST',\n      body: {\n        email_address: options.email_address,\n        password: options.password,\n      },\n    });\n  }\n}\n","import { IB2BSubscriptionService, IDFPProtectedAuthProvider, INetworkClient } from '../..';\nimport {\n  B2BOTPsEmailLoginOrSignupOptions,\n  B2BOTPsEmailLoginOrSignupResponse,\n  B2BOTPsEmailAuthenticateOptions,\n  B2BOTPsEmailAuthenticateResponse,\n  B2BSMSAuthenticateOptions,\n  B2BSMSAuthenticateResponse,\n  B2BSMSSendOptions,\n  B2BSMSSendResponse,\n  IHeadlessB2BOTPsClient,\n  B2BDiscoveryOTPEmailSendOptions,\n  B2BDiscoveryOTPEmailSendResponse,\n  B2BDiscoveryOTPEmailAuthenticateOptions,\n  B2BDiscoveryOTPEmailAuthenticateResponse,\n} from '../../public/b2b/otps';\nimport { StytchProjectConfigurationInput } from '../../public/typeConfig';\nimport { validate } from '../../utils';\n\nexport class HeadlessB2BOTPsClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BOTPsClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  sms = {\n    send: async (data: B2BSMSSendOptions): Promise<B2BSMSSendResponse> => {\n      validate('stytch.otps.sms.send')\n        .isString('organization_id', data.organization_id)\n        .isString('member_id', data.member_id)\n        .isOptionalString('mfa_phone_number', data.mfa_phone_number)\n        .isOptionalString('locale', data.locale);\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      return this._networkClient.retriableFetchSDK<B2BSMSSendResponse>({\n        url: '/b2b/otps/sms/send',\n        body: {\n          ...data,\n          dfp_telemetry_id,\n          captcha_token,\n          intermediate_session_token: this._subscriptionService.getIntermediateSessionToken() || undefined,\n        },\n        method: 'POST',\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n    authenticate: this._subscriptionService.withUpdateSession(\n      async (data: B2BSMSAuthenticateOptions): Promise<B2BSMSAuthenticateResponse<TProjectConfiguration>> => {\n        validate('stytch.otps.sms.authenticate')\n          .isNumber('session_duration_minutes', data.session_duration_minutes)\n          .isString('organization_id', data.organization_id)\n          .isString('member_id', data.member_id)\n          .isString('code', data.code)\n          .isOptionalString('set_mfa_enrollment', data.set_mfa_enrollment);\n        const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n        const requestBody = {\n          ...data,\n          dfp_telemetry_id,\n          captcha_token,\n          intermediate_session_token: this._subscriptionService.getIntermediateSessionToken() || undefined,\n        };\n        return this._networkClient.retriableFetchSDK<B2BSMSAuthenticateResponse<TProjectConfiguration>>({\n          url: '/b2b/otps/sms/authenticate',\n          body: requestBody,\n          method: 'POST',\n          retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n        });\n      },\n    ),\n  };\n  email = {\n    loginOrSignup: async (data: B2BOTPsEmailLoginOrSignupOptions): Promise<B2BOTPsEmailLoginOrSignupResponse> => {\n      validate('stytch.otps.email.loginOrSignup')\n        .isString('organization_id', data.organization_id)\n        .isString('email_address', data.email_address)\n        .isOptionalString('login_template_id', data.login_template_id)\n        .isOptionalString('signup_template_id', data.signup_template_id)\n        .isOptionalString('locale', data.locale)\n        .isOptionalNumber('login_expiration_minutes', data.login_expiration_minutes)\n        .isOptionalNumber('signup_expiration_minutes', data.signup_expiration_minutes);\n\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      return this._networkClient.retriableFetchSDK<B2BOTPsEmailLoginOrSignupResponse>({\n        url: '/b2b/otps/email/login_or_signup',\n        body: {\n          ...data,\n          dfp_telemetry_id,\n          captcha_token,\n        },\n        method: 'POST',\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n    authenticate: this._subscriptionService.withUpdateSession(\n      async (\n        data: B2BOTPsEmailAuthenticateOptions,\n      ): Promise<B2BOTPsEmailAuthenticateResponse<TProjectConfiguration>> => {\n        validate('stytch.otps.email.authenticate')\n          .isString('code', data.code)\n          .isString('email_address', data.email_address)\n          .isString('organization_id', data.organization_id)\n          .isNumber('session_duration_minutes', data.session_duration_minutes)\n          .isOptionalString('locale', data.locale);\n\n        const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n        return this._networkClient.retriableFetchSDK<B2BOTPsEmailAuthenticateResponse<TProjectConfiguration>>({\n          url: '/b2b/otps/email/authenticate',\n          body: {\n            ...data,\n            intermediate_session_token: this._subscriptionService.getIntermediateSessionToken() || undefined,\n            dfp_telemetry_id,\n            captcha_token,\n          },\n          method: 'POST',\n          retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n        });\n      },\n    ),\n    discovery: {\n      send: async (data: B2BDiscoveryOTPEmailSendOptions): Promise<B2BDiscoveryOTPEmailSendResponse> => {\n        validate('stytch.otps.email.discovery.send')\n          .isString('email_address', data.email_address)\n          .isOptionalString('login_template_id', data.login_template_id)\n          .isOptionalString('locale', data.locale)\n          .isOptionalNumber('discovery_expiration_minutes', data.discovery_expiration_minutes);\n\n        const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n        const requestBody = {\n          ...data,\n          dfp_telemetry_id,\n          captcha_token,\n        };\n        return this._networkClient.retriableFetchSDK<B2BDiscoveryOTPEmailSendResponse>({\n          url: '/b2b/otps/email/discovery/send',\n          body: requestBody,\n          method: 'POST',\n          retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n        });\n      },\n      authenticate: this._subscriptionService.withUpdateSession(\n        async (\n          data: B2BDiscoveryOTPEmailAuthenticateOptions,\n        ): Promise<B2BDiscoveryOTPEmailAuthenticateResponse<TProjectConfiguration>> => {\n          validate('stytch.otps.email.discovery.authenticate')\n            .isString('code', data.code)\n            .isString('email_address', data.email_address);\n\n          const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n          const requestBody = {\n            dfp_telemetry_id,\n            captcha_token,\n            ...data,\n          };\n\n          return this._networkClient.retriableFetchSDK<B2BDiscoveryOTPEmailAuthenticateResponse<TProjectConfiguration>>(\n            {\n              url: '/b2b/otps/email/discovery/authenticate',\n              body: requestBody,\n              method: 'POST',\n              retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n            },\n          );\n        },\n      ),\n    },\n  };\n}\n","import { IB2BSubscriptionService, IDFPProtectedAuthProvider, INetworkClient } from '../..';\nimport { validate } from '../../utils';\nimport {\n  B2BTOTPAuthenticateOptions,\n  B2BTOTPAuthenticateResponse,\n  B2BTOTPCreateOptions,\n  B2BTOTPCreateResponse,\n  IHeadlessB2BTOTPsClient,\n} from '../../public/b2b/totp';\nimport { StytchProjectConfigurationInput } from '../../public/typeConfig';\n\nexport class HeadlessB2BTOTPsClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BTOTPsClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  async create(data: B2BTOTPCreateOptions): Promise<B2BTOTPCreateResponse> {\n    validate('stytch.totp.create')\n      .isString('organization_id', data.organization_id)\n      .isString('member_id', data.member_id)\n      .isOptionalNumber('expiration_minutes', data.expiration_minutes);\n    const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n    const response = await this._networkClient.retriableFetchSDK<B2BTOTPCreateResponse>({\n      url: '/b2b/totp',\n      body: {\n        ...data,\n        dfp_telemetry_id,\n        captcha_token,\n        intermediate_session_token: (await this._subscriptionService.getIntermediateSessionToken()) || undefined,\n      },\n      method: 'POST',\n      retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n    });\n\n    if (response.member_id === this._subscriptionService.getMember()?.member_id) {\n      this._subscriptionService.updateMember(response.member);\n    }\n\n    return response;\n  }\n\n  authenticate = this._subscriptionService.withUpdateSession(\n    async (data: B2BTOTPAuthenticateOptions): Promise<B2BTOTPAuthenticateResponse<TProjectConfiguration>> => {\n      validate('stytch.totp.authenticate')\n        .isString('organization_id', data.organization_id)\n        .isString('member_id', data.member_id)\n        .isString('code', data.code)\n        .isNumber('session_duration_minutes', data.session_duration_minutes)\n        .isOptionalString('set_mfa_enrollment', data.set_mfa_enrollment)\n        .isOptionalBoolean('set_default_mfa', data.set_default_mfa);\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      const requestBody = {\n        ...data,\n        dfp_telemetry_id,\n        captcha_token,\n        intermediate_session_token: this._subscriptionService.getIntermediateSessionToken() || undefined,\n      };\n\n      return this._networkClient.retriableFetchSDK<B2BTOTPAuthenticateResponse<TProjectConfiguration>>({\n        url: '/b2b/totp/authenticate',\n        body: requestBody,\n        method: 'POST',\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n  );\n}\n","import {\n  IHeadlessB2BRecoveryCodesClient,\n  RecoveryCodeGetResponse,\n  RecoveryCodeRecoverOptions,\n  RecoveryCodeRecoverResponse,\n  RecoveryCodeRotateResponse,\n} from '../../public/b2b/recoveryCodes';\nimport { StytchProjectConfigurationInput } from '../../public/typeConfig';\nimport { IB2BSubscriptionService, IDFPProtectedAuthProvider, INetworkClient } from '../..';\nimport { validate } from '../../utils';\n\nexport class HeadlessB2BRecoveryCodesClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BRecoveryCodesClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  recover = this._subscriptionService.withUpdateSession(\n    async (data: RecoveryCodeRecoverOptions): Promise<RecoveryCodeRecoverResponse<TProjectConfiguration>> => {\n      validate('stytch.recoveryCodes.recover')\n        .isString('organization_id', data.organization_id)\n        .isString('member_id', data.member_id)\n        .isString('recovery_code', data.recovery_code)\n        .isNumber('session_duration_minutes', data.session_duration_minutes);\n      const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n      const requestBody = {\n        ...data,\n        dfp_telemetry_id,\n        captcha_token,\n        intermediate_session_token: this._subscriptionService.getIntermediateSessionToken() || undefined,\n      };\n      return this._networkClient.retriableFetchSDK<RecoveryCodeRecoverResponse<TProjectConfiguration>>({\n        url: '/b2b/recovery_codes/recover',\n        body: requestBody,\n        method: 'POST',\n        retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n      });\n    },\n  );\n\n  async rotate(): Promise<RecoveryCodeRotateResponse> {\n    const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n    return this._networkClient.retriableFetchSDK<RecoveryCodeRotateResponse>({\n      url: '/b2b/recovery_codes/rotate',\n      body: {\n        dfp_telemetry_id,\n        captcha_token,\n      },\n      method: 'POST',\n      retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n    });\n  }\n\n  async get(): Promise<RecoveryCodeGetResponse> {\n    return this._networkClient.fetchSDK<RecoveryCodeGetResponse>({\n      url: '/b2b/recovery_codes',\n      method: 'GET',\n    });\n  }\n}\n","import { IB2BSubscriptionService } from '../../SubscriptionService';\nimport { logger } from '../../utils';\nimport { RBACPolicy, RBACPolicyRaw } from '../../rbac';\nimport { IHeadlessB2BRBACClient, PermissionsMap } from '../../public/b2b/rbac';\nimport { StytchProjectConfigurationInput } from '../../public/typeConfig';\n\ntype CachedConfig = {\n  rbacPolicy: RBACPolicyRaw | null;\n};\n\ntype DynamicConfig = Promise<CachedConfig>;\n\nexport class HeadlessB2BRBACClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BRBACClient\n{\n  private cachedPolicy: RBACPolicy | null;\n  private policyPromise: Promise<RBACPolicy>;\n  constructor(\n    cachedConfig: CachedConfig,\n    dynamicConfig: DynamicConfig,\n    private _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n  ) {\n    this.cachedPolicy = cachedConfig.rbacPolicy ? RBACPolicy.fromJSON(cachedConfig.rbacPolicy) : null;\n    this.policyPromise = dynamicConfig.then((data) => {\n      if (!data.rbacPolicy) {\n        logger.error('Unable to retrieve RBAC policy from servers. Assuming caller has no permissions.');\n        return new RBACPolicy([], []);\n      }\n      // Update the existing policy too, so isAuthorizedSync will be up-to-date\n      this.cachedPolicy = RBACPolicy.fromJSON(data.rbacPolicy);\n      return this.cachedPolicy;\n    });\n  }\n\n  /**\n   * Gets the effective policy for the current session by merging project policy with org custom roles\n   */\n  private async getEffectivePolicy(): Promise<RBACPolicy> {\n    const projectPolicy = await this.policyPromise;\n    const organization = this._subscriptionService.getOrganization();\n\n    // If no org or no custom roles, just return project policy\n    if (!organization?.custom_roles?.length) {\n      return projectPolicy;\n    }\n\n    return projectPolicy.mergeWithCustomRoles(organization.custom_roles);\n  }\n\n  /**\n   * Gets the effective policy synchronously for the current session\n   * Uses cached policies only\n   */\n  private getEffectivePolicySync(): RBACPolicy | null {\n    if (!this.cachedPolicy) {\n      return null;\n    }\n\n    const organization = this._subscriptionService.getOrganization();\n\n    // If no custom roles, just return project policy\n    if (!organization?.custom_roles?.length) {\n      return this.cachedPolicy;\n    }\n\n    return this.cachedPolicy.mergeWithCustomRoles(organization.custom_roles);\n  }\n\n  allPermissions<Permissions extends Record<string, string>>() {\n    return this.getEffectivePolicy().then(\n      (policy) => policy.allPermissionsForCaller(this.roleIds()) as PermissionsMap<Permissions>,\n    );\n  }\n\n  isAuthorizedSync: IHeadlessB2BRBACClient['isAuthorizedSync'] = (resourceId, action) => {\n    const effectivePolicy = this.getEffectivePolicySync();\n    return !!effectivePolicy?.callerIsAuthorized(this.roleIds(), resourceId as string, action as unknown as string);\n  };\n\n  isAuthorized: IHeadlessB2BRBACClient['isAuthorized'] = (resourceId, action) => {\n    return this.getEffectivePolicy().then((policy) =>\n      policy.callerIsAuthorized(this.roleIds(), resourceId as string, action as unknown as string),\n    );\n  };\n\n  private roleIds() {\n    const session = this._subscriptionService.getSession();\n    if (!session) {\n      return [];\n    }\n    // Although session.roles is guaranteed to exist for fresh data, there is a minuscule chance\n    // that the member session stored in localstorage clientside comes from before roles were added to\n    // the API response - in which case session.roles will be undefined and this will crash\n    // TODO: [AUTH-2294] We can safely remove this ~3mos after RBAC is released\n    return session.roles ?? [];\n  }\n}\n","import { IB2BSubscriptionService, IDFPProtectedAuthProvider, INetworkClient } from '../..';\nimport {\n  B2BImpersonationAuthenticateOptions,\n  B2BImpersonationAuthenticateResponse,\n  IHeadlessB2BImpersonationClient,\n} from '../../public/b2b/impersonation';\nimport { StytchProjectConfigurationInput } from '../../public/typeConfig';\nimport { validate } from '../../utils';\n\nexport class HeadlessB2BImpersonationClient<TProjectConfiguration extends StytchProjectConfigurationInput>\n  implements IHeadlessB2BImpersonationClient<TProjectConfiguration>\n{\n  constructor(\n    private _networkClient: INetworkClient,\n    private _subscriptionService: IB2BSubscriptionService<TProjectConfiguration>,\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  authenticate = this._subscriptionService.withUpdateSession(async (data: B2BImpersonationAuthenticateOptions) => {\n    validate('stytch.impersonation.authenticate').isString('impersonation_token', data.impersonation_token);\n\n    const { dfp_telemetry_id, captcha_token } = await this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();\n\n    return this._networkClient.retriableFetchSDK<B2BImpersonationAuthenticateResponse<TProjectConfiguration>>({\n      url: '/b2b/impersonation/authenticate',\n      body: {\n        ...data,\n        dfp_telemetry_id,\n        captcha_token,\n      },\n      method: 'POST',\n      retryCallback: this.dfpProtectedAuth.retryWithCaptchaAndDFP,\n    });\n  });\n}\n","import { INetworkClient } from '../../NetworkClient';\nimport {\n  B2BOAuthAuthorizeStartOptions,\n  B2BOAuthAuthorizeStartResponse,\n  B2BOAuthAuthorizeSubmitOptions,\n  B2BOAuthAuthorizeSubmitResponse,\n  IHeadlessB2BIDPClient,\n  B2BOAuthLogoutStartOptions,\n  B2BOAuthLogoutStartResponse,\n} from '../../public/b2b/idp';\n\nexport class HeadlessB2BIDPClient implements IHeadlessB2BIDPClient {\n  constructor(private _networkClient: INetworkClient) {}\n\n  /**\n   * Initiates a request for authorization of a Connected App to access a Member's account.\n   *\n   * Call this endpoint using the query parameters from an OAuth Authorization request. This endpoint validates various fields (scope, client_id, redirect_uri, prompt, etc...) are correct and returns relevant information for rendering an OAuth Consent Screen.\n   *\n   * @example\n   * const response = await stytch.idp.oauthAuthorizeStart({\n   *   client_id: 'client_123',\n   *   redirect_uri: 'https://example.com/callback',\n   *   scope: 'openid email profile',\n   * });\n   */\n  oauthAuthorizeStart = async (data: B2BOAuthAuthorizeStartOptions): Promise<B2BOAuthAuthorizeStartResponse> =>\n    this._networkClient.fetchSDK<B2BOAuthAuthorizeStartResponse>({\n      url: '/idp/b2b/oauth/authorize/start',\n      method: 'POST',\n      body: data,\n    });\n\n  /**\n   * Completes a request for authorization of a Connected App to access a Member's account.\n   *\n   * Call this endpoint using the query parameters from an OAuth Authorization request, after previously validating those parameters using the Preflight Check API. Note that this endpoint takes in a few additional parameters the preflight check does not- state, nonce, and code_challenge.\n   *\n   * If the authorization was successful, the redirect_uri will contain a valid authorization_code embedded as a query parameter. If the authorization was unsuccessful, the redirect_uri will contain an OAuth2.1 error_code. In both cases, redirect the Member to the location for the response to be consumed by the Connected App.\n   *\n   * Exactly one of the following must be provided to identify the Member granting authorization:\n   * organization_id + member_id\n   * session_token\n   * session_jwt\n   *\n   * If a session_token or session_jwt is passed, the OAuth Authorization will be linked to the Member's session for tracking purposes. One of these fields must be used if the Connected App intends to complete the Exchange Access Token flow.\n   *\n   * @example\n   * const response = await stytch.idp.oauthAuthorizeSubmit({\n   *   client_id: 'client_123',\n   *   redirect_uri: 'https://example.com/callback',\n   *   scope: 'openid email profile',\n   * });\n   */\n  oauthAuthorizeSubmit = async (data: B2BOAuthAuthorizeSubmitOptions): Promise<B2BOAuthAuthorizeSubmitResponse> =>\n    this._networkClient.fetchSDK<B2BOAuthAuthorizeSubmitResponse>({\n      url: '/idp/b2b/oauth/authorize/submit',\n      method: 'POST',\n      body: data,\n    });\n\n  oauthLogoutStart = async (data: B2BOAuthLogoutStartOptions): Promise<B2BOAuthLogoutStartResponse> =>\n    this._networkClient.fetchSDK<B2BOAuthLogoutStartResponse>({\n      url: `/b2b/oauth/logout/start`,\n      method: 'POST',\n      body: data,\n    });\n}\n","import { ErrorMarshaller } from '../ErrorMarshaller';\nimport { MULTIPLE_STYTCH_CLIENTS_DETECTED_WARNING } from '../constants';\nimport { logger } from '../utils';\n\ntype RequestPayload = {\n  method: string;\n  args: unknown[];\n};\n\ntype ResponsePayload<T> = {\n  success: boolean;\n  payload: T;\n  error: Record<string, unknown>;\n};\n\nexport class IframeHostClient {\n  frame!: Promise<HTMLIFrameElement>;\n\n  constructor(private iframeURL: string) {\n    this.createIframe();\n  }\n\n  private createIframe() {\n    let existingIframe = document.querySelector(`[src~=\"${this.iframeURL}\"]`) as HTMLIFrameElement;\n\n    /* If an iframe does not exist yet, create one */\n    if (!existingIframe) {\n      existingIframe = document.createElement('iframe');\n      existingIframe.src = this.iframeURL;\n      existingIframe.style.position = 'absolute';\n      existingIframe.style.width = '0';\n      existingIframe.style.height = '0';\n      existingIframe.style.border = '0';\n      document.body.appendChild(existingIframe);\n    } else {\n      logger.warn(MULTIPLE_STYTCH_CLIENTS_DETECTED_WARNING);\n    }\n\n    /**\n     * [NASTY BUG]\n     * If we postMessage to an iframe that is _not yet loaded_, chrome will give a cryptic error message\n     * Failed to execute 'postMessage' on 'DOMWindow':\n     *   The target origin provided ('https://js.stytch.com') does not match the recipient window's origin ('http://localhost:3000').\n     * There is no builtin way to determine if an iframe is already loaded,\n     * so we set a dataset attr in our onload handler and use that to determine loading state\n     */\n    if (existingIframe.dataset.loaded === 'true') {\n      this.frame = Promise.resolve(existingIframe);\n      return;\n    }\n\n    this.frame = new Promise((resolve) => {\n      existingIframe.addEventListener(\n        'load',\n        () => {\n          existingIframe.dataset.loaded = 'true';\n          resolve(existingIframe);\n        },\n        { once: true },\n      );\n    });\n  }\n\n  async call<T>(method: string, args: unknown[]): Promise<T> {\n    const frame = await this.frame;\n    const channel = new MessageChannel();\n\n    return new Promise((resolve, reject) => {\n      channel.port1.onmessage = (event) => {\n        const resp = event.data as ResponsePayload<T>;\n        channel.port1.close();\n        if (resp.success) {\n          resolve(resp.payload);\n        } else {\n          reject(ErrorMarshaller.unmarshall(resp.error));\n        }\n      };\n\n      const message: RequestPayload = {\n        method,\n        args,\n      };\n\n      frame.contentWindow?.postMessage(message, this.iframeURL, [channel.port2]);\n    });\n  }\n}\n","import { INetworkClient } from './NetworkClient';\nimport { Member, ResponseCommon } from './public';\nimport { IDFPProtectedAuthProvider } from './DFPProtectedAuthProvider';\n\ntype UserSearchData = ResponseCommon & {\n  userType: 'new' | 'passwordless' | 'password';\n};\n\nexport type InternalMember = Pick<Member, 'status' | 'name' | 'member_password_id'>;\n\nexport type MemberSearchData = ResponseCommon & { member: InternalMember | null };\n\nexport interface ISearchData {\n  searchUser: (email: string) => Promise<UserSearchData>;\n  searchMember: (email: string, organization_id: string) => Promise<MemberSearchData>;\n}\n\nexport class SearchDataManager implements ISearchData {\n  constructor(\n    private _networkClient: INetworkClient,\n    private dfpProtectedAuth: IDFPProtectedAuthProvider,\n  ) {}\n\n  searchUser(email: string): Promise<UserSearchData> {\n    return this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha().then(({ dfp_telemetry_id, captcha_token }) => {\n      return this._networkClient.fetchSDK<UserSearchData>({\n        url: `/users/search`,\n        method: 'POST',\n        body: { email, dfp_telemetry_id, captcha_token },\n      });\n    });\n  }\n\n  searchMember(email: string, organization_id: string): Promise<MemberSearchData> {\n    return this._networkClient.fetchSDK<MemberSearchData>({\n      url: `/b2b/organizations/members/search`,\n      method: 'POST',\n      body: { email_address: email, organization_id },\n    });\n  }\n}\n","import { B2BState, ConsumerState } from './public';\n\n// We should try refreshing the session if there exists a cached session in\n// state that might be stale. Otherwise, we know there is no session, so there's\n// no need.\nexport const shouldTryRefresh = <T extends ConsumerState | B2BState>(state: T | null) => !!state?.session;\n","import { MULTIPLE_STYTCH_CLIENTS_DETECTED_WARNING } from './constants';\nimport {\n  B2BState,\n  ConsumerState,\n  IHeadlessB2BSessionClient,\n  IHeadlessSessionClient,\n  SessionAuthenticateOptions,\n  StytchProjectConfigurationInput,\n  UNRECOVERABLE_ERROR_TYPES,\n} from './public';\nimport { shouldTryRefresh } from './shouldTryRefresh';\nimport { IB2BSubscriptionService, IConsumerSubscriptionService } from './SubscriptionService';\nimport { logger } from './utils';\nimport { SessionUpdateOptions } from './types';\n\nclass SessionManagerRegistry {\n  private hasWarned = false;\n\n  private registry = new Map<string, ISessionManager>();\n\n  public register(key: string, sessionManager: ISessionManager) {\n    const otherManager = this.registry.get(key);\n\n    // If there appears to be another registered session manager, issue a\n    // warning and cancel its background refresh in favor the newer registration\n    if (otherManager && otherManager !== sessionManager) {\n      if (!this.hasWarned) {\n        logger.warn(MULTIPLE_STYTCH_CLIENTS_DETECTED_WARNING);\n        this.hasWarned = true;\n      }\n      otherManager.cancelBackgroundRefresh();\n    }\n    this.registry.set(key, sessionManager);\n  }\n\n  public unregister(publicToken: string, sessionManager: ISessionManager) {\n    const otherManager = this.registry.get(publicToken);\n    if (otherManager && otherManager === sessionManager) {\n      this.registry.delete(publicToken);\n    }\n  }\n}\n\nexport interface ISessionManager {\n  performBackgroundRefresh: () => void;\n  cancelBackgroundRefresh: () => void;\n}\n\nexport class SessionManager<TProjectConfiguration extends StytchProjectConfigurationInput> implements ISessionManager {\n  // Three minutes\n  private static REFRESH_INTERVAL_MS = 1000 * 60 * 3;\n  // When testing - it's often more useful to set to a shorter duration\n  // private static REFRESH_INTERVAL_MS = 1000 * 3;\n\n  private timeout: ReturnType<typeof setTimeout> | null = null;\n\n  /** In minutes */\n  private lastAuthenticationSessionDuration: number | undefined;\n\n  private static registry = new SessionManagerRegistry();\n\n  private register() {\n    SessionManager.registry.register(this._publicToken, this);\n  }\n\n  private unregister() {\n    SessionManager.registry.unregister(this._publicToken, this);\n  }\n\n  constructor(\n    private _subscriptionService:\n      | IConsumerSubscriptionService<TProjectConfiguration>\n      | IB2BSubscriptionService<TProjectConfiguration>,\n    private _headlessSessionClient:\n      | IHeadlessSessionClient<TProjectConfiguration>\n      | IHeadlessB2BSessionClient<TProjectConfiguration>,\n    private _publicToken: string,\n    private _options: { keepSessionAlive?: boolean },\n  ) {\n    this._subscriptionService.subscribeToState(this._onDataChange);\n  }\n\n  /**\n   * The core logic of the session refresh recursive trampoline\n   * - Refreshes the currently issued session\n   * - Schedules a future refresh if successful\n   */\n  performBackgroundRefresh() {\n    logger.debug('performing background refresh at ', Date.now());\n    this._reauthenticateWithBackoff()\n      .then(() => {\n        this.scheduleBackgroundRefresh();\n      })\n      .catch((error: unknown) => {\n        logger.warn('Session background refresh failed. Signalling to app that user is logged out.', { error });\n        this._subscriptionService.destroySession();\n      });\n  }\n\n  private scheduleBackgroundRefresh() {\n    /* Highlander rules - there can only ever be one */\n    this.cancelBackgroundRefresh();\n    this.register();\n    logger.debug('Scheduling bg refresh', Date.now());\n    this.timeout = setTimeout(() => {\n      this.performBackgroundRefresh();\n    }, SessionManager.REFRESH_INTERVAL_MS);\n  }\n\n  cancelBackgroundRefresh() {\n    if (this.timeout !== null) {\n      this.unregister();\n      logger.debug('Cancelling bg refresh', Date.now());\n      clearTimeout(this.timeout);\n      this.timeout = null;\n    }\n  }\n\n  /**\n   * We need to listen to a few types of events:\n   * - If the user logs in via invoking a .authenticate() call, we should start the background worker\n   * - If the user steps up their authentication via another .authenticate call(), we should restart the background worker\n   * - If the user logs out, we should terminate the worker\n   * - We should ignore session changes that we ourselves caused - so if we already have a timeout, leave it be!\n   */\n  private _onDataChange = (\n    state: (ConsumerState & SessionUpdateOptions) | (B2BState & SessionUpdateOptions) | null,\n  ) => {\n    if (state != null && state.sessionDurationMinutes) {\n      this.lastAuthenticationSessionDuration = state.sessionDurationMinutes;\n    }\n\n    if (shouldTryRefresh(state)) {\n      this.scheduleBackgroundRefresh();\n    } else {\n      this.cancelBackgroundRefresh();\n    }\n  };\n\n  // In cases where we cannot get a satisfactory request:\n  // - Stytch is hard-down\n  // - The user's network is disconnected for an extended period of time\n  // we will continue to retry every 4 minutes ad infinum\n  private _reauthenticateWithBackoff = async () => {\n    let count = 0;\n    while (true) {\n      try {\n        const options: SessionAuthenticateOptions = {\n          session_duration_minutes: this._options.keepSessionAlive ? this.lastAuthenticationSessionDuration : undefined,\n        };\n\n        return await this._headlessSessionClient.authenticate(options);\n      } catch (err) {\n        if (SessionManager.isUnrecoverableError(err)) {\n          return Promise.reject(err);\n        }\n        count++;\n        await new Promise((done) => setTimeout(done, SessionManager.timeoutForAttempt(count)));\n      }\n    }\n  };\n\n  // We start with a backoff of 2000ms and increase exponentially to ~4 minutes (+/- 175 ms for jitter)\n  // A short backoff initially helps increase the chance that we refresh the session before the JWT expires\n  static timeoutForAttempt(count: number) {\n    count = Math.min(count, 7);\n    const jitter = Math.floor(Math.random() * 350) - 175;\n    const delayMS = 2000 * 2 ** count;\n    return jitter + delayMS;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static isUnrecoverableError(error: any) {\n    return UNRECOVERABLE_ERROR_TYPES.includes(error.error_type);\n  }\n}\n","import { ISubscriptionService } from './SubscriptionService';\nimport { UnsubscribeFunction } from './public';\nimport { AllowedOpaqueTokens } from './typeConfig';\n\ntype DeepReadonly<T> = {\n  readonly [P in keyof T]: DeepReadonly<T[P]>;\n};\n\nexport type StateChangeHandler<T> = (state: DeepReadonly<T>) => void;\nexport type StateChangeRegisterFunction<T> = (callback: StateChangeHandler<T>) => UnsubscribeFunction;\n\nexport class StateChangeClient<T> {\n  constructor(\n    private readonly _subscriptionService: ISubscriptionService<T | null, AllowedOpaqueTokens>,\n    private readonly emptyState: T,\n  ) {}\n\n  public onStateChange: StateChangeRegisterFunction<T> = (callback) => {\n    return this._subscriptionService.subscribeToState((state) => {\n      callback(state ?? this.emptyState);\n    });\n  };\n}\n","import {\n  B2BState,\n  ConsumerState,\n  SessionTokens,\n  UnsubscribeFunction,\n  User,\n  Session,\n  Member,\n  MemberSession,\n  SessionTokensUpdate,\n  Organization,\n  StytchProjectConfigurationInput,\n  AuthenticateResponse,\n  B2BAuthenticateResponse,\n  B2BAuthenticateResponseWithMFA,\n  B2BDiscoveryAuthenticateResponse,\n} from './public';\nimport { shouldTryRefresh } from './shouldTryRefresh';\nimport { IStorageClient } from './StorageClient';\nimport { AllowedOpaqueTokens, IfOpaqueTokens, OpaqueTokensNever, OpaqueTokensNeverConfig } from './typeConfig';\nimport { SessionUpdateOptions } from './types';\n\ntype SubscriberFunction<T> = (value: T | null) => void;\ntype Subscribers<T> = Record<string, SubscriberFunction<T>>;\n\nconst LOCAL_STORAGE_KEY_PREFIX = 'stytch_sdk_state_';\n\nconst getLocalStorageKey = (publicToken: string): string => {\n  return `${LOCAL_STORAGE_KEY_PREFIX}${publicToken}`;\n};\n\nexport class SubscriptionDataLayer<T> {\n  state: T | null;\n  session_token: string | null;\n  session_jwt: string | null;\n  intermediate_session_token: string | null;\n  intermediate_session_token_expiration: number | null;\n  subscriptions: Subscribers<T & SessionUpdateOptions>;\n\n  constructor(\n    private _publicToken: string,\n    private _storageClient: IStorageClient,\n  ) {\n    this.state = null;\n    this.session_token = null;\n    this.session_jwt = null;\n    this.intermediate_session_token = null;\n    this.intermediate_session_token_expiration = null;\n    this.subscriptions = {};\n  }\n\n  syncToLocalStorage() {\n    this._storageClient.setData(\n      getLocalStorageKey(this._publicToken),\n      JSON.stringify({\n        state: this.state,\n        session_token: this.session_token,\n        session_jwt: this.session_jwt,\n        intermediate_session_token: this.intermediate_session_token,\n      }),\n    );\n  }\n\n  syncFromLocalStorage = async (): Promise<StateWithTokensDiff<T, OpaqueTokensNever> | null> => {\n    return this._storageClient\n      .getData(getLocalStorageKey(this._publicToken))\n      .then((localData) => {\n        if (!localData) {\n          return null;\n        }\n        let parsedState: unknown;\n        try {\n          parsedState = JSON.parse(localData);\n        } catch {\n          // Overwrite the bad data\n          this._storageClient.clearData(getLocalStorageKey(this._publicToken));\n          // this.removeSessionCookie();\n          return null;\n        }\n        const { state, session_token, session_jwt, intermediate_session_token } =\n          parsedState as StateWithTokensLoggedIn<T, OpaqueTokensNever>;\n        this.state = state;\n        this.session_token = session_token;\n        this.session_jwt = session_jwt;\n        this.intermediate_session_token = intermediate_session_token;\n        return {\n          state,\n          session_token,\n          session_jwt,\n          intermediate_session_token,\n        };\n      })\n      .catch(() => {\n        return null;\n      });\n  };\n}\n\nconst addSubscriber = <T>(collection: Subscribers<T>, subscriber: SubscriberFunction<T>): UnsubscribeFunction => {\n  const uniqueId = Math.random().toString(36).slice(-10);\n  collection[uniqueId] = subscriber;\n  return () => delete collection[uniqueId];\n};\n\nconst notifySubscribers = <T>(collection: Subscribers<T>, value: T | null): void => {\n  Object.values(collection).forEach((cb) => cb(value));\n};\n\ntype StateWithReadableTokensLoggedIn<TState> = {\n  state: TState | null;\n  intermediate_session_token: null;\n  session_token: string;\n  session_jwt: string;\n};\n\ntype StateWithOpaqueTokensLoggedIn<TState> = {\n  state: TState | null;\n  intermediate_session_token: null;\n  session_token: true;\n  session_jwt: true;\n};\n\ntype StateWithTokensLoggedIn<TState, TOpaqueTokens extends AllowedOpaqueTokens> = IfOpaqueTokens<\n  TOpaqueTokens,\n  StateWithOpaqueTokensLoggedIn<TState>,\n  StateWithReadableTokensLoggedIn<TState>\n>;\n\ntype StateWithTokensLoggedOut = {\n  state: null;\n  session_token: null;\n  session_jwt: null;\n  intermediate_session_token: null;\n};\n\ntype StateWithReadableIntermediateSessionToken = {\n  state: null;\n  session_token: null;\n  session_jwt: null;\n  intermediate_session_token: string;\n};\n\ntype StateWithOpaqueIntermediateSessionToken = {\n  state: null;\n  session_token: null;\n  session_jwt: null;\n  intermediate_session_token: true;\n};\n\ntype StateWithIntermediateSessionToken<TOpaqueTokens extends AllowedOpaqueTokens> = IfOpaqueTokens<\n  TOpaqueTokens,\n  StateWithOpaqueIntermediateSessionToken,\n  StateWithReadableIntermediateSessionToken\n>;\n\ntype StateWithTokensDiff<TState, TOpaqueTokens extends AllowedOpaqueTokens> =\n  | StateWithTokensLoggedIn<TState, TOpaqueTokens>\n  | StateWithTokensLoggedOut\n  | StateWithIntermediateSessionToken<TOpaqueTokens>;\n\n// Ensures sessionDurationMinutes is only set if state is not coming from cache\nexport type InternalSessionUpdateOptions = { fromCache: true } | ({ fromCache: false } & SessionUpdateOptions);\n\nexport interface CommonAuthenticateOptions {\n  session_duration_minutes?: number;\n\n  // Needed so TS does not complain about \"no properties in common\" error\n  [key: string]: unknown;\n}\n\nexport interface ISubscriptionService<TState, TOpaqueTokens extends AllowedOpaqueTokens> {\n  updateStateAndTokens(diff: StateWithTokensDiff<TState, TOpaqueTokens>): void;\n\n  updateState(state: TState): void;\n\n  updateTokens(tokens: SessionTokensUpdate): void;\n\n  destroyState(): void;\n\n  destroySession(): void;\n\n  getTokens(): IfOpaqueTokens<TOpaqueTokens, never, SessionTokens | null>;\n\n  getIntermediateSessionToken(): string | null;\n\n  subscribeToState(callback: SubscriberFunction<(TState & SessionUpdateOptions) | null>): UnsubscribeFunction;\n\n  getState(): TState | null;\n\n  syncFromDeviceStorage(onCompleteCallback: () => void): void;\n\n  getFromCache(): boolean;\n\n  setCacheRefreshed(): void;\n}\n\nexport interface IConsumerSubscriptionService<TProjectConfiguration extends StytchProjectConfigurationInput>\n  extends ISubscriptionService<ConsumerState, AllowedOpaqueTokens> {\n  updateSession(args: AuthenticateResponse<TProjectConfiguration>, options?: SessionUpdateOptions): void;\n\n  /**\n   * Decorator version of updateSession that wraps an existing authenticate() implementation to bind its response\n   * to subscriptionService.updateSession().\n   */\n  withUpdateSession<\n    // These are a bit messy to be able to type all authenticate() implementations\n    Args extends [] | [options?: CommonAuthenticateOptions] | (string | CommonAuthenticateOptions)[],\n    Ret extends AuthenticateResponse<TProjectConfiguration> | null,\n  >(\n    authenticate: (...args: Args) => Promise<Ret>,\n  ): (...args: Args) => Promise<Ret>;\n\n  updateUser(user: User): void;\n  getUser(): User | null;\n  getSession(): Session | null;\n}\n\nexport interface IB2BSubscriptionService<TProjectConfiguration extends StytchProjectConfigurationInput>\n  extends ISubscriptionService<B2BState, AllowedOpaqueTokens> {\n  updateSession(\n    args:\n      | B2BAuthenticateResponse<TProjectConfiguration>\n      | B2BAuthenticateResponseWithMFA<TProjectConfiguration>\n      | B2BDiscoveryAuthenticateResponse<TProjectConfiguration>,\n    options?: SessionUpdateOptions,\n  ): void;\n\n  /**\n   * Decorator version of updateSession that wraps an existing authenticate() implementation to bind its response\n   * to subscriptionService.updateSession()\n   */\n  withUpdateSession<\n    Options extends CommonAuthenticateOptions | undefined,\n    Ret extends\n      | B2BAuthenticateResponse<TProjectConfiguration>\n      | B2BAuthenticateResponseWithMFA<TProjectConfiguration>\n      | B2BDiscoveryAuthenticateResponse<TProjectConfiguration>,\n  >(\n    authenticate: (options: Options) => Promise<Ret>,\n  ): (options: Options) => Promise<Ret>;\n\n  updateMember(member: Member): void;\n  getMember(): Member | null;\n  updateOrganization(organization: Organization): void;\n  getOrganization(): Organization | null;\n  getSession(): MemberSession | null;\n}\n\nexport class SubscriptionService<T extends ConsumerState | B2BState>\n  implements ISubscriptionService<T, OpaqueTokensNever>\n{\n  private _datalayer: SubscriptionDataLayer<T>;\n  /**\n   * Whether the state was retrieved from the cache and is awaiting a refresh\n   */\n  private fromCache = true;\n\n  constructor(publicToken: string, storageClient: IStorageClient) {\n    // TODO: Generalize this for Mobile and Web based SDKs\n    this._datalayer = new SubscriptionDataLayer(publicToken, storageClient);\n    const session = this._datalayer.state?.session;\n    if (session && Date.parse(session.expires_at) < Date.now()) {\n      this.destroyState();\n      return;\n    }\n  }\n\n  syncFromDeviceStorage(onCompleteCallback: () => void): void {\n    this._datalayer\n      .syncFromLocalStorage()\n      .then((res) => {\n        if (!res) {\n          this.setCacheRefreshed();\n        } else if (res.state?.session && Date.parse(res.state.session.expires_at) < Date.now()) {\n          this.destroyState();\n        } else {\n          // If we retrieved a possibly valid session, indicate whether we\n          // intend to refresh it (via a background refresh)\n          this.updateStateAndTokens(res, { fromCache: shouldTryRefresh(res.state) });\n        }\n      })\n      .finally(() => {\n        onCompleteCallback();\n      });\n  }\n\n  getState(): T | null {\n    return this._datalayer.state;\n  }\n\n  getTokens(): SessionTokens | null {\n    if (!(typeof this._datalayer.session_token === 'string') || !(typeof this._datalayer.session_jwt === 'string')) {\n      return null;\n    }\n    return {\n      session_token: this._datalayer.session_token,\n      session_jwt: this._datalayer.session_jwt,\n    };\n  }\n\n  removeIST() {\n    this._datalayer.intermediate_session_token = null;\n    this._datalayer.intermediate_session_token_expiration = null;\n  }\n\n  removeSessionTokens() {\n    this._datalayer.session_jwt = null;\n    this._datalayer.session_token = null;\n  }\n\n  getIntermediateSessionToken(): string | null {\n    if (\n      this._datalayer.intermediate_session_token_expiration &&\n      Date.now() > this._datalayer.intermediate_session_token_expiration\n    ) {\n      this.removeIST();\n    }\n    return this._datalayer.intermediate_session_token;\n  }\n\n  destroyState() {\n    this.updateStateAndTokens({\n      state: null,\n      session_token: null,\n      session_jwt: null,\n      intermediate_session_token: null,\n    });\n  }\n\n  destroySession() {\n    this.updateStateAndTokens({\n      state: null,\n      session_token: null,\n      session_jwt: null,\n      intermediate_session_token: this.getIntermediateSessionToken(),\n    });\n  }\n\n  _updateStateAndTokensInternal(\n    stateDiff: StateWithTokensDiff<T, OpaqueTokensNever>,\n    options: InternalSessionUpdateOptions,\n  ) {\n    const { state, session_token, session_jwt, intermediate_session_token } = stateDiff;\n    const newData = state == null ? null : ({ ...this._datalayer.state, ...state } as T);\n    this._datalayer.state = newData;\n    if (newData) {\n      this._datalayer.session_token = session_token;\n      this._datalayer.session_jwt = session_jwt;\n      this.removeIST();\n    } else if (intermediate_session_token) {\n      this.removeSessionTokens();\n      this._datalayer.intermediate_session_token = intermediate_session_token;\n      // ISTs are only valid for 10 minutes\n      this._datalayer.intermediate_session_token_expiration = Date.now() + 10 * 60 * 1000;\n    } else {\n      this.removeSessionTokens();\n      this.removeIST();\n    }\n    if (!options.fromCache) {\n      this.setCacheRefreshed();\n    }\n\n    let notification: (T & SessionUpdateOptions) | null;\n    if (newData == null || options.fromCache) {\n      notification = newData;\n    } else {\n      notification = {\n        ...newData,\n        sessionDurationMinutes: options.sessionDurationMinutes,\n      };\n    }\n    notifySubscribers(this._datalayer.subscriptions, notification);\n  }\n\n  updateStateAndTokens(\n    stateDiff: StateWithTokensDiff<T, OpaqueTokensNever>,\n    options: InternalSessionUpdateOptions = { fromCache: false },\n  ) {\n    this._updateStateAndTokensInternal(stateDiff, options);\n    this._datalayer.syncToLocalStorage();\n  }\n\n  updateState(state: T | null) {\n    const newState: T | null = state ? { ...this._datalayer.state, ...state } : null;\n    this._datalayer.state = newState;\n    this.setCacheRefreshed();\n\n    notifySubscribers(this._datalayer.subscriptions, newState);\n    // Delay notifying other tabs until after we have refreshed ourselves\n    this._datalayer.syncToLocalStorage();\n  }\n\n  updateTokens(tokens: SessionTokensUpdate) {\n    this._datalayer.session_token = tokens.session_token;\n    this._datalayer.session_jwt = tokens.session_jwt ?? null;\n    this._datalayer.syncToLocalStorage();\n  }\n\n  subscribeToState(callback: SubscriberFunction<T & SessionUpdateOptions>): UnsubscribeFunction {\n    return addSubscriber(this._datalayer.subscriptions, callback);\n  }\n\n  getFromCache(): boolean {\n    return this.fromCache;\n  }\n\n  setCacheRefreshed() {\n    this.fromCache = false;\n  }\n}\n\nexport class ConsumerSubscriptionService<TProjectConfiguration extends StytchProjectConfigurationInput>\n  extends SubscriptionService<ConsumerState>\n  implements IConsumerSubscriptionService<TProjectConfiguration & OpaqueTokensNeverConfig>\n{\n  updateSession: IConsumerSubscriptionService<TProjectConfiguration & OpaqueTokensNeverConfig>['updateSession'] = (\n    resp,\n    options,\n  ) => {\n    // This is a bit of a hack to get the type inference to work. In practice,\n    // opaque tokens are only a concern on web.\n    const { session, user, session_jwt, session_token } = resp as typeof resp &\n      AuthenticateResponse<OpaqueTokensNeverConfig>;\n\n    this.updateStateAndTokens(\n      {\n        state: { session, user },\n        session_jwt,\n        session_token,\n        intermediate_session_token: null,\n      },\n      {\n        fromCache: false,\n        sessionDurationMinutes: options?.sessionDurationMinutes,\n      },\n    );\n  };\n\n  withUpdateSession =\n    <\n      Args extends [] | [options?: CommonAuthenticateOptions] | (string | CommonAuthenticateOptions)[],\n      Ret extends AuthenticateResponse<TProjectConfiguration & OpaqueTokensNeverConfig> | null,\n    >(\n      authenticate: (...args: Args) => Promise<Ret>,\n    ): ((...args: Args) => Promise<Ret>) =>\n    async (...args) => {\n      const resp = await authenticate(...args);\n      if (resp != null) {\n        const options = args.find((a): a is CommonAuthenticateOptions => a != null && !(typeof a === 'string'));\n        this.updateSession(resp, {\n          sessionDurationMinutes: options?.session_duration_minutes,\n        });\n      }\n      return resp;\n    };\n\n  updateUser = (user: User) => this.updateState({ user });\n  getUser = () => this.getState()?.user ?? null;\n  getSession = () => this.getState()?.session ?? null;\n}\n\nexport class B2BSubscriptionService<TProjectConfiguration extends StytchProjectConfigurationInput>\n  extends SubscriptionService<B2BState>\n  implements IB2BSubscriptionService<TProjectConfiguration & OpaqueTokensNeverConfig>\n{\n  updateSession: IB2BSubscriptionService<TProjectConfiguration & OpaqueTokensNeverConfig>['updateSession'] = (\n    originalResp,\n    options,\n  ) => {\n    // This is a bit of a hack to get the type inference to work. In practice,\n    // opaque tokens are only a concern on web.\n    const resp = originalResp as\n      | B2BAuthenticateResponse<OpaqueTokensNeverConfig>\n      | B2BAuthenticateResponseWithMFA<OpaqueTokensNeverConfig>\n      | B2BDiscoveryAuthenticateResponse<OpaqueTokensNeverConfig>;\n\n    if ('member_session' in resp && resp.member_session) {\n      this.updateStateAndTokens(\n        {\n          state: {\n            session: resp.member_session,\n            member: resp.member,\n            organization: resp.organization,\n          },\n          session_token: resp.session_token,\n          session_jwt: resp.session_jwt,\n          intermediate_session_token: null,\n        },\n        {\n          fromCache: false,\n          sessionDurationMinutes: options?.sessionDurationMinutes,\n        },\n      );\n    } else {\n      this.updateStateAndTokens(\n        {\n          state: null,\n          session_token: null,\n          session_jwt: null,\n          intermediate_session_token: resp.intermediate_session_token,\n        },\n        {\n          fromCache: false,\n          sessionDurationMinutes: options?.sessionDurationMinutes,\n        },\n      );\n    }\n  };\n\n  withUpdateSession =\n    <\n      Options extends CommonAuthenticateOptions | undefined,\n      Ret extends\n        | B2BAuthenticateResponse<TProjectConfiguration & OpaqueTokensNeverConfig>\n        | B2BAuthenticateResponseWithMFA<TProjectConfiguration & OpaqueTokensNeverConfig>\n        | B2BDiscoveryAuthenticateResponse<TProjectConfiguration & OpaqueTokensNeverConfig>,\n    >(\n      authenticate: (options: Options) => Promise<Ret>,\n    ): ((options: Options) => Promise<Ret>) =>\n    async (options) => {\n      const resp = await authenticate(options);\n      this.updateSession(resp, {\n        sessionDurationMinutes: options?.session_duration_minutes,\n      });\n      return resp;\n    };\n\n  updateMember = (member: Member) => this.updateState({ member });\n  getMember = () => this.getState()?.member ?? null;\n  updateOrganization = (organization: Organization) => this.updateState({ organization });\n  getOrganization = () => this.getState()?.organization ?? null;\n  getSession = () => this.getState()?.session ?? null;\n}\n","export const VERTICAL_B2B = 'B2B';\nexport const VERTICAL_CONSUMER = 'CONSUMER';\n\nexport type Vertical = typeof VERTICAL_B2B | typeof VERTICAL_CONSUMER;\n","type DeepEqualOpts = {\n  KEYS_TO_EXCLUDE?: string[];\n};\n\nexport const createDeepEqual = ({ KEYS_TO_EXCLUDE = [] }: DeepEqualOpts = {}) => {\n  // If comparing functions, this may need some work. Not sure the\n  // best path for this: compare instance (what it currently does),\n  // stringify and compare, etc.\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const deepEqual = (a: any, b: any): boolean => {\n    // Ensures type is the same\n    if (typeof a !== typeof b) return false;\n    // arrays, null, and objects all have type 'object'\n    if (a === null || b === null) return a === b;\n    if (typeof a === 'object') {\n      if (Object.keys(a).length !== Object.keys(b).length || Object.keys(a).some((k) => !(k in b))) return false;\n      return Object.entries(a)\n        .filter(([k]) => !KEYS_TO_EXCLUDE.includes(k))\n        .every(([k, v]) => deepEqual(v, b[k]));\n    }\n    // boolean, string, number, undefined\n    return a === b;\n  };\n\n  return deepEqual;\n};\n"],"names":["TEST_API_URL","LIVE_API_URL","CLIENTSIDE_SERVICES_IFRAME_URL","STYTCH_DFP_BACKEND_URL","STYTCH_DFP_CDN_URL","STYTCH_SESSION_COOKIE","STYTCH_SESSION_JWT_COOKIE","POWERED_BY_STYTCH_IMG_URL","GOOGLE_ONE_TAP_HOST","GOOGLE_ONE_TAP_SCRIPT_URL","concat","DEFAULT_SESSION_DURATION_MINUTES","DEFAULT_OTP_EXPIRATION_MINUTES","MULTIPLE_STYTCH_CLIENTS_DETECTED_WARNING","RetriableErrorType","RetriableError","_Error","type","_this","_classCallCheck","_callSuper","_inherits","_createClass","_wrapNativeSuper","Error","retriableFetchSDK","_ref","method","finalURL","basicAuthHeader","xSDKClientHeader","xSDKParentHostHeader","body","retryCallback","req","_context","p","n","baseFetchSDK","a","v","_t","_callee","_ref2","headers","Authorization","fetchOpts","JSON","stringify","credentials","_context2","fetch","resp","_t2","message","StytchAPIUnreachableError","status","json","respData","data","_t3","_a","get","includes","respError","_t4","StytchAPISchemaError","StytchAPIError","text","_t5","RequiredCaptcha","_callee2","baseSubmitFormSDK","_ref3","bodyParams","finalBody","Object","assign","__Authorization","children","entries","map","_ref4","_ref5","_slicedToArray","key","value","input","document","createElement","name","form","action","append","apply","_toConsumableArray","appendChild","submit","_context3","_callee3","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","REGEX","validate","validate$1","uuid","test","byteToHex","i","push","toString","substr","arr","offset","arguments","length","undefined","toLowerCase","TypeError","v4","options","buf","rnds","random","ModulePromiseCache","loadESModule","url","moduleFromGlobalScope","_context4","loadESModuleFromNetwork","_callee4","Promise","resolve","reject","maybeScript","findScript","dataset","loaded","err","script","createScript","addEventListener","findScriptsInDom","querySelectorAll","scripts","setAttribute","head","getHttpsUrl","urlOrDomain","URL","hostname","_b","STYTCH_BADGE","process","env","NODE_ENV","DEBUG","logger","debug","log","_console","_len","args","Array","_key","console","warn","_console2","_len2","_key2","error","_console3","_len3","_key3","getLiveApiURL","opts","domain","customBaseUrl","endpointOptions","apiDomain","httpsUrl","_d","_c","endpoints","liveAPIURL","getTestApiURL","testApiDomain","testAPIURL","trailer","checkPublicToken","publicToken","_typeof","startsWith","checkNotSSR","clientName","factoryFunctionName","window","checkB2BNotSSR","COUNTRIES_LIST","US","AX","AS","AG","AI","AR","AT","AU","BE","BJ","BO","BR","IO","BN","BG","BF","CM","CA","BQ","CF","CL","CX","CC","CO","CD","CK","CR","HR","CZ","DK","DO","EC","SV","EE","SZ","FK","FI","FR","GF","DE","GH","GR","GD","GT","GG","GW","GY","HU","IS","IN","IE","IM","IT","JM","JP","KZ","KE","KI","KR","LV","LT","LU","MO","MT","MH","MR","MU","YT","MX","MC","ME","NR","NL","NZ","NI","NF","NO","PA","PY","PE","PN","PL","PT","PR","RO","BL","SH","KN","LC","MF","PM","SM","ST","SC","SX","SK","SI","ZA","SS","ES","SR","SJ","SE","CH","TW","TZ","TK","TO","TT","TR","UA","GB","UM","UY","VA","EH","getDFPBackendURL","dfppaUrl","dfppaDomain","dfpBackendURL","getDFPCdnURL","dfpCdnUrl","dfpCdnDomain","moveToFront","array","predicate","matchingIndex","findIndex","reordered","unshift","splice","arrayUtils","isTestPublicToken","token","normalizePromiseLike","prom","then","createEventId","uuidv4","createAppSessionId","createPersistentId","methodName","validator","isObject","fieldName","isArray","StytchSDKUsageError","isOptionalObject","isString","isOptionalString","isStringArray","_iterator","_createForOfIteratorHelper","_step","s","done","str","e","f","isOptionalStringArray","isNumber","isOptionalNumber","isBoolean","isOptionalBoolean","isPhoneMethod","selectionMethod","OTPMethods","SMS","WhatsApp","isEmailMethod","Email","removeResponseCommon","rest","__rest","omitUser","loadTelemetryJS","GetTelemetryID","DFPProtectedAuthProvider","bootstrapPromise","_this2","executeRecaptcha","isEnabled","__awaiter","_regenerator","m","_callee5","w","_context5","state","enabled","getTelemetryID","_callee6","_yield$this$state","_context6","getDFPTelemetryIDAndCaptcha","_callee7","_yield$this$state2","mode","dfp_telemetry_id","captcha_token","_context7","retryWithCaptchaAndDFP","_callee8","_yield$this$state3","_context8","bootstrapData","_callee9","_context9","runDFPProtectedAuth","dfpProtectedAuthMode","DisabledDFPProtectedAuthProvider","_callee0","_callee1","_callee10","_context10","_callee11","_context11","ErrorMarshaller","inflate","ErrorClass","ErrorData","setPrototypeOf","prototype","unmarshall","SDKAPIUnreachableError","StytchSDKSchemaError","StytchSDKAPIError","SyntaxError","ReferenceError","RangeError","EvalError","URIError","DEFAULT_MAX_BATCH_SIZE","DEFAULT_INTERVAL_DURATION_MS","EventLogger","maxBatchSize","logEventURL","setInterval","flush","intervalDurationMs","batch","logEvent","telemetry","event","_context12","batchToSubmit","_t6","_callee12","EmailSentType","HeadlessUserClient","_networkClient","_subscriptionService","_this3","_callee13","user","_context13","fetchSDK","updateUser","getSync","getUser","getInfo","fromCache","getFromCache","update","_callee14","_context14","untrusted_metadata","__user","deleteEmail","emailId","_callee15","_context15","deletePhoneNumber","phoneId","_callee16","_context16","deleteTOTP","totpId","_callee17","_context17","deleteCryptoWallet","cryptoWalletId","_callee18","_context18","deleteOAuthRegistration","oauthUserRegistrationId","_callee19","_context19","deleteWebauthnRegistration","webAuthnId","_callee20","_context20","deleteBiometricRegistration","biometricRegistrationId","_callee21","_context21","onChange","callback","lastVal","listener","subscribeToState","getConnectedApps","_callee22","_context22","revokedConnectedApp","connectedAppId","_callee23","_context23","HeadlessSessionClient","_this4","getSession","session","revoke","_callee24","_t7","_context24","destroyState","forceClear","UNRECOVERABLE_ERROR_TYPES","error_type","_authenticate","_callee25","_this5","initialSession","isSessionStale","requestBody","_t8","_context25","session_id","session_duration_minutes","destroySession","authenticate","withUpdateSession","exchangeAccessToken","_callee26","_context26","access_token","attest","_callee27","_context27","profile_id","getTokens","updateSession","tokens","session_token","session_jwt","updateTokens","DefaultDynamicConfig","pkceRequiredForEmailMagicLinks","HeadlessMagicLinksClient","_pkceManager","_passwordResetPKCEManager","_this6","_config","dfpProtectedAuth","email","loginOrCreate","_callee28","_yield$this$_config","code_challenge","_yield$this$dfpProtec","_context28","getCodeChallenge","send","_callee29","_yield$this$_config2","_yield$this$dfpProtec2","isLoggedIn","endpoint","_context29","_callee30","passwordResetPKPair","_t9","_context30","getPKPair","code_verifier","handlePKCEForAuthenticate","keyPair","_context31","startPKCETransaction","_callee31","pkceManager","pkPair","_context32","clearPKPair","_callee32","HeadlessOTPClient","_this7","sms","phone_number","_callee33","_yield$this$dfpProtec3","_context33","_callee34","_yield$this$dfpProtec4","_context34","whatsapp","_callee35","_yield$this$dfpProtec5","_context35","_callee36","_yield$this$dfpProtec6","_context36","_callee37","_yield$this$dfpProtec7","_context37","_callee38","_context38","code","method_id","_callee39","_yield$this$dfpProtec8","_context39","HeadlessOAuthClient","_dynamicConfig","_this8","google","start","startOAuthFlow","OAuthProviders","Google","apple","Apple","microsoft","Microsoft","github","Github","gitlab","GitLab","facebook","Facebook","discord","Discord","salesforce","Salesforce","slack","Slack","amazon","Amazon","bitbucket","Bitbucket","linkedin","LinkedIn","coinbase","Coinbase","twitch","Twitch","twitter","Twitter","tiktok","TikTok","snapchat","Snapchat","figma","Figma","yahoo","Yahoo","_callee40","_context40","attach","provider","_context41","_callee41","getBaseApiUrl","_yield$this$_dynamicC","_context42","cnameDomain","_callee42","providerType","_this9","_ref6","login_redirect_url","signup_redirect_url","custom_scopes","provider_params","oauth_attach_token","_callee43","_yield$this$_dynamicC2","pkceRequiredForOAuth","baseURL","oauthUrl","_context43","details","provider_type","cname_domain","pkce","searchParams","set","join","location","href","siweRequiredForCryptoWallets","HeadlessCryptoWalletClient","_apiNetworkClient","_this0","_callee44","_yield$this$dfpProtec9","_context44","signature","crypto_wallet_address","crypto_wallet_type","authenticateStart","siwe_params","uri","chain_id","issued_at","statement","not_before","message_request_id","resources","_context45","_yield$this$_config3","origin","_callee45","HeadlessTOTPClient","_this1","_callee46","_yield$this$dfpProtec0","_context46","totp_code","recover","_callee47","_yield$this$dfpProtec1","_context47","recovery_code","create","expiration_minutes","_context48","_callee48","recoveryCodes","_callee49","base64urlToBuffer","baseurl64String","padding","slice","base64String","replace","atob","buffer","ArrayBuffer","byteView","charCodeAt","bufferToBase64url","_iterator2","_step2","charCode","String","fromCharCode","btoa","base64urlString","copyValue","convertValue","convert","conversionFn","schema2","output","_i2","_Object$entries","_Object$entries$_i","schemaField","derive","required","schema","derived","optional","publicKeyCredentialDescriptorSchema","id","transports","simplifiedExtensionsSchema","appid","appidExclude","credProps","simplifiedClientExtensionResultsSchema","credentialCreationOptions","publicKey","rp","displayName","challenge","pubKeyCredParams","timeout","excludeCredentials","authenticatorSelection","attestation","extensions","signal","publicKeyCredentialWithAttestation","rawId","authenticatorAttachment","response","clientDataJSON","attestationObject","getTransports","call","clientExtensionResults","pkc","getClientExtensionResults","credentialRequestOptions","mediation","rpId","allowCredentials","userVerification","publicKeyCredentialWithAssertion","authenticatorData","userHandle","createRequestFromJSON","requestJSON","createResponseToJSON","credential","navigator","_context50","_callee50","getRequestFromJSON","getResponseToJSON","_context51","_callee51","HeadlessWebAuthnClient","_this10","register","_callee52","startResp","publicKeyCredentialCreationOptions","_context52","authenticator_type","is_passkey","override_id","override_name","override_display_name","use_base64_url_encoding","return_passkey_credential_options","user_agent","userAgent","public_key_credential_creation_options","parse","webauthnJson.create","public_key_credential","_callee53","_yield$this$dfpProtec10","publicKeyCredentialRequestOptions","abortController","credReqOptions","conditionalMediationCredReqOption","authenticationData","_context53","conditional_mediation","browserSupportsAutofill","checkEligibleInputs","public_key_credential_request_options","AbortController","webauthnJson.get","eligibleInputs","webauthn_registration_id","_context54","_callee54","PublicKeyCredential","isConditionalMediationAvailable","_t1","_t0","_context55","_t10","_callee55","pkceRequiredForPasswordResets","HeadlessPasswordClient","_this11","_callee56","_yield$this$dfpProtec11","_context56","password","_callee57","_yield$this$dfpProtec12","_context57","resetByEmail","_callee58","_yield$this$dfpProtec13","_context58","resetByExistingPassword","_callee59","_yield$this$dfpProtec14","_context59","existing_password","new_password","resetBySession","_callee60","_yield$this$dfpProtec15","_context60","_yield$this$_config4","_context61","_callee61","resetByEmailStart","reset_password_redirect_url","reset_password_template_id","reset_password_expiration_minutes","locale","_context62","_yield$this$dfpProtec16","_callee62","strengthCheck","_context63","_callee63","HeadlessImpersonationClient","_this12","_callee64","_yield$this$dfpProtec17","_context64","impersonation_token","WILDCARD_ACTION","RBACPolicy","roles","_this13","rolesByID","forEach","role","role_id","mergeWithCustomRoles","customRoles","mergedRoles","callerIsAuthorized","memberRoles","resourceId","_this14","roleId","filter","flatMap","permissions","permission","resource_id","find","actions","allPermissionsForCaller","_this15","allPermsMap","resource","fromJSON","HeadlessRBACClient","cachedConfig","dynamicConfig","_this16","isAuthorizedSync","cachedPolicy","roleIds","isAuthorized","policyPromise","policy","rbacPolicy","allPermissions","_this17","HeadlessIDPClient","_this18","oauthAuthorizeStart","_callee65","_context65","oauthAuthorizeSubmit","_callee66","_context66","oauthLogoutStart","_callee67","_context67","HeadlessB2BMagicLinksClient","_this19","invite","_callee68","_context68","email_address","invite_redirect_url","invite_template_id","invite_expiration_minutes","loginOrSignup","_callee69","pkce_code_challenge","_context69","organization_id","login_template_id","signup_template_id","login_expiration_minutes","signup_expiration_minutes","discovery","_callee70","_yield$this$dfpProtec18","_context70","discovery_redirect_url","discovery_expiration_minutes","_callee71","_t11","_context71","magic_links_token","_callee72","_yield$this$dfpProtec19","_context72","discovery_magic_links_token","pkce_code_verifier","_yield$this$_config5","_context73","_callee73","_context74","_yield$this$dfpProtec20","_t12","_t13","_t14","_t15","getIntermediateSessionToken","_t16","_t17","intermediate_session_token","_callee74","HeadlessB2BSelfClient","_this20","_callee75","_context75","updateMember","member","getMember","_callee76","_context76","mfa_enrolled","mfa_phone_number","default_mfa_method","deleteMFAPhoneNumber","_callee77","_context77","deleteMFATOTP","_callee78","_context78","deletePassword","passwordId","_callee79","_context79","unlinkRetiredEmail","_callee80","_context80","startEmailUpdate","_callee81","_context81","_callee82","_context82","revokeConnectedApp","_callee83","_context83","connected_app_id","HeadlessB2BSSOClient","_this21","_callee84","_yield$this$dfpProtec21","_context84","sso_token","saml","createConnection","_callee85","_context85","updateConnection","_callee86","_context86","connection_id","updateConnectionByURL","_callee87","_context87","deleteVerificationCertificate","_callee88","_context88","certificate_id","deleteEncryptionPrivateKey","_callee89","_context89","private_key_id","oidc","_callee90","_context90","_callee91","_context91","external","_callee92","_context92","_callee93","_context93","_context94","_callee94","_ref7","_yield$this$_dynamicC3","_context95","pkceRequiredForSso","startUrl","_callee95","getConnections","_context96","_callee96","discoverConnections","emailAddress","encodeURIComponent","_context97","_callee97","deleteConnection","connectionId","_callee98","HeadlessB2BSCIMClient","display_name","identity_provider","_context99","_callee99","_context100","_callee100","_context101","_callee101","getConnection","_context102","_callee102","getConnectionGroups","limit","cursor","_context103","_callee103","rotateStart","_context104","_callee104","rotateComplete","_context105","_callee105","rotateCancel","_context106","_callee106","HeadlessB2BOrganizationClient","_this22","_callee107","_context107","updateOrganization","organization","getOrganization","_callee108","_context108","_callee109","_context109","getBySlug","_callee110","_context110","organization_slug","_callee111","_context111","getConnectedApp","_callee112","_context112","members","_callee113","_context113","search","_callee114","_context114","_callee115","_context115","member_id","updateMemberIfSelf","_callee116","_context116","memberId","_callee117","_context117","_callee118","_context118","delete","_callee119","_context119","reactivate","_callee120","_context120","_callee121","_context121","_callee122","_context122","_callee123","_context123","_callee124","_context124","HeadlessB2BOAuthClient","_this23","_callee125","_yield$this$dfpProtec22","_t18","_t19","_t20","_t21","_t22","_t23","_t24","_t25","_t26","_context125","oauth_token","_callee126","_yield$this$dfpProtec23","_context126","discovery_oauth_token","B2BOAuthProviders","startDiscoveryOAuthFlow","hubspot","HubSpot","GitHub","_yield$this$_dynamicC4","_context127","_callee127","_this24","_ref8","_callee128","_yield$this$_dynamicC5","_context128","_this25","_ref9","_callee129","_yield$this$_dynamicC6","_context129","HeadlessB2BSessionClient","_this26","_callee130","_t27","_context130","revokeForMember","_callee131","_context131","_callee132","_this27","_t28","_context132","member_session_id","exchange","_callee133","_context133","_callee134","_context134","_callee135","_context135","HeadlessB2BDiscoveryClient","_this28","organizations","list","_callee136","_t29","_t30","_t31","_t32","_context136","_callee137","_t33","_t34","_t35","_t36","_context137","organization_name","organization_logo_url","sso_jit_provisioning","email_allowed_domains","email_invites","auth_methods","allowed_auth_methods","mfa_policy","intermediateSessions","_callee138","_context138","HeadlessB2BPasswordsClient","_this29","_callee139","_yield$this$dfpProtec24","_context139","_callee140","_yield$this$dfpProtec25","_context140","verify_email_template_id","_callee141","_yield$this$dfpProtec26","_t37","_t38","_t39","_t40","_t41","_t42","_t43","_t44","_t45","_t46","_context141","password_reset_token","_callee142","_yield$this$dfpProtec27","_context142","_callee143","_yield$this$dfpProtec28","_context143","_callee144","_yield$this$dfpProtec29","_context144","_callee145","_yield$this$dfpProtec30","_context145","_yield$this$_config6","_context146","_callee146","_context147","_yield$this$dfpProtec31","_callee147","_context148","_callee148","HeadlessB2BOTPsClient","_this30","_callee149","_yield$this$dfpProtec32","_context149","_callee150","_yield$this$dfpProtec33","_context150","set_mfa_enrollment","_callee151","_yield$this$dfpProtec34","_context151","_callee152","_yield$this$dfpProtec35","_context152","_callee153","_yield$this$dfpProtec36","_context153","_callee154","_yield$this$dfpProtec37","_context154","HeadlessB2BTOTPsClient","_this31","_callee155","_yield$this$dfpProtec38","_context155","set_default_mfa","_context156","_yield$this$dfpProtec39","_t47","_t48","_t49","_t50","_t51","_t52","_t53","_t54","_t55","_callee156","HeadlessB2BRecoveryCodesClient","_this32","_callee157","_yield$this$dfpProtec40","_context157","rotate","_yield$this$dfpProtec41","_context158","_callee158","_callee159","HeadlessB2BRBACClient","_this33","effectivePolicy","getEffectivePolicySync","getEffectivePolicy","projectPolicy","_context160","custom_roles","_callee160","_this34","HeadlessB2BImpersonationClient","_this35","_callee161","_yield$this$dfpProtec42","_context161","HeadlessB2BIDPClient","_this36","_callee162","_context162","_callee163","_context163","_callee164","_context164","IframeHostClient","iframeURL","createIframe","existingIframe","querySelector","src","style","position","width","height","border","frame","once","_context165","channel","MessageChannel","port1","onmessage","close","success","payload","contentWindow","postMessage","_this37","port2","_callee165","SearchDataManager","searchUser","_this38","_ref0","searchMember","shouldTryRefresh","SessionManagerRegistry","hasWarned","registry","Map","sessionManager","otherManager","cancelBackgroundRefresh","unregister","SessionManager","_headlessSessionClient","_publicToken","_options","_this39","_onDataChange","sessionDurationMinutes","lastAuthenticationSessionDuration","scheduleBackgroundRefresh","_reauthenticateWithBackoff","_callee166","count","_t56","_context166","keepSessionAlive","isUnrecoverableError","setTimeout","timeoutForAttempt","performBackgroundRefresh","_this40","Date","now","_this41","REFRESH_INTERVAL_MS","clearTimeout","Math","min","jitter","floor","delayMS","StateChangeClient","emptyState","_this42","onStateChange","LOCAL_STORAGE_KEY_PREFIX","getLocalStorageKey","SubscriptionDataLayer","_storageClient","_this43","syncFromLocalStorage","_callee167","_this44","_context167","getData","localData","parsedState","clearData","_parsedState","intermediate_session_token_expiration","subscriptions","syncToLocalStorage","setData","addSubscriber","collection","subscriber","uniqueId","notifySubscribers","values","cb","SubscriptionService","storageClient","_datalayer","expires_at","syncFromDeviceStorage","onCompleteCallback","_this45","res","setCacheRefreshed","updateStateAndTokens","getState","removeIST","removeSessionTokens","_updateStateAndTokensInternal","stateDiff","newData","notification","updateState","newState","ConsumerSubscriptionService","_SubscriptionService","_this46","_len4","_key4","_callee168","_context168","B2BSubscriptionService","_SubscriptionService2","_this47","originalResp","member_session","_callee169","_context169","VERTICAL_B2B","VERTICAL_CONSUMER","createDeepEqual","_ref1","_ref1$KEYS_TO_EXCLUDE","KEYS_TO_EXCLUDE","deepEqual","b","keys","some","k","_ref10","_ref11","every","_ref12","_ref13"],"mappings":"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"}